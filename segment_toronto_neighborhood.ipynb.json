{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Requirement not upgraded as not directly required: beautifulsoup4 in /opt/conda/envs/DSX-Python35/lib/python3.5/site-packages\r\n"
     ]
    }
   ],
   "source": [
    "# install beautifulSoup\n",
    "!pip install beautifulsoup4"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Requirement not upgraded as not directly required: lxml in /opt/conda/envs/DSX-Python35/lib/python3.5/site-packages\r\n"
     ]
    }
   ],
   "source": [
    "!pip install lxml"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Requirement not upgraded as not directly required: requests in /opt/conda/envs/DSX-Python35/lib/python3.5/site-packages\n",
      "Requirement not upgraded as not directly required: chardet<3.1.0,>=3.0.2 in /opt/conda/envs/DSX-Python35/lib/python3.5/site-packages (from requests)\n",
      "Requirement not upgraded as not directly required: idna<2.7,>=2.5 in /opt/conda/envs/DSX-Python35/lib/python3.5/site-packages (from requests)\n",
      "Requirement not upgraded as not directly required: urllib3<1.23,>=1.21.1 in /opt/conda/envs/DSX-Python35/lib/python3.5/site-packages (from requests)\n",
      "Requirement not upgraded as not directly required: certifi>=2017.4.17 in /opt/conda/envs/DSX-Python35/lib/python3.5/site-packages (from requests)\n"
     ]
    }
   ],
   "source": [
    "!pip install requests"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Import BeautifulSoup\n",
    "from bs4 import BeautifulSoup\n",
    "import requests"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Scrape data from wikipedia on Neighbourhoods in Toronto</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "['Postcode', 'Borough', 'Neighbourhood\\n']"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import pandas as pd\n",
    "import urllib.request  \n",
    "target_url = 'https://en.wikipedia.org/wiki/List_of_postal_codes_of_Canada:_M'\n",
    "data = urllib.request.urlopen(target_url) # it's a file like object and works just like a file\n",
    "#for line in data: # files are iterable\n",
    "#    print(line)\n",
    "\n",
    "soup = BeautifulSoup(data, 'lxml')\n",
    "\n",
    "table = soup.find('table', class_='wikitable sortable')\n",
    "\n",
    "headers = []\n",
    "for header in table.find_all('th'):\n",
    "    headers.append(header.text)\n",
    "    #print(header.text)\n",
    "\n",
    "headers"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [],
   "source": [
    "df_all = []\n",
    "for row in table.find_all('tr'):\n",
    "    df_r = []\n",
    "    for cd in row.find_all('td'):\n",
    "        c = cd.text\n",
    "        df_r.append(c)\n",
    "    if len(df_r) == 3:  \n",
    "        df_all.append(df_r)\n",
    "    #print(len(df_r))  \n",
    "    #if len(df_r) == 3:\n",
    "       # df.append(df_r)\n",
    "df_all[:3]\n",
    "codes = []\n",
    "borough = []\n",
    "neigh = []\n",
    "for x in df_all[:]:\n",
    "    codes.append(x[0])\n",
    "    borough.append(x[1])\n",
    "    neigh.append(x[2])\n",
    "\n",
    "data = (codes, borough, neigh)\n",
    "data_dict = dict(zip(headers, data))\n",
    "data_dict\n",
    "\n",
    "df = pd.DataFrame(data_dict)\n",
    "df = df.replace('\\n','', regex=True)\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "Index(['Borough', 'Neighbourhood', 'Postcode'], dtype='object')"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df.rename(columns = {'Neighbourhood\\n': 'Neighbourhood'}, inplace=True)\n",
    "df.columns\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Drop rows with 'Not assigned' values in Borough</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "df['Borough'].replace('Not assigned', np.nan, inplace=True)\n",
    "df.dropna(axis=0, inplace=True)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Merge the rows having the same postal code by concatenating the Neighbourhood values</h4>\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Postcode</th>\n",
       "      <th>Borough</th>\n",
       "      <th>Neighbourhood</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>M1B</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Rouge, Malvern</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>M1C</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>M1E</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Guildwood, Morningside, West Hill</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>M1G</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Woburn</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>M1H</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cedarbrae</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>M1J</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Scarborough Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>M1K</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>East Birchmount Park, Ionview, Kennedy Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>M1L</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Clairlea, Golden Mile, Oakridge</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>M1M</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cliffcrest, Cliffside, Scarborough Village West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>M1N</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Birch Cliff, Cliffside West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>M1P</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Dorset Park, Scarborough Town Centre, Wexford ...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>M1R</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Maryvale, Wexford</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>M1S</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>M1T</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>M1V</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>M1W</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>L'Amoreaux West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>M1X</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Upper Rouge</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>M2H</td>\n",
       "      <td>North York</td>\n",
       "      <td>Hillcrest Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>M2J</td>\n",
       "      <td>North York</td>\n",
       "      <td>Fairview, Henry Farm, Oriole</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>M2K</td>\n",
       "      <td>North York</td>\n",
       "      <td>Bayview Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>M2L</td>\n",
       "      <td>North York</td>\n",
       "      <td>Silver Hills, York Mills</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>M2M</td>\n",
       "      <td>North York</td>\n",
       "      <td>Newtonbrook, Willowdale</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>M2N</td>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale South</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>M2P</td>\n",
       "      <td>North York</td>\n",
       "      <td>York Mills West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>M2R</td>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>M3A</td>\n",
       "      <td>North York</td>\n",
       "      <td>Parkwoods</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>M3B</td>\n",
       "      <td>North York</td>\n",
       "      <td>Don Mills North</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>M3C</td>\n",
       "      <td>North York</td>\n",
       "      <td>Flemingdon Park, Don Mills South</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>M3H</td>\n",
       "      <td>North York</td>\n",
       "      <td>Bathurst Manor, Downsview North, Wilson Heights</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>M3J</td>\n",
       "      <td>North York</td>\n",
       "      <td>Northwood Park, York University</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>73</th>\n",
       "      <td>M6C</td>\n",
       "      <td>York</td>\n",
       "      <td>Humewood-Cedarvale</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>74</th>\n",
       "      <td>M6E</td>\n",
       "      <td>York</td>\n",
       "      <td>Caledonia-Fairbanks</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75</th>\n",
       "      <td>M6G</td>\n",
       "      <td>Downtown Toronto</td>\n",
       "      <td>Christie</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>76</th>\n",
       "      <td>M6H</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Dovercourt Village, Dufferin</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>77</th>\n",
       "      <td>M6J</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Little Portugal, Trinity</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>78</th>\n",
       "      <td>M6K</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Brockton, Exhibition Place, Parkdale Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>79</th>\n",
       "      <td>M6L</td>\n",
       "      <td>North York</td>\n",
       "      <td>Downsview, North Park, Upwood Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>80</th>\n",
       "      <td>M6M</td>\n",
       "      <td>York</td>\n",
       "      <td>Del Ray, Keelesdale, Mount Dennis, Silverthorn</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>81</th>\n",
       "      <td>M6N</td>\n",
       "      <td>York</td>\n",
       "      <td>The Junction North, Runnymede</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>82</th>\n",
       "      <td>M6P</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>High Park, The Junction South</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>83</th>\n",
       "      <td>M6R</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Parkdale, Roncesvalles</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>84</th>\n",
       "      <td>M6S</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Runnymede, Swansea</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>85</th>\n",
       "      <td>M7A</td>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>Not assigned</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>86</th>\n",
       "      <td>M7R</td>\n",
       "      <td>Mississauga</td>\n",
       "      <td>Canada Post Gateway Processing Centre</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>87</th>\n",
       "      <td>M7Y</td>\n",
       "      <td>East Toronto</td>\n",
       "      <td>Business Reply Mail Processing Centre 969 Eastern</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>88</th>\n",
       "      <td>M8V</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Humber Bay Shores, Mimico South, New Toronto</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>89</th>\n",
       "      <td>M8W</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Alderwood, Long Branch</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>90</th>\n",
       "      <td>M8X</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>The Kingsway, Montgomery Road, Old Mill North</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>91</th>\n",
       "      <td>M8Y</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Humber Bay, King's Mill Park, Kingsway Park So...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>92</th>\n",
       "      <td>M8Z</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Kingsway Park South West, Mimico NW, The Queen...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>93</th>\n",
       "      <td>M9A</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Islington Avenue</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>94</th>\n",
       "      <td>M9B</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Cloverdale, Islington, Martin Grove, Princess ...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>95</th>\n",
       "      <td>M9C</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Bloordale Gardens, Eringate, Markland Wood, Ol...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>96</th>\n",
       "      <td>M9L</td>\n",
       "      <td>North York</td>\n",
       "      <td>Humber Summit</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>97</th>\n",
       "      <td>M9M</td>\n",
       "      <td>North York</td>\n",
       "      <td>Emery, Humberlea</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>98</th>\n",
       "      <td>M9N</td>\n",
       "      <td>York</td>\n",
       "      <td>Weston</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>99</th>\n",
       "      <td>M9P</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Westmount</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>100</th>\n",
       "      <td>M9R</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Kingsview Village, Martin Grove Gardens, Richv...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>101</th>\n",
       "      <td>M9V</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Albion Gardens, Beaumond Heights, Humbergate, ...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>102</th>\n",
       "      <td>M9W</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Northwest</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>103 rows × 3 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "    Postcode           Borough  \\\n",
       "0        M1B       Scarborough   \n",
       "1        M1C       Scarborough   \n",
       "2        M1E       Scarborough   \n",
       "3        M1G       Scarborough   \n",
       "4        M1H       Scarborough   \n",
       "5        M1J       Scarborough   \n",
       "6        M1K       Scarborough   \n",
       "7        M1L       Scarborough   \n",
       "8        M1M       Scarborough   \n",
       "9        M1N       Scarborough   \n",
       "10       M1P       Scarborough   \n",
       "11       M1R       Scarborough   \n",
       "12       M1S       Scarborough   \n",
       "13       M1T       Scarborough   \n",
       "14       M1V       Scarborough   \n",
       "15       M1W       Scarborough   \n",
       "16       M1X       Scarborough   \n",
       "17       M2H        North York   \n",
       "18       M2J        North York   \n",
       "19       M2K        North York   \n",
       "20       M2L        North York   \n",
       "21       M2M        North York   \n",
       "22       M2N        North York   \n",
       "23       M2P        North York   \n",
       "24       M2R        North York   \n",
       "25       M3A        North York   \n",
       "26       M3B        North York   \n",
       "27       M3C        North York   \n",
       "28       M3H        North York   \n",
       "29       M3J        North York   \n",
       "..       ...               ...   \n",
       "73       M6C              York   \n",
       "74       M6E              York   \n",
       "75       M6G  Downtown Toronto   \n",
       "76       M6H      West Toronto   \n",
       "77       M6J      West Toronto   \n",
       "78       M6K      West Toronto   \n",
       "79       M6L        North York   \n",
       "80       M6M              York   \n",
       "81       M6N              York   \n",
       "82       M6P      West Toronto   \n",
       "83       M6R      West Toronto   \n",
       "84       M6S      West Toronto   \n",
       "85       M7A      Queen's Park   \n",
       "86       M7R       Mississauga   \n",
       "87       M7Y      East Toronto   \n",
       "88       M8V         Etobicoke   \n",
       "89       M8W         Etobicoke   \n",
       "90       M8X         Etobicoke   \n",
       "91       M8Y         Etobicoke   \n",
       "92       M8Z         Etobicoke   \n",
       "93       M9A         Etobicoke   \n",
       "94       M9B         Etobicoke   \n",
       "95       M9C         Etobicoke   \n",
       "96       M9L        North York   \n",
       "97       M9M        North York   \n",
       "98       M9N              York   \n",
       "99       M9P         Etobicoke   \n",
       "100      M9R         Etobicoke   \n",
       "101      M9V         Etobicoke   \n",
       "102      M9W         Etobicoke   \n",
       "\n",
       "                                         Neighbourhood  \n",
       "0                                       Rouge, Malvern  \n",
       "1               Highland Creek, Rouge Hill, Port Union  \n",
       "2                    Guildwood, Morningside, West Hill  \n",
       "3                                               Woburn  \n",
       "4                                            Cedarbrae  \n",
       "5                                  Scarborough Village  \n",
       "6          East Birchmount Park, Ionview, Kennedy Park  \n",
       "7                      Clairlea, Golden Mile, Oakridge  \n",
       "8      Cliffcrest, Cliffside, Scarborough Village West  \n",
       "9                          Birch Cliff, Cliffside West  \n",
       "10   Dorset Park, Scarborough Town Centre, Wexford ...  \n",
       "11                                   Maryvale, Wexford  \n",
       "12                                           Agincourt  \n",
       "13             Clarks Corners, Sullivan, Tam O'Shanter  \n",
       "14   Agincourt North, L'Amoreaux East, Milliken, St...  \n",
       "15                                     L'Amoreaux West  \n",
       "16                                         Upper Rouge  \n",
       "17                                   Hillcrest Village  \n",
       "18                        Fairview, Henry Farm, Oriole  \n",
       "19                                     Bayview Village  \n",
       "20                            Silver Hills, York Mills  \n",
       "21                             Newtonbrook, Willowdale  \n",
       "22                                    Willowdale South  \n",
       "23                                     York Mills West  \n",
       "24                                     Willowdale West  \n",
       "25                                           Parkwoods  \n",
       "26                                     Don Mills North  \n",
       "27                    Flemingdon Park, Don Mills South  \n",
       "28     Bathurst Manor, Downsview North, Wilson Heights  \n",
       "29                     Northwood Park, York University  \n",
       "..                                                 ...  \n",
       "73                                  Humewood-Cedarvale  \n",
       "74                                 Caledonia-Fairbanks  \n",
       "75                                            Christie  \n",
       "76                        Dovercourt Village, Dufferin  \n",
       "77                            Little Portugal, Trinity  \n",
       "78        Brockton, Exhibition Place, Parkdale Village  \n",
       "79                  Downsview, North Park, Upwood Park  \n",
       "80      Del Ray, Keelesdale, Mount Dennis, Silverthorn  \n",
       "81                       The Junction North, Runnymede  \n",
       "82                       High Park, The Junction South  \n",
       "83                              Parkdale, Roncesvalles  \n",
       "84                                  Runnymede, Swansea  \n",
       "85                                        Not assigned  \n",
       "86               Canada Post Gateway Processing Centre  \n",
       "87   Business Reply Mail Processing Centre 969 Eastern  \n",
       "88        Humber Bay Shores, Mimico South, New Toronto  \n",
       "89                              Alderwood, Long Branch  \n",
       "90       The Kingsway, Montgomery Road, Old Mill North  \n",
       "91   Humber Bay, King's Mill Park, Kingsway Park So...  \n",
       "92   Kingsway Park South West, Mimico NW, The Queen...  \n",
       "93                                    Islington Avenue  \n",
       "94   Cloverdale, Islington, Martin Grove, Princess ...  \n",
       "95   Bloordale Gardens, Eringate, Markland Wood, Ol...  \n",
       "96                                       Humber Summit  \n",
       "97                                    Emery, Humberlea  \n",
       "98                                              Weston  \n",
       "99                                           Westmount  \n",
       "100  Kingsview Village, Martin Grove Gardens, Richv...  \n",
       "101  Albion Gardens, Beaumond Heights, Humbergate, ...  \n",
       "102                                          Northwest  \n",
       "\n",
       "[103 rows x 3 columns]"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "change = lambda a: \", \".join(a) \n",
    "\n",
    "df_grouped = df.groupby(['Postcode','Borough'])\n",
    "df_grouped_agg = df_grouped.agg({'Neighbourhood': change}).reset_index()\n",
    "df_grouped_agg\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "103"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "len(df['Postcode'].unique())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Replace 'Not assigned' values in Neighbourhood with corresponding Borough value</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>PostalCode</th>\n",
       "      <th>Borough</th>\n",
       "      <th>Neighbourhood</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>M1B</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Rouge, Malvern</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>M1C</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>M1E</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Guildwood, Morningside, West Hill</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>M1G</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Woburn</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>M1H</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cedarbrae</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>M1J</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Scarborough Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>M1K</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>East Birchmount Park, Ionview, Kennedy Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>M1L</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Clairlea, Golden Mile, Oakridge</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>M1M</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cliffcrest, Cliffside, Scarborough Village West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>M1N</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Birch Cliff, Cliffside West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>M1P</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Dorset Park, Scarborough Town Centre, Wexford ...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>M1R</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Maryvale, Wexford</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>M1S</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>M1T</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>M1V</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>M1W</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>L'Amoreaux West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>M1X</td>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Upper Rouge</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>M2H</td>\n",
       "      <td>North York</td>\n",
       "      <td>Hillcrest Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>M2J</td>\n",
       "      <td>North York</td>\n",
       "      <td>Fairview, Henry Farm, Oriole</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>M2K</td>\n",
       "      <td>North York</td>\n",
       "      <td>Bayview Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>M2L</td>\n",
       "      <td>North York</td>\n",
       "      <td>Silver Hills, York Mills</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>M2M</td>\n",
       "      <td>North York</td>\n",
       "      <td>Newtonbrook, Willowdale</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>M2N</td>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale South</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>M2P</td>\n",
       "      <td>North York</td>\n",
       "      <td>York Mills West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>M2R</td>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>M3A</td>\n",
       "      <td>North York</td>\n",
       "      <td>Parkwoods</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>M3B</td>\n",
       "      <td>North York</td>\n",
       "      <td>Don Mills North</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>M3C</td>\n",
       "      <td>North York</td>\n",
       "      <td>Flemingdon Park, Don Mills South</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>M3H</td>\n",
       "      <td>North York</td>\n",
       "      <td>Bathurst Manor, Downsview North, Wilson Heights</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>M3J</td>\n",
       "      <td>North York</td>\n",
       "      <td>Northwood Park, York University</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>73</th>\n",
       "      <td>M6C</td>\n",
       "      <td>York</td>\n",
       "      <td>Humewood-Cedarvale</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>74</th>\n",
       "      <td>M6E</td>\n",
       "      <td>York</td>\n",
       "      <td>Caledonia-Fairbanks</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75</th>\n",
       "      <td>M6G</td>\n",
       "      <td>Downtown Toronto</td>\n",
       "      <td>Christie</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>76</th>\n",
       "      <td>M6H</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Dovercourt Village, Dufferin</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>77</th>\n",
       "      <td>M6J</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Little Portugal, Trinity</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>78</th>\n",
       "      <td>M6K</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Brockton, Exhibition Place, Parkdale Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>79</th>\n",
       "      <td>M6L</td>\n",
       "      <td>North York</td>\n",
       "      <td>Downsview, North Park, Upwood Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>80</th>\n",
       "      <td>M6M</td>\n",
       "      <td>York</td>\n",
       "      <td>Del Ray, Keelesdale, Mount Dennis, Silverthorn</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>81</th>\n",
       "      <td>M6N</td>\n",
       "      <td>York</td>\n",
       "      <td>The Junction North, Runnymede</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>82</th>\n",
       "      <td>M6P</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>High Park, The Junction South</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>83</th>\n",
       "      <td>M6R</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Parkdale, Roncesvalles</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>84</th>\n",
       "      <td>M6S</td>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Runnymede, Swansea</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>85</th>\n",
       "      <td>M7A</td>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>Queen's Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>86</th>\n",
       "      <td>M7R</td>\n",
       "      <td>Mississauga</td>\n",
       "      <td>Canada Post Gateway Processing Centre</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>87</th>\n",
       "      <td>M7Y</td>\n",
       "      <td>East Toronto</td>\n",
       "      <td>Business Reply Mail Processing Centre 969 Eastern</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>88</th>\n",
       "      <td>M8V</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Humber Bay Shores, Mimico South, New Toronto</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>89</th>\n",
       "      <td>M8W</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Alderwood, Long Branch</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>90</th>\n",
       "      <td>M8X</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>The Kingsway, Montgomery Road, Old Mill North</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>91</th>\n",
       "      <td>M8Y</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Humber Bay, King's Mill Park, Kingsway Park So...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>92</th>\n",
       "      <td>M8Z</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Kingsway Park South West, Mimico NW, The Queen...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>93</th>\n",
       "      <td>M9A</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Islington Avenue</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>94</th>\n",
       "      <td>M9B</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Cloverdale, Islington, Martin Grove, Princess ...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>95</th>\n",
       "      <td>M9C</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Bloordale Gardens, Eringate, Markland Wood, Ol...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>96</th>\n",
       "      <td>M9L</td>\n",
       "      <td>North York</td>\n",
       "      <td>Humber Summit</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>97</th>\n",
       "      <td>M9M</td>\n",
       "      <td>North York</td>\n",
       "      <td>Emery, Humberlea</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>98</th>\n",
       "      <td>M9N</td>\n",
       "      <td>York</td>\n",
       "      <td>Weston</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>99</th>\n",
       "      <td>M9P</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Westmount</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>100</th>\n",
       "      <td>M9R</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Kingsview Village, Martin Grove Gardens, Richv...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>101</th>\n",
       "      <td>M9V</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Albion Gardens, Beaumond Heights, Humbergate, ...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>102</th>\n",
       "      <td>M9W</td>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Northwest</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>103 rows × 3 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "    PostalCode           Borough  \\\n",
       "0          M1B       Scarborough   \n",
       "1          M1C       Scarborough   \n",
       "2          M1E       Scarborough   \n",
       "3          M1G       Scarborough   \n",
       "4          M1H       Scarborough   \n",
       "5          M1J       Scarborough   \n",
       "6          M1K       Scarborough   \n",
       "7          M1L       Scarborough   \n",
       "8          M1M       Scarborough   \n",
       "9          M1N       Scarborough   \n",
       "10         M1P       Scarborough   \n",
       "11         M1R       Scarborough   \n",
       "12         M1S       Scarborough   \n",
       "13         M1T       Scarborough   \n",
       "14         M1V       Scarborough   \n",
       "15         M1W       Scarborough   \n",
       "16         M1X       Scarborough   \n",
       "17         M2H        North York   \n",
       "18         M2J        North York   \n",
       "19         M2K        North York   \n",
       "20         M2L        North York   \n",
       "21         M2M        North York   \n",
       "22         M2N        North York   \n",
       "23         M2P        North York   \n",
       "24         M2R        North York   \n",
       "25         M3A        North York   \n",
       "26         M3B        North York   \n",
       "27         M3C        North York   \n",
       "28         M3H        North York   \n",
       "29         M3J        North York   \n",
       "..         ...               ...   \n",
       "73         M6C              York   \n",
       "74         M6E              York   \n",
       "75         M6G  Downtown Toronto   \n",
       "76         M6H      West Toronto   \n",
       "77         M6J      West Toronto   \n",
       "78         M6K      West Toronto   \n",
       "79         M6L        North York   \n",
       "80         M6M              York   \n",
       "81         M6N              York   \n",
       "82         M6P      West Toronto   \n",
       "83         M6R      West Toronto   \n",
       "84         M6S      West Toronto   \n",
       "85         M7A      Queen's Park   \n",
       "86         M7R       Mississauga   \n",
       "87         M7Y      East Toronto   \n",
       "88         M8V         Etobicoke   \n",
       "89         M8W         Etobicoke   \n",
       "90         M8X         Etobicoke   \n",
       "91         M8Y         Etobicoke   \n",
       "92         M8Z         Etobicoke   \n",
       "93         M9A         Etobicoke   \n",
       "94         M9B         Etobicoke   \n",
       "95         M9C         Etobicoke   \n",
       "96         M9L        North York   \n",
       "97         M9M        North York   \n",
       "98         M9N              York   \n",
       "99         M9P         Etobicoke   \n",
       "100        M9R         Etobicoke   \n",
       "101        M9V         Etobicoke   \n",
       "102        M9W         Etobicoke   \n",
       "\n",
       "                                         Neighbourhood  \n",
       "0                                       Rouge, Malvern  \n",
       "1               Highland Creek, Rouge Hill, Port Union  \n",
       "2                    Guildwood, Morningside, West Hill  \n",
       "3                                               Woburn  \n",
       "4                                            Cedarbrae  \n",
       "5                                  Scarborough Village  \n",
       "6          East Birchmount Park, Ionview, Kennedy Park  \n",
       "7                      Clairlea, Golden Mile, Oakridge  \n",
       "8      Cliffcrest, Cliffside, Scarborough Village West  \n",
       "9                          Birch Cliff, Cliffside West  \n",
       "10   Dorset Park, Scarborough Town Centre, Wexford ...  \n",
       "11                                   Maryvale, Wexford  \n",
       "12                                           Agincourt  \n",
       "13             Clarks Corners, Sullivan, Tam O'Shanter  \n",
       "14   Agincourt North, L'Amoreaux East, Milliken, St...  \n",
       "15                                     L'Amoreaux West  \n",
       "16                                         Upper Rouge  \n",
       "17                                   Hillcrest Village  \n",
       "18                        Fairview, Henry Farm, Oriole  \n",
       "19                                     Bayview Village  \n",
       "20                            Silver Hills, York Mills  \n",
       "21                             Newtonbrook, Willowdale  \n",
       "22                                    Willowdale South  \n",
       "23                                     York Mills West  \n",
       "24                                     Willowdale West  \n",
       "25                                           Parkwoods  \n",
       "26                                     Don Mills North  \n",
       "27                    Flemingdon Park, Don Mills South  \n",
       "28     Bathurst Manor, Downsview North, Wilson Heights  \n",
       "29                     Northwood Park, York University  \n",
       "..                                                 ...  \n",
       "73                                  Humewood-Cedarvale  \n",
       "74                                 Caledonia-Fairbanks  \n",
       "75                                            Christie  \n",
       "76                        Dovercourt Village, Dufferin  \n",
       "77                            Little Portugal, Trinity  \n",
       "78        Brockton, Exhibition Place, Parkdale Village  \n",
       "79                  Downsview, North Park, Upwood Park  \n",
       "80      Del Ray, Keelesdale, Mount Dennis, Silverthorn  \n",
       "81                       The Junction North, Runnymede  \n",
       "82                       High Park, The Junction South  \n",
       "83                              Parkdale, Roncesvalles  \n",
       "84                                  Runnymede, Swansea  \n",
       "85                                        Queen's Park  \n",
       "86               Canada Post Gateway Processing Centre  \n",
       "87   Business Reply Mail Processing Centre 969 Eastern  \n",
       "88        Humber Bay Shores, Mimico South, New Toronto  \n",
       "89                              Alderwood, Long Branch  \n",
       "90       The Kingsway, Montgomery Road, Old Mill North  \n",
       "91   Humber Bay, King's Mill Park, Kingsway Park So...  \n",
       "92   Kingsway Park South West, Mimico NW, The Queen...  \n",
       "93                                    Islington Avenue  \n",
       "94   Cloverdale, Islington, Martin Grove, Princess ...  \n",
       "95   Bloordale Gardens, Eringate, Markland Wood, Ol...  \n",
       "96                                       Humber Summit  \n",
       "97                                    Emery, Humberlea  \n",
       "98                                              Weston  \n",
       "99                                           Westmount  \n",
       "100  Kingsview Village, Martin Grove Gardens, Richv...  \n",
       "101  Albion Gardens, Beaumond Heights, Humbergate, ...  \n",
       "102                                          Northwest  \n",
       "\n",
       "[103 rows x 3 columns]"
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df_temp = df_grouped_agg\n",
    "\n",
    "df_temp['Neighbourhood'] = df_temp.where(df_temp.ne('Not assigned'), np.nan).bfill(axis=1).Neighbourhood.fillna(df_temp['Borough'])\n",
    "df_temp.rename(columns={'Postcode': 'PostalCode'}, inplace=True)\n",
    "df_temp\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Print the number of rows of the resultant dataframe</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Number of rows is: 103\n"
     ]
    }
   ],
   "source": [
    "shape = df_temp.shape\n",
    "print(\"Number of rows is: \"+str(shape[0]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Fetching package metadata .............\n",
      "Solving package specifications: .\n",
      "\n",
      "Package plan for installation in environment /opt/conda/envs/DSX-Python35:\n",
      "\n",
      "The following NEW packages will be INSTALLED:\n",
      "\n",
      "    altair:  2.2.2-py35_1 conda-forge\n",
      "    branca:  0.3.1-py_0   conda-forge\n",
      "    folium:  0.5.0-py_0   conda-forge\n",
      "    vincent: 0.4.4-py_1   conda-forge\n",
      "\n",
      "altair-2.2.2-p 100% |################################| Time: 0:00:00  49.85 MB/s\n",
      "branca-0.3.1-p 100% |################################| Time: 0:00:00  36.77 MB/s\n",
      "vincent-0.4.4- 100% |################################| Time: 0:00:00  34.66 MB/s\n",
      "folium-0.5.0-p 100% |################################| Time: 0:00:00  42.85 MB/s\n"
     ]
    }
   ],
   "source": [
    "import json # library to handle JSON files\n",
    "\n",
    "#!conda install -c conda-forge geopy --yes # uncomment this line if you haven't completed the Foursquare API lab\n",
    "from geopy.geocoders import Nominatim # convert an address into latitude and longitude values\n",
    "\n",
    "import requests # library to handle requests\n",
    "from pandas.io.json import json_normalize # tranform JSON file into a pandas dataframe\n",
    "\n",
    "# Matplotlib and associated plotting modules\n",
    "import matplotlib.cm as cm\n",
    "import matplotlib.colors as colors\n",
    "\n",
    "# import k-means from clustering stage\n",
    "from sklearn.cluster import KMeans\n",
    "\n",
    "!conda install -c conda-forge folium=0.5.0 --yes # uncomment this line if you haven't completed the Foursquare API lab\n",
    "import folium # map rendering library\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The geograpical coordinate of Toronto are 43.653963, -79.387207.\n"
     ]
    }
   ],
   "source": [
    "address = 'Toronto'\n",
    "\n",
    "geolocator = Nominatim(user_agent=\"toro_explorer\")\n",
    "location = geolocator.geocode(address)\n",
    "latitude = location.latitude\n",
    "longitude = location.longitude\n",
    "print('The geograpical coordinate of Toronto are {}, {}.'.format(latitude, longitude))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Postalcode</th>\n",
       "      <th>Borough</th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "Empty DataFrame\n",
       "Columns: [Postalcode, Borough, Neighborhood, Latitude, Longitude]\n",
       "Index: []"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# define the dataframe columns\n",
    "column_names = ['PostalCode', 'Borough', 'Neighborhood', 'Latitude', 'Longitude'] \n",
    "\n",
    "# instantiate the dataframe\n",
    "neighborhoods = pd.DataFrame(columns=column_names)\n",
    "neighborhoods"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Borough</th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>43.813464</td>\n",
       "      <td>-79.205981</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Guildwood, Morningside, West Hill</td>\n",
       "      <td>43.753480</td>\n",
       "      <td>-79.179995</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cedarbrae</td>\n",
       "      <td>43.756467</td>\n",
       "      <td>-79.226692</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Scarborough Village</td>\n",
       "      <td>43.743742</td>\n",
       "      <td>-79.211632</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>East Birchmount Park, Ionview, Kennedy Park</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Clairlea, Golden Mile, Oakridge</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cliffcrest, Cliffside, Scarborough Village West</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Birch Cliff, Cliffside West</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Dorset Park, Scarborough Town Centre, Wexford ...</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Maryvale, Wexford</td>\n",
       "      <td>43.759831</td>\n",
       "      <td>-79.296470</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>L'Amoreaux West</td>\n",
       "      <td>43.799003</td>\n",
       "      <td>-79.305967</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Upper Rouge</td>\n",
       "      <td>43.804930</td>\n",
       "      <td>-79.165837</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>North York</td>\n",
       "      <td>Hillcrest Village</td>\n",
       "      <td>43.799664</td>\n",
       "      <td>-79.365019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>North York</td>\n",
       "      <td>Fairview, Henry Farm, Oriole</td>\n",
       "      <td>43.770817</td>\n",
       "      <td>-79.413300</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>North York</td>\n",
       "      <td>Bayview Village</td>\n",
       "      <td>43.769197</td>\n",
       "      <td>-79.376662</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>North York</td>\n",
       "      <td>Silver Hills, York Mills</td>\n",
       "      <td>43.770817</td>\n",
       "      <td>-79.413300</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>North York</td>\n",
       "      <td>Newtonbrook, Willowdale</td>\n",
       "      <td>43.793886</td>\n",
       "      <td>-79.425679</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale South</td>\n",
       "      <td>43.775356</td>\n",
       "      <td>-79.416686</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>North York</td>\n",
       "      <td>York Mills West</td>\n",
       "      <td>43.744039</td>\n",
       "      <td>-79.406657</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale West</td>\n",
       "      <td>43.775356</td>\n",
       "      <td>-79.416686</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>North York</td>\n",
       "      <td>Parkwoods</td>\n",
       "      <td>43.761224</td>\n",
       "      <td>-79.323986</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>North York</td>\n",
       "      <td>Don Mills North</td>\n",
       "      <td>43.737178</td>\n",
       "      <td>-79.343451</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>North York</td>\n",
       "      <td>Flemingdon Park, Don Mills South</td>\n",
       "      <td>43.770817</td>\n",
       "      <td>-79.413300</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>North York</td>\n",
       "      <td>Bathurst Manor, Downsview North, Wilson Heights</td>\n",
       "      <td>43.770817</td>\n",
       "      <td>-79.413300</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>North York</td>\n",
       "      <td>Northwood Park, York University</td>\n",
       "      <td>43.770817</td>\n",
       "      <td>-79.413300</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>73</th>\n",
       "      <td>York</td>\n",
       "      <td>Humewood-Cedarvale</td>\n",
       "      <td>53.959055</td>\n",
       "      <td>-1.081536</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>74</th>\n",
       "      <td>York</td>\n",
       "      <td>Caledonia-Fairbanks</td>\n",
       "      <td>53.959055</td>\n",
       "      <td>-1.081536</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75</th>\n",
       "      <td>Downtown Toronto</td>\n",
       "      <td>Christie</td>\n",
       "      <td>43.649991</td>\n",
       "      <td>-79.385722</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>76</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Dovercourt Village, Dufferin</td>\n",
       "      <td>43.658820</td>\n",
       "      <td>-79.435386</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>77</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Little Portugal, Trinity</td>\n",
       "      <td>43.653963</td>\n",
       "      <td>-79.387207</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>78</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Brockton, Exhibition Place, Parkdale Village</td>\n",
       "      <td>43.653963</td>\n",
       "      <td>-79.387207</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>79</th>\n",
       "      <td>North York</td>\n",
       "      <td>Downsview, North Park, Upwood Park</td>\n",
       "      <td>43.770817</td>\n",
       "      <td>-79.413300</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>80</th>\n",
       "      <td>York</td>\n",
       "      <td>Del Ray, Keelesdale, Mount Dennis, Silverthorn</td>\n",
       "      <td>53.959055</td>\n",
       "      <td>-1.081536</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>81</th>\n",
       "      <td>York</td>\n",
       "      <td>The Junction North, Runnymede</td>\n",
       "      <td>43.666157</td>\n",
       "      <td>-79.487769</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>82</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>High Park, The Junction South</td>\n",
       "      <td>43.653963</td>\n",
       "      <td>-79.387207</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>83</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Parkdale, Roncesvalles</td>\n",
       "      <td>43.639846</td>\n",
       "      <td>-79.439646</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>84</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Runnymede, Swansea</td>\n",
       "      <td>43.651778</td>\n",
       "      <td>-79.475923</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>85</th>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>-32.007434</td>\n",
       "      <td>115.938736</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>86</th>\n",
       "      <td>Mississauga</td>\n",
       "      <td>Canada Post Gateway Processing Centre</td>\n",
       "      <td>43.590338</td>\n",
       "      <td>-79.645729</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>87</th>\n",
       "      <td>East Toronto</td>\n",
       "      <td>Business Reply Mail Processing Centre 969 Eastern</td>\n",
       "      <td>43.653963</td>\n",
       "      <td>-79.387207</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>88</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Humber Bay Shores, Mimico South, New Toronto</td>\n",
       "      <td>43.671459</td>\n",
       "      <td>-79.552492</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>89</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Alderwood, Long Branch</td>\n",
       "      <td>43.601717</td>\n",
       "      <td>-79.545232</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>90</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>The Kingsway, Montgomery Road, Old Mill North</td>\n",
       "      <td>43.671459</td>\n",
       "      <td>-79.552492</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>91</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Humber Bay, King's Mill Park, Kingsway Park So...</td>\n",
       "      <td>43.671459</td>\n",
       "      <td>-79.552492</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>92</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Kingsway Park South West, Mimico NW, The Queen...</td>\n",
       "      <td>43.671459</td>\n",
       "      <td>-79.552492</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>93</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Islington Avenue</td>\n",
       "      <td>43.703909</td>\n",
       "      <td>-79.549880</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>94</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Cloverdale, Islington, Martin Grove, Princess ...</td>\n",
       "      <td>43.671459</td>\n",
       "      <td>-79.552492</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>95</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Bloordale Gardens, Eringate, Markland Wood, Ol...</td>\n",
       "      <td>43.671459</td>\n",
       "      <td>-79.552492</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>96</th>\n",
       "      <td>North York</td>\n",
       "      <td>Humber Summit</td>\n",
       "      <td>43.760078</td>\n",
       "      <td>-79.571760</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>97</th>\n",
       "      <td>North York</td>\n",
       "      <td>Emery, Humberlea</td>\n",
       "      <td>43.719268</td>\n",
       "      <td>-79.537142</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>98</th>\n",
       "      <td>York</td>\n",
       "      <td>Weston</td>\n",
       "      <td>43.689619</td>\n",
       "      <td>-79.479188</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>99</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Westmount</td>\n",
       "      <td>43.693640</td>\n",
       "      <td>-79.521043</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>100</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Kingsview Village, Martin Grove Gardens, Richv...</td>\n",
       "      <td>43.671459</td>\n",
       "      <td>-79.552492</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>101</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Albion Gardens, Beaumond Heights, Humbergate, ...</td>\n",
       "      <td>43.671459</td>\n",
       "      <td>-79.552492</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>102</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Northwest</td>\n",
       "      <td>43.671459</td>\n",
       "      <td>-79.552492</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>103 rows × 4 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "              Borough                                       Neighborhood  \\\n",
       "0         Scarborough                                     Rouge, Malvern   \n",
       "1         Scarborough             Highland Creek, Rouge Hill, Port Union   \n",
       "2         Scarborough                  Guildwood, Morningside, West Hill   \n",
       "3         Scarborough                                             Woburn   \n",
       "4         Scarborough                                          Cedarbrae   \n",
       "5         Scarborough                                Scarborough Village   \n",
       "6         Scarborough        East Birchmount Park, Ionview, Kennedy Park   \n",
       "7         Scarborough                    Clairlea, Golden Mile, Oakridge   \n",
       "8         Scarborough    Cliffcrest, Cliffside, Scarborough Village West   \n",
       "9         Scarborough                        Birch Cliff, Cliffside West   \n",
       "10        Scarborough  Dorset Park, Scarborough Town Centre, Wexford ...   \n",
       "11        Scarborough                                  Maryvale, Wexford   \n",
       "12        Scarborough                                          Agincourt   \n",
       "13        Scarborough            Clarks Corners, Sullivan, Tam O'Shanter   \n",
       "14        Scarborough  Agincourt North, L'Amoreaux East, Milliken, St...   \n",
       "15        Scarborough                                    L'Amoreaux West   \n",
       "16        Scarborough                                        Upper Rouge   \n",
       "17         North York                                  Hillcrest Village   \n",
       "18         North York                       Fairview, Henry Farm, Oriole   \n",
       "19         North York                                    Bayview Village   \n",
       "20         North York                           Silver Hills, York Mills   \n",
       "21         North York                            Newtonbrook, Willowdale   \n",
       "22         North York                                   Willowdale South   \n",
       "23         North York                                    York Mills West   \n",
       "24         North York                                    Willowdale West   \n",
       "25         North York                                          Parkwoods   \n",
       "26         North York                                    Don Mills North   \n",
       "27         North York                   Flemingdon Park, Don Mills South   \n",
       "28         North York    Bathurst Manor, Downsview North, Wilson Heights   \n",
       "29         North York                    Northwood Park, York University   \n",
       "..                ...                                                ...   \n",
       "73               York                                 Humewood-Cedarvale   \n",
       "74               York                                Caledonia-Fairbanks   \n",
       "75   Downtown Toronto                                           Christie   \n",
       "76       West Toronto                       Dovercourt Village, Dufferin   \n",
       "77       West Toronto                           Little Portugal, Trinity   \n",
       "78       West Toronto       Brockton, Exhibition Place, Parkdale Village   \n",
       "79         North York                 Downsview, North Park, Upwood Park   \n",
       "80               York     Del Ray, Keelesdale, Mount Dennis, Silverthorn   \n",
       "81               York                      The Junction North, Runnymede   \n",
       "82       West Toronto                      High Park, The Junction South   \n",
       "83       West Toronto                             Parkdale, Roncesvalles   \n",
       "84       West Toronto                                 Runnymede, Swansea   \n",
       "85       Queen's Park                                       Queen's Park   \n",
       "86        Mississauga              Canada Post Gateway Processing Centre   \n",
       "87       East Toronto  Business Reply Mail Processing Centre 969 Eastern   \n",
       "88          Etobicoke       Humber Bay Shores, Mimico South, New Toronto   \n",
       "89          Etobicoke                             Alderwood, Long Branch   \n",
       "90          Etobicoke      The Kingsway, Montgomery Road, Old Mill North   \n",
       "91          Etobicoke  Humber Bay, King's Mill Park, Kingsway Park So...   \n",
       "92          Etobicoke  Kingsway Park South West, Mimico NW, The Queen...   \n",
       "93          Etobicoke                                   Islington Avenue   \n",
       "94          Etobicoke  Cloverdale, Islington, Martin Grove, Princess ...   \n",
       "95          Etobicoke  Bloordale Gardens, Eringate, Markland Wood, Ol...   \n",
       "96         North York                                      Humber Summit   \n",
       "97         North York                                   Emery, Humberlea   \n",
       "98               York                                             Weston   \n",
       "99          Etobicoke                                          Westmount   \n",
       "100         Etobicoke  Kingsview Village, Martin Grove Gardens, Richv...   \n",
       "101         Etobicoke  Albion Gardens, Beaumond Heights, Humbergate, ...   \n",
       "102         Etobicoke                                          Northwest   \n",
       "\n",
       "      Latitude   Longitude  \n",
       "0    43.813464  -79.205981  \n",
       "1    54.284760   -0.409034  \n",
       "2    43.753480  -79.179995  \n",
       "3    43.759824  -79.225291  \n",
       "4    43.756467  -79.226692  \n",
       "5    43.743742  -79.211632  \n",
       "6    54.284760   -0.409034  \n",
       "7    54.284760   -0.409034  \n",
       "8    54.284760   -0.409034  \n",
       "9    54.284760   -0.409034  \n",
       "10   54.284760   -0.409034  \n",
       "11   43.759831  -79.296470  \n",
       "12   43.785353  -79.278549  \n",
       "13   54.284760   -0.409034  \n",
       "14   54.284760   -0.409034  \n",
       "15   43.799003  -79.305967  \n",
       "16   43.804930  -79.165837  \n",
       "17   43.799664  -79.365019  \n",
       "18   43.770817  -79.413300  \n",
       "19   43.769197  -79.376662  \n",
       "20   43.770817  -79.413300  \n",
       "21   43.793886  -79.425679  \n",
       "22   43.775356  -79.416686  \n",
       "23   43.744039  -79.406657  \n",
       "24   43.775356  -79.416686  \n",
       "25   43.761224  -79.323986  \n",
       "26   43.737178  -79.343451  \n",
       "27   43.770817  -79.413300  \n",
       "28   43.770817  -79.413300  \n",
       "29   43.770817  -79.413300  \n",
       "..         ...         ...  \n",
       "73   53.959055   -1.081536  \n",
       "74   53.959055   -1.081536  \n",
       "75   43.649991  -79.385722  \n",
       "76   43.658820  -79.435386  \n",
       "77   43.653963  -79.387207  \n",
       "78   43.653963  -79.387207  \n",
       "79   43.770817  -79.413300  \n",
       "80   53.959055   -1.081536  \n",
       "81   43.666157  -79.487769  \n",
       "82   43.653963  -79.387207  \n",
       "83   43.639846  -79.439646  \n",
       "84   43.651778  -79.475923  \n",
       "85  -32.007434  115.938736  \n",
       "86   43.590338  -79.645729  \n",
       "87   43.653963  -79.387207  \n",
       "88   43.671459  -79.552492  \n",
       "89   43.601717  -79.545232  \n",
       "90   43.671459  -79.552492  \n",
       "91   43.671459  -79.552492  \n",
       "92   43.671459  -79.552492  \n",
       "93   43.703909  -79.549880  \n",
       "94   43.671459  -79.552492  \n",
       "95   43.671459  -79.552492  \n",
       "96   43.760078  -79.571760  \n",
       "97   43.719268  -79.537142  \n",
       "98   43.689619  -79.479188  \n",
       "99   43.693640  -79.521043  \n",
       "100  43.671459  -79.552492  \n",
       "101  43.671459  -79.552492  \n",
       "102  43.671459  -79.552492  \n",
       "\n",
       "[103 rows x 4 columns]"
      ]
     },
     "execution_count": 29,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "neighborhoods = pd.DataFrame(columns=column_names)\n",
    "for index, row in df_temp.iterrows():\n",
    "    borough = row['Borough'] \n",
    "    neighborhood_name = row['Neighbourhood']\n",
    "    \n",
    "        \n",
    "    address = neighborhood_name+\", \"+borough\n",
    "    geolocator = Nominatim(user_agent=\"toro_explorer\")\n",
    "    n_location = geolocator.geocode(address)\n",
    "    try:\n",
    "        n_latitude = n_location.latitude\n",
    "        n_longitude = n_location.longitude\n",
    "    except:\n",
    "        address = borough\n",
    "        geolocator = Nominatim(user_agent=\"toro_explorer\")\n",
    "        n_location = geolocator.geocode(address)\n",
    "        n_latitude = n_location.latitude\n",
    "        n_longitude = n_location.longitude\n",
    "    #print('The geograpical coordinate of {} are {}, {}.'.format(address, n_latitude, n_longitude))\n",
    "    neighborhoods = neighborhoods.append({'Borough': borough,\n",
    "                                          'Neighborhood': neighborhood_name,\n",
    "                                          'Latitude': n_latitude,\n",
    "                                          'Longitude': n_longitude}, ignore_index=True)\n",
    "    \n",
    "neighborhoods.drop('Postalcode', axis=1, inplace=True)\n",
    "neighborhoods"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcgewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3IiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbNDMuNjUzOTYzLC03OS4zODcyMDddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JsZENvcHlKdW1wOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzcyY2U0NzE2ZDQ0ODRkMTY4ODZkNGI4MWEyZWIwODNmID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICAgICAgICAgICAgewogICJhdHRyaWJ1dGlvbiI6IG51bGwsCiAgImRldGVjdFJldGluYSI6IGZhbHNlLAogICJtYXhab29tIjogMTgsCiAgIm1pblpvb20iOiAxLAogICJub1dyYXAiOiBmYWxzZSwKICAic3ViZG9tYWlucyI6ICJhYmMiCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82MzA2OWZhNzViNDI0YjIzYTA0MmY5N2U0YTM1YTYzOSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjgxMzQ2NCwtNzkuMjA1OTgwOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xNzYwZjMwZDYwNTY0MDEyYTU3NTJjZTY1YzQ5YzJjOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83Y2I5Y2I4NTE3MDA0MWQ4YTlhNWM5MWEyZTEyMmJmYSA9ICQoJzxkaXYgaWQ9Imh0bWxfN2NiOWNiODUxNzAwNDFkOGE5YTVjOTFhMmUxMjJiZmEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvdWdlLCBNYWx2ZXJuLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTc2MGYzMGQ2MDU2NDAxMmE1NzUyY2U2NWM0OWMyYzkuc2V0Q29udGVudChodG1sXzdjYjljYjg1MTcwMDQxZDhhOWE1YzkxYTJlMTIyYmZhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzYzMDY5ZmE3NWI0MjRiMjNhMDQyZjk3ZTRhMzVhNjM5LmJpbmRQb3B1cChwb3B1cF8xNzYwZjMwZDYwNTY0MDEyYTU3NTJjZTY1YzQ5YzJjOSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mMmI5YzE5ZjgxNjg0YWQzYjg1ZjU2NmViOGU4MTE1NCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzU0LjI4NDc2MDEsLTAuNDA5MDMzOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85NjBlY2U4MjhkNTY0MmU0ODI0OWI2MWRjOWI5MjQ2NCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mMjU3NjRmMzUxYzk0ZGZjYjM5Mzk1NTQzMDdkNGE3ZCA9ICQoJzxkaXYgaWQ9Imh0bWxfZjI1NzY0ZjM1MWM5NGRmY2IzOTM5NTU0MzA3ZDRhN2QiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhpZ2hsYW5kIENyZWVrLCBSb3VnZSBIaWxsLCBQb3J0IFVuaW9uLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTYwZWNlODI4ZDU2NDJlNDgyNDliNjFkYzliOTI0NjQuc2V0Q29udGVudChodG1sX2YyNTc2NGYzNTFjOTRkZmNiMzkzOTU1NDMwN2Q0YTdkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2YyYjljMTlmODE2ODRhZDNiODVmNTY2ZWI4ZTgxMTU0LmJpbmRQb3B1cChwb3B1cF85NjBlY2U4MjhkNTY0MmU0ODI0OWI2MWRjOWI5MjQ2NCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lYTU2NzA2NjJlNGI0OWZlYTcyYjhlZTcyZDkxZGNmZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc1MzQ4MDQsLTc5LjE3OTk5NDldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNGZkOGI1OTdjMzEzNGIyZmEzZGNkY2U3YzhkNDFlMjQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOGZjZjU2ZjVhZmEyNDllNWFiYjM3ZTY5NjcyNTgyY2UgPSAkKCc8ZGl2IGlkPSJodG1sXzhmY2Y1NmY1YWZhMjQ5ZTVhYmIzN2U2OTY3MjU4MmNlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HdWlsZHdvb2QsIE1vcm5pbmdzaWRlLCBXZXN0IEhpbGwsIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80ZmQ4YjU5N2MzMTM0YjJmYTNkY2RjZTdjOGQ0MWUyNC5zZXRDb250ZW50KGh0bWxfOGZjZjU2ZjVhZmEyNDllNWFiYjM3ZTY5NjcyNTgyY2UpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZWE1NjcwNjYyZTRiNDlmZWE3MmI4ZWU3MmQ5MWRjZmQuYmluZFBvcHVwKHBvcHVwXzRmZDhiNTk3YzMxMzRiMmZhM2RjZGNlN2M4ZDQxZTI0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2UwYjIyYWM3Y2M3ZTRmMTRiNzQzMmQzZjdmMzVjNjZmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU5ODI0MywtNzkuMjI1MjkwOF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81OTMyMWFiZjU5NmY0NjJiOTQ4ZGY5NGM2YjE3ZDJmYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lZjE1ZmI2MzFkZjk0MjI4YWFhMGEyZWY5NTg5NWU3NiA9ICQoJzxkaXYgaWQ9Imh0bWxfZWYxNWZiNjMxZGY5NDIyOGFhYTBhMmVmOTU4OTVlNzYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldvYnVybiwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzU5MzIxYWJmNTk2ZjQ2MmI5NDhkZjk0YzZiMTdkMmZhLnNldENvbnRlbnQoaHRtbF9lZjE1ZmI2MzFkZjk0MjI4YWFhMGEyZWY5NTg5NWU3Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lMGIyMmFjN2NjN2U0ZjE0Yjc0MzJkM2Y3ZjM1YzY2Zi5iaW5kUG9wdXAocG9wdXBfNTkzMjFhYmY1OTZmNDYyYjk0OGRmOTRjNmIxN2QyZmEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNWJhOTA1OGE0MDgyNDNlZmFjMTllNDk4NTQ4NTYwMWQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NTY0NjY1NSwtNzkuMjI2NjkyNDQyNTg4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2YwMTVjOTBkMWI5OTQ2YThiYjE5ZWQ4YWRjM2RlNzI4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q2YWEyZTg3ZjAxMjQ0NTJhOWQwZmExMzQ5ODhlNDljID0gJCgnPGRpdiBpZD0iaHRtbF9kNmFhMmU4N2YwMTI0NDUyYTlkMGZhMTM0OTg4ZTQ5YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2VkYXJicmFlLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjAxNWM5MGQxYjk5NDZhOGJiMTllZDhhZGMzZGU3Mjguc2V0Q29udGVudChodG1sX2Q2YWEyZTg3ZjAxMjQ0NTJhOWQwZmExMzQ5ODhlNDljKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzViYTkwNThhNDA4MjQzZWZhYzE5ZTQ5ODU0ODU2MDFkLmJpbmRQb3B1cChwb3B1cF9mMDE1YzkwZDFiOTk0NmE4YmIxOWVkOGFkYzNkZTcyOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iYjRhOGY4ZDczODc0MzUwOWUwODAxYTgxZjMwN2U1OSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc0Mzc0MjIsLTc5LjIxMTYzMjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfODZmYTRlYWI4YjA2NDM4MjgwY2RlMDBkZjZlOGY4N2QgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmI2NjQ1ZmJiM2Q1NDI1ZTk5NjhiNDczNWE3ODdhODkgPSAkKCc8ZGl2IGlkPSJodG1sXzZiNjY0NWZiYjNkNTQyNWU5OTY4YjQ3MzVhNzg3YTg5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TY2FyYm9yb3VnaCBWaWxsYWdlLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODZmYTRlYWI4YjA2NDM4MjgwY2RlMDBkZjZlOGY4N2Quc2V0Q29udGVudChodG1sXzZiNjY0NWZiYjNkNTQyNWU5OTY4YjQ3MzVhNzg3YTg5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2JiNGE4ZjhkNzM4NzQzNTA5ZTA4MDFhODFmMzA3ZTU5LmJpbmRQb3B1cChwb3B1cF84NmZhNGVhYjhiMDY0MzgyODBjZGUwMGRmNmU4Zjg3ZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iMjE1OTQ4NzkzYjg0ZTQzOGExZDIwOTE0MjI1MjAwNyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzU0LjI4NDc2MDEsLTAuNDA5MDMzOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMjJlOGIxYjUzNDI0ZjRmYjU4ZGE4YTRkYzI3N2VlYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kMjMxZDQ3OTIzMWQ0MjQ2YjE3NjY3YmZhYWZiNjM3MSA9ICQoJzxkaXYgaWQ9Imh0bWxfZDIzMWQ0NzkyMzFkNDI0NmIxNzY2N2JmYWFmYjYzNzEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkVhc3QgQmlyY2htb3VudCBQYXJrLCBJb252aWV3LCBLZW5uZWR5IFBhcmssIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kMjJlOGIxYjUzNDI0ZjRmYjU4ZGE4YTRkYzI3N2VlYS5zZXRDb250ZW50KGh0bWxfZDIzMWQ0NzkyMzFkNDI0NmIxNzY2N2JmYWFmYjYzNzEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjIxNTk0ODc5M2I4NGU0MzhhMWQyMDkxNDIyNTIwMDcuYmluZFBvcHVwKHBvcHVwX2QyMmU4YjFiNTM0MjRmNGZiNThkYThhNGRjMjc3ZWVhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzAzMjAwZTUxNTU2NjQ1YmQ5NmM5YTRiYjk0MzRmMDMzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNTQuMjg0NzYwMSwtMC40MDkwMzM5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2IwOWU0ZDgxM2U2OTQwNWJhZjc2YTQ0ZmI5ZjNhNmE5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzZkZDhmNzkxN2Q1OTQ0MjI5OTA0ZGJkZWYyY2I1NjAzID0gJCgnPGRpdiBpZD0iaHRtbF82ZGQ4Zjc5MTdkNTk0NDIyOTkwNGRiZGVmMmNiNTYwMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2xhaXJsZWEsIEdvbGRlbiBNaWxlLCBPYWtyaWRnZSwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2IwOWU0ZDgxM2U2OTQwNWJhZjc2YTQ0ZmI5ZjNhNmE5LnNldENvbnRlbnQoaHRtbF82ZGQ4Zjc5MTdkNTk0NDIyOTkwNGRiZGVmMmNiNTYwMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wMzIwMGU1MTU1NjY0NWJkOTZjOWE0YmI5NDM0ZjAzMy5iaW5kUG9wdXAocG9wdXBfYjA5ZTRkODEzZTY5NDA1YmFmNzZhNDRmYjlmM2E2YTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzRjZjNjOWY0ODZmNDBkNDlhZTc1MjRhNGViMmRjZTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjRhYzhkZWE5M2FkNDU2ZTllZDJjNWIxMTc2MzY0Y2IgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODVhZTgxOWZjZWMwNGNiMjhmYzgwMjljZDgxYTQ3MDggPSAkKCc8ZGl2IGlkPSJodG1sXzg1YWU4MTlmY2VjMDRjYjI4ZmM4MDI5Y2Q4MWE0NzA4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DbGlmZmNyZXN0LCBDbGlmZnNpZGUsIFNjYXJib3JvdWdoIFZpbGxhZ2UgV2VzdCwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY0YWM4ZGVhOTNhZDQ1NmU5ZWQyYzViMTE3NjM2NGNiLnNldENvbnRlbnQoaHRtbF84NWFlODE5ZmNlYzA0Y2IyOGZjODAyOWNkODFhNDcwOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jNGNmM2M5ZjQ4NmY0MGQ0OWFlNzUyNGE0ZWIyZGNlOS5iaW5kUG9wdXAocG9wdXBfNjRhYzhkZWE5M2FkNDU2ZTllZDJjNWIxMTc2MzY0Y2IpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDhkZDJjYzFiMDcxNGQyNmE2OWVkNGMwOGY3N2E1NzAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTc3NWQwZGU4YzFlNDY0MTk2M2YxMTlhMTEyNzc0ZjQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMWRhNzMzMjliMjE2NDQzY2I5MzljM2FmMGVkYmQ2ZTkgPSAkKCc8ZGl2IGlkPSJodG1sXzFkYTczMzI5YjIxNjQ0M2NiOTM5YzNhZjBlZGJkNmU5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CaXJjaCBDbGlmZiwgQ2xpZmZzaWRlIFdlc3QsIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81Nzc1ZDBkZThjMWU0NjQxOTYzZjExOWExMTI3NzRmNC5zZXRDb250ZW50KGh0bWxfMWRhNzMzMjliMjE2NDQzY2I5MzljM2FmMGVkYmQ2ZTkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDhkZDJjYzFiMDcxNGQyNmE2OWVkNGMwOGY3N2E1NzAuYmluZFBvcHVwKHBvcHVwXzU3NzVkMGRlOGMxZTQ2NDE5NjNmMTE5YTExMjc3NGY0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzIyNjNjM2Q1ZTYzZDRjMmQ5NmNmMzBkNzRhYTE1NjdiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNTQuMjg0NzYwMSwtMC40MDkwMzM5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Q5Y2I1ZjlkZGEwZDQ1OThiMzVhYzNlMjgwNGNjYmJiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I1NjY0NGFjZTg5ZTQ5Y2I4YjJiOGVkMWM5MmViMDcyID0gJCgnPGRpdiBpZD0iaHRtbF9iNTY2NDRhY2U4OWU0OWNiOGIyYjhlZDFjOTJlYjA3MiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RG9yc2V0IFBhcmssIFNjYXJib3JvdWdoIFRvd24gQ2VudHJlLCBXZXhmb3JkIEhlaWdodHMsIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kOWNiNWY5ZGRhMGQ0NTk4YjM1YWMzZTI4MDRjY2JiYi5zZXRDb250ZW50KGh0bWxfYjU2NjQ0YWNlODllNDljYjhiMmI4ZWQxYzkyZWIwNzIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMjI2M2MzZDVlNjNkNGMyZDk2Y2YzMGQ3NGFhMTU2N2IuYmluZFBvcHVwKHBvcHVwX2Q5Y2I1ZjlkZGEwZDQ1OThiMzVhYzNlMjgwNGNjYmJiKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2I2ODA1YzVhN2JlYzQ5NTY5MDg5OGYzN2NmMzgxMDFiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU5ODMwNiwtNzkuMjk2NDcwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jMmZiOGEwNzAwNzc0MmQ1ODYxMDE5MjhhYjBhYjZhNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kYWU5MmZlNWQ0NDM0NGQ0YTQ5OWZkY2NjYzRhMGZlNyA9ICQoJzxkaXYgaWQ9Imh0bWxfZGFlOTJmZTVkNDQzNDRkNGE0OTlmZGNjY2M0YTBmZTciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1hcnl2YWxlLCBXZXhmb3JkLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzJmYjhhMDcwMDc3NDJkNTg2MTAxOTI4YWIwYWI2YTQuc2V0Q29udGVudChodG1sX2RhZTkyZmU1ZDQ0MzQ0ZDRhNDk5ZmRjY2NjNGEwZmU3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2I2ODA1YzVhN2JlYzQ5NTY5MDg5OGYzN2NmMzgxMDFiLmJpbmRQb3B1cChwb3B1cF9jMmZiOGEwNzAwNzc0MmQ1ODYxMDE5MjhhYjBhYjZhNCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hMTk5ZDkzMDI3Y2E0ODljOTFlMjU5ODM3NmFkNzM5OSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc4NTM1MzEsLTc5LjI3ODU0OTRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjVlOGEzZWI1ODFiNDBlNmFlNmJkNmE0Yzc2NmNhNWQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMWIyOTI5NmU1Yjk1NDNiNzljOTA4NmIzOWVkNDI3MmQgPSAkKCc8ZGl2IGlkPSJodG1sXzFiMjkyOTZlNWI5NTQzYjc5YzkwODZiMzllZDQyNzJkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BZ2luY291cnQsIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iNWU4YTNlYjU4MWI0MGU2YWU2YmQ2YTRjNzY2Y2E1ZC5zZXRDb250ZW50KGh0bWxfMWIyOTI5NmU1Yjk1NDNiNzljOTA4NmIzOWVkNDI3MmQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTE5OWQ5MzAyN2NhNDg5YzkxZTI1OTgzNzZhZDczOTkuYmluZFBvcHVwKHBvcHVwX2I1ZThhM2ViNTgxYjQwZTZhZTZiZDZhNGM3NjZjYTVkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI1NTVjZDczNGZlZjQyMDVhN2Y4ZTNmNGYyZmRjYTIyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNTQuMjg0NzYwMSwtMC40MDkwMzM5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzhmNDdiN2E4MzkzNzQ1MTQ5MGEyNDViMTc1ZjlkOGM0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2M3ZjNjMDEwYjdmNTQxYjdiYWVlZWJlY2NlNDc3M2RmID0gJCgnPGRpdiBpZD0iaHRtbF9jN2YzYzAxMGI3ZjU0MWI3YmFlZWViZWNjZTQ3NzNkZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2xhcmtzIENvcm5lcnMsIFN1bGxpdmFuLCBUYW0gTyYjMzk7U2hhbnRlciwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzhmNDdiN2E4MzkzNzQ1MTQ5MGEyNDViMTc1ZjlkOGM0LnNldENvbnRlbnQoaHRtbF9jN2YzYzAxMGI3ZjU0MWI3YmFlZWViZWNjZTQ3NzNkZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yNTU1Y2Q3MzRmZWY0MjA1YTdmOGUzZjRmMmZkY2EyMi5iaW5kUG9wdXAocG9wdXBfOGY0N2I3YTgzOTM3NDUxNDkwYTI0NWIxNzVmOWQ4YzQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTZlMzkyMjYxMTk4NDEwMWFiMmRhZjkwM2E5ZDE3YzEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTlhMzkzNzBjMDhhNDIxNzhiYzExNzg4ZGFmYWNlOGQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzk1MjU2M2MzMTA4NDlkZGJhNzE0ZjZlNjU3YWEwYTggPSAkKCc8ZGl2IGlkPSJodG1sXzM5NTI1NjNjMzEwODQ5ZGRiYTcxNGY2ZTY1N2FhMGE4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BZ2luY291cnQgTm9ydGgsIEwmIzM5O0Ftb3JlYXV4IEVhc3QsIE1pbGxpa2VuLCBTdGVlbGVzIEVhc3QsIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xOWEzOTM3MGMwOGE0MjE3OGJjMTE3ODhkYWZhY2U4ZC5zZXRDb250ZW50KGh0bWxfMzk1MjU2M2MzMTA4NDlkZGJhNzE0ZjZlNjU3YWEwYTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTZlMzkyMjYxMTk4NDEwMWFiMmRhZjkwM2E5ZDE3YzEuYmluZFBvcHVwKHBvcHVwXzE5YTM5MzcwYzA4YTQyMTc4YmMxMTc4OGRhZmFjZThkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzg4ZTcwNjY3OWYzMzRjYTBhYjFlMWQ5NzUzMjZlMzU0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzk5MDAzLC03OS4zMDU5NjY5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzVkYjA0N2ZjMTFkNTRiNzE5Mjk5MGE3MGMyMmU0ZGJlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JkODQ2MTM0YjczNzQ1NTE4M2IwOTI3Y2JiY2NhZDY5ID0gJCgnPGRpdiBpZD0iaHRtbF9iZDg0NjEzNGI3Mzc0NTUxODNiMDkyN2NiYmNjYWQ2OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TCYjMzk7QW1vcmVhdXggV2VzdCwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzVkYjA0N2ZjMTFkNTRiNzE5Mjk5MGE3MGMyMmU0ZGJlLnNldENvbnRlbnQoaHRtbF9iZDg0NjEzNGI3Mzc0NTUxODNiMDkyN2NiYmNjYWQ2OSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84OGU3MDY2NzlmMzM0Y2EwYWIxZTFkOTc1MzI2ZTM1NC5iaW5kUG9wdXAocG9wdXBfNWRiMDQ3ZmMxMWQ1NGI3MTkyOTkwYTcwYzIyZTRkYmUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDRkYjAwZmUwNDUyNDA4NDhhZjk3MTZiZTFhYmIwY2MgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My44MDQ5MzA0LC03OS4xNjU4Mzc0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M4ZGFkYWFkOGNlNzQ0ZmJiMzIzNjBhODdmZDUzMGU5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NmOWYwODJhYTNjMDQwY2E4NGJlZTBiNDlkOGRjNmNjID0gJCgnPGRpdiBpZD0iaHRtbF9jZjlmMDgyYWEzYzA0MGNhODRiZWUwYjQ5ZDhkYzZjYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VXBwZXIgUm91Z2UsIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jOGRhZGFhZDhjZTc0NGZiYjMyMzYwYTg3ZmQ1MzBlOS5zZXRDb250ZW50KGh0bWxfY2Y5ZjA4MmFhM2MwNDBjYTg0YmVlMGI0OWQ4ZGM2Y2MpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDRkYjAwZmUwNDUyNDA4NDhhZjk3MTZiZTFhYmIwY2MuYmluZFBvcHVwKHBvcHVwX2M4ZGFkYWFkOGNlNzQ0ZmJiMzIzNjBhODdmZDUzMGU5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2UyZDIwZTlhMDhiZTQ1NDg5ZDZjYmRhNDQ5OGMyYjIzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzk5NjYzNywtNzkuMzY1MDE4OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yYWU5OTQ2MDNiODU0NWY3OTAxMjUyNjNiMjc1NzFhYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xYTQ5ZjVjMjExZTM0YjY2ODk1YTY5MDhlODY2YWIzNiA9ICQoJzxkaXYgaWQ9Imh0bWxfMWE0OWY1YzIxMWUzNGI2Njg5NWE2OTA4ZTg2NmFiMzYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhpbGxjcmVzdCBWaWxsYWdlLCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yYWU5OTQ2MDNiODU0NWY3OTAxMjUyNjNiMjc1NzFhYS5zZXRDb250ZW50KGh0bWxfMWE0OWY1YzIxMWUzNGI2Njg5NWE2OTA4ZTg2NmFiMzYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTJkMjBlOWEwOGJlNDU0ODlkNmNiZGE0NDk4YzJiMjMuYmluZFBvcHVwKHBvcHVwXzJhZTk5NDYwM2I4NTQ1Zjc5MDEyNTI2M2IyNzU3MWFhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzE5OGZhMDI4YWM2NzQ3NTI4YjRhYjBlOTBlZjU3OTE4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzcwODE3NSwtNzkuNDEzMjk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iYWRmNTdlZjM4ZmM0MzNjYTVmYzdhNGU2MzQ2YzQ4OCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zNzA5YmI1MDc1MmU0NGUzOGE5NTJmNTFiOTQxMWM1MCA9ICQoJzxkaXYgaWQ9Imh0bWxfMzcwOWJiNTA3NTJlNDRlMzhhOTUyZjUxYjk0MTFjNTAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZhaXJ2aWV3LCBIZW5yeSBGYXJtLCBPcmlvbGUsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2JhZGY1N2VmMzhmYzQzM2NhNWZjN2E0ZTYzNDZjNDg4LnNldENvbnRlbnQoaHRtbF8zNzA5YmI1MDc1MmU0NGUzOGE5NTJmNTFiOTQxMWM1MCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xOThmYTAyOGFjNjc0NzUyOGI0YWIwZTkwZWY1NzkxOC5iaW5kUG9wdXAocG9wdXBfYmFkZjU3ZWYzOGZjNDMzY2E1ZmM3YTRlNjM0NmM0ODgpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzM1OTBhMDM1ODFlNGY5MGEyODczMDQ5MTA5ZjNmNGYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NjkxOTY2LC03OS4zNzY2NjE3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzE0MGQ1YmZkZGI2YTQ4ZmU4YWM5ZTRmNjJkNTE2MDViID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzdkNjdhOWRkOTJiNDQ3OTk5MjcxNGEyZDg3ZGJhMDFjID0gJCgnPGRpdiBpZD0iaHRtbF83ZDY3YTlkZDkyYjQ0Nzk5OTI3MTRhMmQ4N2RiYTAxYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmF5dmlldyBWaWxsYWdlLCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xNDBkNWJmZGRiNmE0OGZlOGFjOWU0ZjYyZDUxNjA1Yi5zZXRDb250ZW50KGh0bWxfN2Q2N2E5ZGQ5MmI0NDc5OTkyNzE0YTJkODdkYmEwMWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzM1OTBhMDM1ODFlNGY5MGEyODczMDQ5MTA5ZjNmNGYuYmluZFBvcHVwKHBvcHVwXzE0MGQ1YmZkZGI2YTQ4ZmU4YWM5ZTRmNjJkNTE2MDViKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzc3OThmMWQ0ZmI2MjRjNzk5YmU2Y2RiNGNlOTMyMzQwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzcwODE3NSwtNzkuNDEzMjk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xZjUxNjMyNDIzNGE0YjllOWJiOTNmNWNjMzVmZmExMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jNWUyOTVlMzJiMGQ0OWIwYjg0MmVmZWVjN2YxNDUyZSA9ICQoJzxkaXYgaWQ9Imh0bWxfYzVlMjk1ZTMyYjBkNDliMGI4NDJlZmVlYzdmMTQ1MmUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNpbHZlciBIaWxscywgWW9yayBNaWxscywgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMWY1MTYzMjQyMzRhNGI5ZTliYjkzZjVjYzM1ZmZhMTAuc2V0Q29udGVudChodG1sX2M1ZTI5NWUzMmIwZDQ5YjBiODQyZWZlZWM3ZjE0NTJlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzc3OThmMWQ0ZmI2MjRjNzk5YmU2Y2RiNGNlOTMyMzQwLmJpbmRQb3B1cChwb3B1cF8xZjUxNjMyNDIzNGE0YjllOWJiOTNmNWNjMzVmZmExMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83ODA3NzA4MzMxZGI0NmUxYmY2NmE4ZTY5NmEzZDViOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc5Mzg4NjMsLTc5LjQyNTY3OTAyMzAxMDVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYmMxM2YxNjljN2EzNDExMWI5YzE5NjM3Nzk2Mzg4ZTAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMWJjM2E0NDFjOTI4NGJhMzk0ZjkxM2NjOWYyN2RmMjQgPSAkKCc8ZGl2IGlkPSJodG1sXzFiYzNhNDQxYzkyODRiYTM5NGY5MTNjYzlmMjdkZjI0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5OZXd0b25icm9vaywgV2lsbG93ZGFsZSwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYmMxM2YxNjljN2EzNDExMWI5YzE5NjM3Nzk2Mzg4ZTAuc2V0Q29udGVudChodG1sXzFiYzNhNDQxYzkyODRiYTM5NGY5MTNjYzlmMjdkZjI0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzc4MDc3MDgzMzFkYjQ2ZTFiZjY2YThlNjk2YTNkNWI4LmJpbmRQb3B1cChwb3B1cF9iYzEzZjE2OWM3YTM0MTExYjljMTk2Mzc3OTYzODhlMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81NmYyMzJhZjJjMmI0MjU0OTU5ZmYyMjNjOTdkNTk4ZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc3NTM1NTgsLTc5LjQxNjY4NTk4MjM5MjZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTllYTZjNmM1OWJjNGFhYjg2YTgxM2NkMTg0MjdmODQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzFkMzY1MzM5NjhlNGY0ZmI0ZTE2ZGEwMDZjOTAxODIgPSAkKCc8ZGl2IGlkPSJodG1sXzcxZDM2NTMzOTY4ZTRmNGZiNGUxNmRhMDA2YzkwMTgyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XaWxsb3dkYWxlIFNvdXRoLCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hOWVhNmM2YzU5YmM0YWFiODZhODEzY2QxODQyN2Y4NC5zZXRDb250ZW50KGh0bWxfNzFkMzY1MzM5NjhlNGY0ZmI0ZTE2ZGEwMDZjOTAxODIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNTZmMjMyYWYyYzJiNDI1NDk1OWZmMjIzYzk3ZDU5OGUuYmluZFBvcHVwKHBvcHVwX2E5ZWE2YzZjNTliYzRhYWI4NmE4MTNjZDE4NDI3Zjg0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ViNjE3M2Q5ZDYyMjRhODc4MjYyOGJjYzg1NGExM2ZjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzQ0MDM5MSwtNzkuNDA2NjU3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2E4OWUxZTA1NDk3MzRmMjM4MDZiZDQzMDM2MWYxMDViID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2MzYWEyZGQ3ZWQyZDRlZjQ4ZGE0ZGQ3OTQzOTdjNGIyID0gJCgnPGRpdiBpZD0iaHRtbF9jM2FhMmRkN2VkMmQ0ZWY0OGRhNGRkNzk0Mzk3YzRiMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+WW9yayBNaWxscyBXZXN0LCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hODllMWUwNTQ5NzM0ZjIzODA2YmQ0MzAzNjFmMTA1Yi5zZXRDb250ZW50KGh0bWxfYzNhYTJkZDdlZDJkNGVmNDhkYTRkZDc5NDM5N2M0YjIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZWI2MTczZDlkNjIyNGE4NzgyNjI4YmNjODU0YTEzZmMuYmluZFBvcHVwKHBvcHVwX2E4OWUxZTA1NDk3MzRmMjM4MDZiZDQzMDM2MWYxMDViKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzA4MGZmMWRhMGY5ZTRhZDFhMWY3NDg3MTc2YmZkNTdlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzc1MzU1OCwtNzkuNDE2Njg1OTgyMzkyNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wYzE5YzY4OTkyZDA0YmRlOWExYjFlNTZlMDllNmY0ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wMzg0OTAyOGI2MGQ0ZTg1YWY5Y2M2NzU4ZWE5ZTY1YiA9ICQoJzxkaXYgaWQ9Imh0bWxfMDM4NDkwMjhiNjBkNGU4NWFmOWNjNjc1OGVhOWU2NWIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldpbGxvd2RhbGUgV2VzdCwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGMxOWM2ODk5MmQwNGJkZTlhMWIxZTU2ZTA5ZTZmNGUuc2V0Q29udGVudChodG1sXzAzODQ5MDI4YjYwZDRlODVhZjljYzY3NThlYTllNjViKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzA4MGZmMWRhMGY5ZTRhZDFhMWY3NDg3MTc2YmZkNTdlLmJpbmRQb3B1cChwb3B1cF8wYzE5YzY4OTkyZDA0YmRlOWExYjFlNTZlMDllNmY0ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84YjhiN2NmM2ZhZDI0MDVkOTY3YzdjMTA5ZWJjYmU1YyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc2MTIyMzksLTc5LjMyMzk4NTddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTg5Y2VkMjIxMmVkNDQ0Njk0ZGVlNDMzN2I5ZTFjODcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZWY2Nzg2ZmQxNjIzNDUwYjgwY2E2MGM2NzU1ZTAwMmMgPSAkKCc8ZGl2IGlkPSJodG1sX2VmNjc4NmZkMTYyMzQ1MGI4MGNhNjBjNjc1NWUwMDJjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QYXJrd29vZHMsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzU4OWNlZDIyMTJlZDQ0NDY5NGRlZTQzMzdiOWUxYzg3LnNldENvbnRlbnQoaHRtbF9lZjY3ODZmZDE2MjM0NTBiODBjYTYwYzY3NTVlMDAyYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84YjhiN2NmM2ZhZDI0MDVkOTY3YzdjMTA5ZWJjYmU1Yy5iaW5kUG9wdXAocG9wdXBfNTg5Y2VkMjIxMmVkNDQ0Njk0ZGVlNDMzN2I5ZTFjODcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzc5NzQyNzg0NTQ5NGU5Yjg3NzBkYjU4YTBkYjZlNDAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MzcxNzgsLTc5LjM0MzQ1MTRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNWU0YjAzYzBjNzI1NGZhOTg3MTg4YmJmZDNiMzZiNjYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODk2OTM0YTNlYzRhNDQ5Yzg5OTBiMmE3MmU4YmRjZGMgPSAkKCc8ZGl2IGlkPSJodG1sXzg5NjkzNGEzZWM0YTQ0OWM4OTkwYjJhNzJlOGJkY2RjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Eb24gTWlsbHMgTm9ydGgsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzVlNGIwM2MwYzcyNTRmYTk4NzE4OGJiZmQzYjM2YjY2LnNldENvbnRlbnQoaHRtbF84OTY5MzRhM2VjNGE0NDljODk5MGIyYTcyZThiZGNkYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jNzk3NDI3ODQ1NDk0ZTliODc3MGRiNThhMGRiNmU0MC5iaW5kUG9wdXAocG9wdXBfNWU0YjAzYzBjNzI1NGZhOTg3MTg4YmJmZDNiMzZiNjYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMmNmZjM5MjM1ZDkwNGQ1MjllYmI4ZGVlODg1OWQxNDIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NzA4MTc1LC03OS40MTMyOTk4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzMwMTY4Y2VjMDM2YzRlZDk4NWJjYzQ2MzdmYTIyMjRiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzMwMzZkOTMzNDY5OTQ4OThiOTFhMDNmY2Y2NjllMDU5ID0gJCgnPGRpdiBpZD0iaHRtbF8zMDM2ZDkzMzQ2OTk0ODk4YjkxYTAzZmNmNjY5ZTA1OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RmxlbWluZ2RvbiBQYXJrLCBEb24gTWlsbHMgU291dGgsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzMwMTY4Y2VjMDM2YzRlZDk4NWJjYzQ2MzdmYTIyMjRiLnNldENvbnRlbnQoaHRtbF8zMDM2ZDkzMzQ2OTk0ODk4YjkxYTAzZmNmNjY5ZTA1OSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yY2ZmMzkyMzVkOTA0ZDUyOWViYjhkZWU4ODU5ZDE0Mi5iaW5kUG9wdXAocG9wdXBfMzAxNjhjZWMwMzZjNGVkOTg1YmNjNDYzN2ZhMjIyNGIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNmYxZTQ2Y2JmNDRiNDgyMGE1Zjk4NTVjYzlhOTBhMzkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NzA4MTc1LC03OS40MTMyOTk4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzA0NGNmNzdkOGY3ODRhOTk5YmNkMmUxYmIxN2IzZjlmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JmZGJiYTQzMDUxNzRjZTNhOWU1YTQzY2RiNWRhYTk1ID0gJCgnPGRpdiBpZD0iaHRtbF9iZmRiYmE0MzA1MTc0Y2UzYTllNWE0M2NkYjVkYWE5NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmF0aHVyc3QgTWFub3IsIERvd25zdmlldyBOb3J0aCwgV2lsc29uIEhlaWdodHMsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzA0NGNmNzdkOGY3ODRhOTk5YmNkMmUxYmIxN2IzZjlmLnNldENvbnRlbnQoaHRtbF9iZmRiYmE0MzA1MTc0Y2UzYTllNWE0M2NkYjVkYWE5NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82ZjFlNDZjYmY0NGI0ODIwYTVmOTg1NWNjOWE5MGEzOS5iaW5kUG9wdXAocG9wdXBfMDQ0Y2Y3N2Q4Zjc4NGE5OTliY2QyZTFiYjE3YjNmOWYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTRkMTYxMDM0YjU2NDFjOWJkOTY2MWQzZWZiYTFlMWQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NzA4MTc1LC03OS40MTMyOTk4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzhmYmI3NjM5NzA5NDRlMTdhMTY5ZmIzYTQ0ZWY5MTM4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzBjODkwY2UyMzQ3ZTRkZjM5Y2U3ZDM3OTEyYmI4NGZjID0gJCgnPGRpdiBpZD0iaHRtbF8wYzg5MGNlMjM0N2U0ZGYzOWNlN2QzNzkxMmJiODRmYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Tm9ydGh3b29kIFBhcmssIFlvcmsgVW5pdmVyc2l0eSwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGZiYjc2Mzk3MDk0NGUxN2ExNjlmYjNhNDRlZjkxMzguc2V0Q29udGVudChodG1sXzBjODkwY2UyMzQ3ZTRkZjM5Y2U3ZDM3OTEyYmI4NGZjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzE0ZDE2MTAzNGI1NjQxYzliZDk2NjFkM2VmYmExZTFkLmJpbmRQb3B1cChwb3B1cF84ZmJiNzYzOTcwOTQ0ZTE3YTE2OWZiM2E0NGVmOTEzOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yN2E0NjdhOGQ0MmI0ZDdhYmY3NmVlMzU5OTkwOTk3OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc3MDgxNzUsLTc5LjQxMzI5OThdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTVhZmYxMWU3NWY5NDQ4Mjk1NWU0NTBjYzZmNjZlMjQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTc1MmE3OWE1NjQyNGJhNjg1NmQ4OTExZDQ1ZGZlM2IgPSAkKCc8ZGl2IGlkPSJodG1sXzU3NTJhNzlhNTY0MjRiYTY4NTZkODkxMWQ0NWRmZTNiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DRkIgVG9yb250bywgRG93bnN2aWV3IEVhc3QsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzE1YWZmMTFlNzVmOTQ0ODI5NTVlNDUwY2M2ZjY2ZTI0LnNldENvbnRlbnQoaHRtbF81NzUyYTc5YTU2NDI0YmE2ODU2ZDg5MTFkNDVkZmUzYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yN2E0NjdhOGQ0MmI0ZDdhYmY3NmVlMzU5OTkwOTk3OC5iaW5kUG9wdXAocG9wdXBfMTVhZmYxMWU3NWY5NDQ4Mjk1NWU0NTBjYzZmNjZlMjQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDAxOGQyMWQ5MWMzNDE4NGIwY2QxOTRjYjM3MTg4M2YgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NDkyOTg4LC03OS40NjIyNDhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGE3NTQyM2Q3YjQ3NGY1Mjg3Njg4NjI5MzhjNDE0MDYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMWEyODRlZGM2YWM1NGI2ZWJiZTk5Njk4Mzc3ZTkyNjcgPSAkKCc8ZGl2IGlkPSJodG1sXzFhMjg0ZWRjNmFjNTRiNmViYmU5OTY5ODM3N2U5MjY3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Eb3duc3ZpZXcgV2VzdCwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGE3NTQyM2Q3YjQ3NGY1Mjg3Njg4NjI5MzhjNDE0MDYuc2V0Q29udGVudChodG1sXzFhMjg0ZWRjNmFjNTRiNmViYmU5OTY5ODM3N2U5MjY3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2QwMThkMjFkOTFjMzQxODRiMGNkMTk0Y2IzNzE4ODNmLmJpbmRQb3B1cChwb3B1cF8wYTc1NDIzZDdiNDc0ZjUyODc2ODg2MjkzOGM0MTQwNik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81YjgzOWJmMGEwYzA0NmRmOGNmNjY4NjNhNGQyZDhkMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc0OTI5ODgsLTc5LjQ2MjI0OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iNTM3ZDRhMjdiN2Y0MDk3YTE2YTBkZjU1ZDdiYWE1NSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yZDFlMTA2ZGNiMDE0MGE0YWRiYTQxYTc2Zjg4OTAxZiA9ICQoJzxkaXYgaWQ9Imh0bWxfMmQxZTEwNmRjYjAxNDBhNGFkYmE0MWE3NmY4ODkwMWYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvd25zdmlldyBDZW50cmFsLCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iNTM3ZDRhMjdiN2Y0MDk3YTE2YTBkZjU1ZDdiYWE1NS5zZXRDb250ZW50KGh0bWxfMmQxZTEwNmRjYjAxNDBhNGFkYmE0MWE3NmY4ODkwMWYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNWI4MzliZjBhMGMwNDZkZjhjZjY2ODYzYTRkMmQ4ZDEuYmluZFBvcHVwKHBvcHVwX2I1MzdkNGEyN2I3ZjQwOTdhMTZhMGRmNTVkN2JhYTU1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzc1NDNiZDY3OGE3YTQ1OWNiNzNiZDZlMzNkMGRiNmE1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzQ5Mjk4OCwtNzkuNDYyMjQ4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzY3YmQ4YTg3MDc0ODRlMzQ4ZDViZjI3MzJjMGY3NzFhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I1OTRjMjQyZjNiNTRlM2E4YWZhMTgyYWI1MGYzMmVhID0gJCgnPGRpdiBpZD0iaHRtbF9iNTk0YzI0MmYzYjU0ZTNhOGFmYTE4MmFiNTBmMzJlYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RG93bnN2aWV3IE5vcnRod2VzdCwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjdiZDhhODcwNzQ4NGUzNDhkNWJmMjczMmMwZjc3MWEuc2V0Q29udGVudChodG1sX2I1OTRjMjQyZjNiNTRlM2E4YWZhMTgyYWI1MGYzMmVhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzc1NDNiZDY3OGE3YTQ1OWNiNzNiZDZlMzNkMGRiNmE1LmJpbmRQb3B1cChwb3B1cF82N2JkOGE4NzA3NDg0ZTM0OGQ1YmYyNzMyYzBmNzcxYSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zNDRkMTMzYWU0YjI0NTkzOWQwZjRhYjJlZjQ3NTUxNiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjczMjY1OCwtNzkuMzExMTg5Ml0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80MDIxMzE0ZmMxY2Q0MDQ4Yjk2NjJkZmZmNWVhMDM5MSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81MjhkOTQyOTBkNmU0NmMxOTkxNDY1ZjdjYWYwZThhMiA9ICQoJzxkaXYgaWQ9Imh0bWxfNTI4ZDk0MjkwZDZlNDZjMTk5MTQ2NWY3Y2FmMGU4YTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlZpY3RvcmlhIFZpbGxhZ2UsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQwMjEzMTRmYzFjZDQwNDhiOTY2MmRmZmY1ZWEwMzkxLnNldENvbnRlbnQoaHRtbF81MjhkOTQyOTBkNmU0NmMxOTkxNDY1ZjdjYWYwZThhMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zNDRkMTMzYWU0YjI0NTkzOWQwZjRhYjJlZjQ3NTUxNi5iaW5kUG9wdXAocG9wdXBfNDAyMTMxNGZjMWNkNDA0OGI5NjYyZGZmZjVlYTAzOTEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzJmYzM5Yzc4NDNkNDRmMTg5NTliNDIwODg1MjZkNTMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42OTEzMzkxLC03OS4zMjc4MjEyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNlMTIxM2JlM2UzNzQ0ZjdhNTRjZWJhNWE2MTliYTBhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2FkZGI1NzhmN2U5MjQzZTJhNjhkZDljNjdmYWQ4YmY2ID0gJCgnPGRpdiBpZD0iaHRtbF9hZGRiNTc4ZjdlOTI0M2UyYTY4ZGQ5YzY3ZmFkOGJmNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V29vZGJpbmUgR2FyZGVucywgUGFya3ZpZXcgSGlsbCwgRWFzdCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zZTEyMTNiZTNlMzc0NGY3YTU0Y2ViYTVhNjE5YmEwYS5zZXRDb250ZW50KGh0bWxfYWRkYjU3OGY3ZTkyNDNlMmE2OGRkOWM2N2ZhZDhiZjYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzJmYzM5Yzc4NDNkNDRmMTg5NTliNDIwODg1MjZkNTMuYmluZFBvcHVwKHBvcHVwXzNlMTIxM2JlM2UzNzQ0ZjdhNTRjZWJhNWE2MTliYTBhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2I1MzkxN2U4OTdmMjQ1M2M5MjdkM2M1NjUwNDgwNWIwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjk5OTMwMiwtNzkuMzE5MTMxNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ZGM1YzAzZWE2MmU0NmMwOTIzNjU5NDM2ZDRiNGNjZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85MWMwNjUxOTFkZTA0ZmFjYTQ5ZDgzZTY3MDVkNTlhMiA9ICQoJzxkaXYgaWQ9Imh0bWxfOTFjMDY1MTkxZGUwNGZhY2E0OWQ4M2U2NzA1ZDU5YTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldvb2RiaW5lIEhlaWdodHMsIEVhc3QgWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmRjNWMwM2VhNjJlNDZjMDkyMzY1OTQzNmQ0YjRjY2Yuc2V0Q29udGVudChodG1sXzkxYzA2NTE5MWRlMDRmYWNhNDlkODNlNjcwNWQ1OWEyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2I1MzkxN2U4OTdmMjQ1M2M5MjdkM2M1NjUwNDgwNWIwLmJpbmRQb3B1cChwb3B1cF82ZGM1YzAzZWE2MmU0NmMwOTIzNjU5NDM2ZDRiNGNjZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jMDYyNWU2YjIxMDA0NzM1YjY3MzM1ZWQxZjA5ZGU0MSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3MTAyNDQsLTc5LjI5NjcxMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zZTI4NTU1MTMxMjc0YzdjOTA2ZDEyYTYxYzZkYjI1NSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wYTIwNmFjMjQ5NzA0ZTE0YTY2M2UwNzAxNmIwYmNlMiA9ICQoJzxkaXYgaWQ9Imh0bWxfMGEyMDZhYzI0OTcwNGUxNGE2NjNlMDcwMTZiMGJjZTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBCZWFjaGVzLCBFYXN0IFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzNlMjg1NTUxMzEyNzRjN2M5MDZkMTJhNjFjNmRiMjU1LnNldENvbnRlbnQoaHRtbF8wYTIwNmFjMjQ5NzA0ZTE0YTY2M2UwNzAxNmIwYmNlMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jMDYyNWU2YjIxMDA0NzM1YjY3MzM1ZWQxZjA5ZGU0MS5iaW5kUG9wdXAocG9wdXBfM2UyODU1NTEzMTI3NGM3YzkwNmQxMmE2MWM2ZGIyNTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMmYzMzZmNjUxYjkxNGQ3ZWExNDlkMjY2YzJjNzFlODcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDQ3OTgzLC03OS4zNjgwOTA0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI2Y2I2Yzk1MjUwNTQ3ZDE4MWU0NTIxMGNlNDFlMWQ1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2QwODI4NTg4NzQwNjQ4OWI4YjJkZGNmMTJiYTI3MjViID0gJCgnPGRpdiBpZD0iaHRtbF9kMDgyODU4ODc0MDY0ODliOGIyZGRjZjEyYmEyNzI1YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGVhc2lkZSwgRWFzdCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yNmNiNmM5NTI1MDU0N2QxODFlNDUyMTBjZTQxZTFkNS5zZXRDb250ZW50KGh0bWxfZDA4Mjg1ODg3NDA2NDg5YjhiMmRkY2YxMmJhMjcyNWIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMmYzMzZmNjUxYjkxNGQ3ZWExNDlkMjY2YzJjNzFlODcuYmluZFBvcHVwKHBvcHVwXzI2Y2I2Yzk1MjUwNTQ3ZDE4MWU0NTIxMGNlNDFlMWQ1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzcwOWQ3ZGUzNTY2NzQxY2JiY2YyMjk2MGNiMTc0OTQ2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzA0NTUzLC03OS4zNDU0MDc0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2VhODgyN2M2YjdmYjQ1MmQ4YWE4ZWUyY2ZjNjg0MjRkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzVjY2FkYmJiNjgyZTRlMGFhZjc0NmU1ZDFhZjQ2ODJhID0gJCgnPGRpdiBpZD0iaHRtbF81Y2NhZGJiYjY4MmU0ZTBhYWY3NDZlNWQxYWY0NjgyYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhvcm5jbGlmZmUgUGFyaywgRWFzdCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lYTg4MjdjNmI3ZmI0NTJkOGFhOGVlMmNmYzY4NDI0ZC5zZXRDb250ZW50KGh0bWxfNWNjYWRiYmI2ODJlNGUwYWFmNzQ2ZTVkMWFmNDY4MmEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzA5ZDdkZTM1NjY3NDFjYmJjZjIyOTYwY2IxNzQ5NDYuYmluZFBvcHVwKHBvcHVwX2VhODgyN2M2YjdmYjQ1MmQ4YWE4ZWUyY2ZjNjg0MjRkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI2MzQ2MjcxMzJiMjQ0ODZhZTM1Yjg4MDA5OGZhMmQ2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjk5OTcxLC03OS4zMzI1MTk5NjI2MTU5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzM3NDhkNDcwM2I1MDRjMGE5YmVlOWExYmU1YjIwNGJkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzNhM2EzN2U4ZWE1ZjRlYTM4OGJmMTk5NzFhYWI1YzNmID0gJCgnPGRpdiBpZD0iaHRtbF8zYTNhMzdlOGVhNWY0ZWEzODhiZjE5OTcxYWFiNWMzZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RWFzdCBUb3JvbnRvLCBFYXN0IFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM3NDhkNDcwM2I1MDRjMGE5YmVlOWExYmU1YjIwNGJkLnNldENvbnRlbnQoaHRtbF8zYTNhMzdlOGVhNWY0ZWEzODhiZjE5OTcxYWFiNWMzZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yNjM0NjI3MTMyYjI0NDg2YWUzNWI4ODAwOThmYTJkNi5iaW5kUG9wdXAocG9wdXBfMzc0OGQ0NzAzYjUwNGMwYTliZWU5YTFiZTViMjA0YmQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMmZkZmE5ZTE0MWY0NDcxNGIwN2YzMzI4YzJiODZlYTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjIwNDQ1LC03OS4zNTAyNjAzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzFmZWZkMDcwMmI5NjQ0OThhODI2M2Q4NjQ4NTg4MGM3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzY4ODU2YTI0NGFjNDRiZjA5MjhkMTgxNTE2MTRmOTk1ID0gJCgnPGRpdiBpZD0iaHRtbF82ODg1NmEyNDRhYzQ0YmYwOTI4ZDE4MTUxNjE0Zjk5NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIERhbmZvcnRoIFdlc3QsIFJpdmVyZGFsZSwgRWFzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xZmVmZDA3MDJiOTY0NDk4YTgyNjNkODY0ODU4ODBjNy5zZXRDb250ZW50KGh0bWxfNjg4NTZhMjQ0YWM0NGJmMDkyOGQxODE1MTYxNGY5OTUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMmZkZmE5ZTE0MWY0NDcxNGIwN2YzMzI4YzJiODZlYTkuYmluZFBvcHVwKHBvcHVwXzFmZWZkMDcwMmI5NjQ0OThhODI2M2Q4NjQ4NTg4MGM3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2I2MTYwMTE5ZjM5ZDQ0OGVhOWViYWE2MzgyZmYxN2Q2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUzOTYzLC03OS4zODcyMDddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjQ2OTk1OTRiYjAyNDg2ZDkzMTVjZjRkMDJiYmI4MzggPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzk0ZTY1ZjY3NTMxNGJiYTg1N2NiM2UyMjJkODFlOGEgPSAkKCc8ZGl2IGlkPSJodG1sX2M5NGU2NWY2NzUzMTRiYmE4NTdjYjNlMjIyZDgxZThhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgQmVhY2hlcyBXZXN0LCBJbmRpYSBCYXphYXIsIEVhc3QgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjQ2OTk1OTRiYjAyNDg2ZDkzMTVjZjRkMDJiYmI4Mzguc2V0Q29udGVudChodG1sX2M5NGU2NWY2NzUzMTRiYmE4NTdjYjNlMjIyZDgxZThhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2I2MTYwMTE5ZjM5ZDQ0OGVhOWViYWE2MzgyZmYxN2Q2LmJpbmRQb3B1cChwb3B1cF9iNDY5OTU5NGJiMDI0ODZkOTMxNWNmNGQwMmJiYjgzOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80YWI1NzhkMGE2NjQ0ODFmODQzYWI3YzBjNjc3Nzg1OSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1Mzk2MywtNzkuMzg3MjA3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2EyMjcwY2QzMTA0ZDQzNzZhZDJhM2M2N2YyMzljZDZiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc0OTg5NjYxYzgzNjQ0NTdiM2UxNDVmMzNjMzhhNjA5ID0gJCgnPGRpdiBpZD0iaHRtbF83NDk4OTY2MWM4MzY0NDU3YjNlMTQ1ZjMzYzM4YTYwOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U3R1ZGlvIERpc3RyaWN0LCBFYXN0IFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2EyMjcwY2QzMTA0ZDQzNzZhZDJhM2M2N2YyMzljZDZiLnNldENvbnRlbnQoaHRtbF83NDk4OTY2MWM4MzY0NDU3YjNlMTQ1ZjMzYzM4YTYwOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80YWI1NzhkMGE2NjQ0ODFmODQzYWI3YzBjNjc3Nzg1OS5iaW5kUG9wdXAocG9wdXBfYTIyNzBjZDMxMDRkNDM3NmFkMmEzYzY3ZjIzOWNkNmIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTllMDY0NjAzNmE1NGM3MTlhNjg5OTI1MGU5NTYzN2MgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MjkxOTksLTc5LjQwMzI1MjVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmY3MTk0YWIyNjNiNDM3ZTgxNjNlNWZmMzcwZGYwMDAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZTkyZTRlNGU4YzVmNGU2Mjg4ZGRiNmQ4NTJmZTRlMzIgPSAkKCc8ZGl2IGlkPSJodG1sX2U5MmU0ZTRlOGM1ZjRlNjI4OGRkYjZkODUyZmU0ZTMyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5MYXdyZW5jZSBQYXJrLCBDZW50cmFsIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJmNzE5NGFiMjYzYjQzN2U4MTYzZTVmZjM3MGRmMDAwLnNldENvbnRlbnQoaHRtbF9lOTJlNGU0ZThjNWY0ZTYyODhkZGI2ZDg1MmZlNGUzMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85OWUwNjQ2MDM2YTU0YzcxOWE2ODk5MjUwZTk1NjM3Yy5iaW5kUG9wdXAocG9wdXBfMmY3MTk0YWIyNjNiNDM3ZTgxNjNlNWZmMzcwZGYwMDApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNGYwMjJkODZlOWY2NDk5Yzk4NmJkYmI5ODkxYzUwNDEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDQzMTIzLC03OS4zODg1MTY5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNlZjUxYTRlN2E5YzQ0MDU5YWUyMzE2NTMyMGM5MzlhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQzODAwOGViMmU1NDQ1MjE4Y2ZjZmM1OTA0YWZhZjBjID0gJCgnPGRpdiBpZD0iaHRtbF80MzgwMDhlYjJlNTQ0NTIxOGNmY2ZjNTkwNGFmYWYwYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGF2aXN2aWxsZSBOb3J0aCwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zZWY1MWE0ZTdhOWM0NDA1OWFlMjMxNjUzMjBjOTM5YS5zZXRDb250ZW50KGh0bWxfNDM4MDA4ZWIyZTU0NDUyMThjZmNmYzU5MDRhZmFmMGMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNGYwMjJkODZlOWY2NDk5Yzk4NmJkYmI5ODkxYzUwNDEuYmluZFBvcHVwKHBvcHVwXzNlZjUxYTRlN2E5YzQ0MDU5YWUyMzE2NTMyMGM5MzlhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2IzODAwYmYyYjk0ODRmZGFhZGNjNzczNjYzMGE5Yjc3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUzOTYzLC03OS4zODcyMDddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzIwNjY3NjA5ZTQ3NDZlNTkzOTJjY2VmMDA3MDg0YzQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmYyMWExNmM5MGEwNDExZTg0ZTQzM2U1OTMyYTQyNWUgPSAkKCc8ZGl2IGlkPSJodG1sXzZmMjFhMTZjOTBhMDQxMWU4NGU0MzNlNTkzMmE0MjVlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ob3J0aCBUb3JvbnRvIFdlc3QsIENlbnRyYWwgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzIwNjY3NjA5ZTQ3NDZlNTkzOTJjY2VmMDA3MDg0YzQuc2V0Q29udGVudChodG1sXzZmMjFhMTZjOTBhMDQxMWU4NGU0MzNlNTkzMmE0MjVlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2IzODAwYmYyYjk0ODRmZGFhZGNjNzczNjYzMGE5Yjc3LmJpbmRQb3B1cChwb3B1cF8zMjA2Njc2MDllNDc0NmU1OTM5MmNjZWYwMDcwODRjNCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kODg5NTViYzA2ZTk0NGJkOGRlYTQzMDE0YTYzYjQxNCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcwNDMxMjMsLTc5LjM4ODUxNjldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTgyOTA4NzQ1ZTJhNDdhODg0MmFmZGVmMzI2YWYwOWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjM4MDA4NjlmODU3NDY2MjgzMzM0OGRmZTE2MjJjY2IgPSAkKCc8ZGl2IGlkPSJodG1sX2YzODAwODY5Zjg1NzQ2NjI4MzMzNDhkZmUxNjIyY2NiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EYXZpc3ZpbGxlLCBDZW50cmFsIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzE4MjkwODc0NWUyYTQ3YTg4NDJhZmRlZjMyNmFmMDllLnNldENvbnRlbnQoaHRtbF9mMzgwMDg2OWY4NTc0NjYyODMzMzQ4ZGZlMTYyMmNjYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kODg5NTViYzA2ZTk0NGJkOGRlYTQzMDE0YTYzYjQxNC5iaW5kUG9wdXAocG9wdXBfMTgyOTA4NzQ1ZTJhNDdhODg0MmFmZGVmMzI2YWYwOWUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZjQ5YzVkNTBjMTkxNDFhOTljZTUxYWQwNjQ2MjZlZDMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTM5NjMsLTc5LjM4NzIwN10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kYjQ1YmQwMGNkN2Y0N2IzODg2NjEzZjJkOWJkMTYyZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85N2ZlZjFjZDZmMTY0ZGU2YTEzZjJiMGM3MzdmZGU3OSA9ICQoJzxkaXYgaWQ9Imh0bWxfOTdmZWYxY2Q2ZjE2NGRlNmExM2YyYjBjNzM3ZmRlNzkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1vb3JlIFBhcmssIFN1bW1lcmhpbGwgRWFzdCwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kYjQ1YmQwMGNkN2Y0N2IzODg2NjEzZjJkOWJkMTYyZS5zZXRDb250ZW50KGh0bWxfOTdmZWYxY2Q2ZjE2NGRlNmExM2YyYjBjNzM3ZmRlNzkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjQ5YzVkNTBjMTkxNDFhOTljZTUxYWQwNjQ2MjZlZDMuYmluZFBvcHVwKHBvcHVwX2RiNDViZDAwY2Q3ZjQ3YjM4ODY2MTNmMmQ5YmQxNjJlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2VmN2U4NzBiYWZhYjQyZGZiMzU4YzEyNDAxMWQ4MDcyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUzOTYzLC03OS4zODcyMDddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYmYwNGNlNzNmM2Y5NDkwZDk5YjIxNzUzNTc4ZGMzYTYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2RlOGMzNTQ1OWY1NGM0NmI2NzBkYjJjNzg3OTk5ZDMgPSAkKCc8ZGl2IGlkPSJodG1sX2NkZThjMzU0NTlmNTRjNDZiNjcwZGIyYzc4Nzk5OWQzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EZWVyIFBhcmssIEZvcmVzdCBIaWxsIFNFLCBSYXRobmVsbHksIFNvdXRoIEhpbGwsIFN1bW1lcmhpbGwgV2VzdCwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iZjA0Y2U3M2YzZjk0OTBkOTliMjE3NTM1NzhkYzNhNi5zZXRDb250ZW50KGh0bWxfY2RlOGMzNTQ1OWY1NGM0NmI2NzBkYjJjNzg3OTk5ZDMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZWY3ZTg3MGJhZmFiNDJkZmIzNThjMTI0MDExZDgwNzIuYmluZFBvcHVwKHBvcHVwX2JmMDRjZTczZjNmOTQ5MGQ5OWIyMTc1MzU3OGRjM2E2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzFiNjYyMjhjYTY2YjRiNzNiNGFlNDk1NWZmNGUzMTgzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0NjM4MSwtNzkuMzg2MDA1OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80ZjQ3ZWVhMzQ2M2I0ZTBlYmExZDU0NmM1YjBmZTU4ZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85NWRlYzM3ZWFmMDg0ODJhOWZkMTQzZTQ2OGNiZjIyZSA9ICQoJzxkaXYgaWQ9Imh0bWxfOTVkZWMzN2VhZjA4NDgyYTlmZDE0M2U0NjhjYmYyMmUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvc2VkYWxlLCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80ZjQ3ZWVhMzQ2M2I0ZTBlYmExZDU0NmM1YjBmZTU4ZC5zZXRDb250ZW50KGh0bWxfOTVkZWMzN2VhZjA4NDgyYTlmZDE0M2U0NjhjYmYyMmUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMWI2NjIyOGNhNjZiNGI3M2I0YWU0OTU1ZmY0ZTMxODMuYmluZFBvcHVwKHBvcHVwXzRmNDdlZWEzNDYzYjRlMGViYTFkNTQ2YzViMGZlNThkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzU0ZmM1YmQ5YzMxNDRlYzY5MTYzYTJmMjAyNGRhOTM0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0MTczNywtNzkuMzgwODExNjQ1MTM0MV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iYzUwZGUzMzY0Y2Y0ZTZhYjdhZTU5MjdmOThkZWFmYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jZDhiNDUyMDBiZjI0OTUxYWYyYjJmYTVmNWVmYTc2NCA9ICQoJzxkaXYgaWQ9Imh0bWxfY2Q4YjQ1MjAwYmYyNDk1MWFmMmIyZmE1ZjVlZmE3NjQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNhYmJhZ2V0b3duLCBTdC4gSmFtZXMgVG93biwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYmM1MGRlMzM2NGNmNGU2YWI3YWU1OTI3Zjk4ZGVhZmMuc2V0Q29udGVudChodG1sX2NkOGI0NTIwMGJmMjQ5NTFhZjJiMmZhNWY1ZWZhNzY0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzU0ZmM1YmQ5YzMxNDRlYzY5MTYzYTJmMjAyNGRhOTM0LmJpbmRQb3B1cChwb3B1cF9iYzUwZGUzMzY0Y2Y0ZTZhYjdhZTU5MjdmOThkZWFmYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mMGQ5YmI2MGYxY2Q0M2RmOTllYTE2N2E4YzgxYTRlNiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2MjI3NjMsLTc5LjM3NjIwMjY1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQxODNkN2I2MGYzZDQwM2E4M2M2ZjU3MzJiZTRkMTM3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzgxZmMzZmVkMzhmNjQ4NDY4NzlhMmViY2JjYzgxMGY1ID0gJCgnPGRpdiBpZD0iaHRtbF84MWZjM2ZlZDM4ZjY0ODQ2ODc5YTJlYmNiY2M4MTBmNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2h1cmNoIGFuZCBXZWxsZXNsZXksIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQxODNkN2I2MGYzZDQwM2E4M2M2ZjU3MzJiZTRkMTM3LnNldENvbnRlbnQoaHRtbF84MWZjM2ZlZDM4ZjY0ODQ2ODc5YTJlYmNiY2M4MTBmNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9mMGQ5YmI2MGYxY2Q0M2RmOTllYTE2N2E4YzgxYTRlNi5iaW5kUG9wdXAocG9wdXBfNDE4M2Q3YjYwZjNkNDAzYTgzYzZmNTczMmJlNGQxMzcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODIyNDFjMjMzMjUwNGUwOTkxMGIxZDJkNjY5MmZjNmMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQxNzM3LC03OS4zODA4MTE2NDUxMzQxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2RlZmYxYmZhMWQxZDQwZDU5YTY0ZmE3YjY0MWE3OTE1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzkwYzRmN2E4OTIwNzQzNjVhMmQ4ZGRmZmQyMmFkNWM3ID0gJCgnPGRpdiBpZD0iaHRtbF85MGM0ZjdhODkyMDc0MzY1YTJkOGRkZmZkMjJhZDVjNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm91cmZyb250LCBSZWdlbnQgUGFyaywgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZGVmZjFiZmExZDFkNDBkNTlhNjRmYTdiNjQxYTc5MTUuc2V0Q29udGVudChodG1sXzkwYzRmN2E4OTIwNzQzNjVhMmQ4ZGRmZmQyMmFkNWM3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzgyMjQxYzIzMzI1MDRlMDk5MTBiMWQyZDY2OTJmYzZjLmJpbmRQb3B1cChwb3B1cF9kZWZmMWJmYTFkMWQ0MGQ1OWE2NGZhN2I2NDFhNzkxNSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wYzdiZGNhZGU0M2U0ZDFjYWZiN2M0ZGJmNjQzOGFjMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1OTM5MDgsLTc5LjM3OTU1OTFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTgyMDFlOThlNzk3NDAyYzliMjM3NjE5NDk1ZGI5MzUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZWU1YjlmNDAxY2IwNDMzODk1ZTYxMTk1YTkwZjM4NzMgPSAkKCc8ZGl2IGlkPSJodG1sX2VlNWI5ZjQwMWNiMDQzMzg5NWU2MTE5NWE5MGYzODczIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SeWVyc29uLCBHYXJkZW4gRGlzdHJpY3QsIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzU4MjAxZTk4ZTc5NzQwMmM5YjIzNzYxOTQ5NWRiOTM1LnNldENvbnRlbnQoaHRtbF9lZTViOWY0MDFjYjA0MzM4OTVlNjExOTVhOTBmMzg3Myk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wYzdiZGNhZGU0M2U0ZDFjYWZiN2M0ZGJmNjQzOGFjMS5iaW5kUG9wdXAocG9wdXBfNTgyMDFlOThlNzk3NDAyYzliMjM3NjE5NDk1ZGI5MzUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNTU3ZjJlM2IyZGNkNDFiNjk0YTFhMzhkOTI3YzdiNDkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQxNzM3LC03OS4zODA4MTE2NDUxMzQxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzM1YzFjZjAzN2RiZjQxMDNiN2MwODA5MzE0NTM3NjI1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzg4ODBiNDA4MzBkMzQ3YmE5ZDhkMjI2NWQ2MzY1NDRjID0gJCgnPGRpdiBpZD0iaHRtbF84ODgwYjQwODMwZDM0N2JhOWQ4ZDIyNjVkNjM2NTQ0YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U3QuIEphbWVzIFRvd24sIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM1YzFjZjAzN2RiZjQxMDNiN2MwODA5MzE0NTM3NjI1LnNldENvbnRlbnQoaHRtbF84ODgwYjQwODMwZDM0N2JhOWQ4ZDIyNjVkNjM2NTQ0Yyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81NTdmMmUzYjJkY2Q0MWI2OTRhMWEzOGQ5MjdjN2I0OS5iaW5kUG9wdXAocG9wdXBfMzVjMWNmMDM3ZGJmNDEwM2I3YzA4MDkzMTQ1Mzc2MjUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzBhMTRiY2UxMjhmNDVkY2E1NGJhN2FlMjU1NjZhYjcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQxNzM3LC03OS4zODA4MTE2NDUxMzQxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzA0NzM3YzQ0NDM5NTQ0Mjg5ODgyMzcwMDgwM2FhMmM3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc1YjBjMDVjZWU0YjQxOTFiM2Y0NDU0NzQyMmIxMjgxID0gJCgnPGRpdiBpZD0iaHRtbF83NWIwYzA1Y2VlNGI0MTkxYjNmNDQ1NDc0MjJiMTI4MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmVyY3p5IFBhcmssIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzA0NzM3YzQ0NDM5NTQ0Mjg5ODgyMzcwMDgwM2FhMmM3LnNldENvbnRlbnQoaHRtbF83NWIwYzA1Y2VlNGI0MTkxYjNmNDQ1NDc0MjJiMTI4MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jMGExNGJjZTEyOGY0NWRjYTU0YmE3YWUyNTU2NmFiNy5iaW5kUG9wdXAocG9wdXBfMDQ3MzdjNDQ0Mzk1NDQyODk4ODIzNzAwODAzYWEyYzcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDViNDZlZGUwODM0NDRiOGFjNzNiYzNkNTgxYTU3YTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjAzNzc2LC03OS4zODU2NF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kY2I3ZjkxNjJjMDg0NzI1YjY3NGJkNGUyN2MxZGI0NCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mNWU0MGVhZGNiNDc0ZGNlYThkYjVkZDZkNzA1MzIzYSA9ICQoJzxkaXYgaWQ9Imh0bWxfZjVlNDBlYWRjYjQ3NGRjZWE4ZGI1ZGQ2ZDcwNTMyM2EiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNlbnRyYWwgQmF5IFN0cmVldCwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZGNiN2Y5MTYyYzA4NDcyNWI2NzRiZDRlMjdjMWRiNDQuc2V0Q29udGVudChodG1sX2Y1ZTQwZWFkY2I0NzRkY2VhOGRiNWRkNmQ3MDUzMjNhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzA1YjQ2ZWRlMDgzNDQ0YjhhYzczYmMzZDU4MWE1N2E5LmJpbmRQb3B1cChwb3B1cF9kY2I3ZjkxNjJjMDg0NzI1YjY3NGJkNGUyN2MxZGI0NCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83N2JlZmIzMjMyNjU0ZjZkODAwZjIyYzBmOWQ2ZDczMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NDE3MzcsLTc5LjM4MDgxMTY0NTEzNDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjBiMWIzMTU1Mjc2NGM4Zjk3NWJjMTQwZGQ4Yzg3MTQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTUzMzc3YTVlY2Q2NGQ0NzhkN2I4ZDI2NmFmM2Y5NTQgPSAkKCc8ZGl2IGlkPSJodG1sXzk1MzM3N2E1ZWNkNjRkNDc4ZDdiOGQyNjZhZjNmOTU0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BZGVsYWlkZSwgS2luZywgUmljaG1vbmQsIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzIwYjFiMzE1NTI3NjRjOGY5NzViYzE0MGRkOGM4NzE0LnNldENvbnRlbnQoaHRtbF85NTMzNzdhNWVjZDY0ZDQ3OGQ3YjhkMjY2YWYzZjk1NCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83N2JlZmIzMjMyNjU0ZjZkODAwZjIyYzBmOWQ2ZDczMS5iaW5kUG9wdXAocG9wdXBfMjBiMWIzMTU1Mjc2NGM4Zjk3NWJjMTQwZGQ4Yzg3MTQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTRlMmExMjkzNGM2NDlhN2I0NjIxMDc5YWU0ZDA5NGMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQxNzM3LC03OS4zODA4MTE2NDUxMzQxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I2MjE3NDIxNzY4ZTQ4OTY4MTIyYWE0MWU0MjUzZTQwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q0ZjIwMmU5YmQyNzQ5YTU5ZjQ0ZDdiZDcxNjlkNWQ3ID0gJCgnPGRpdiBpZD0iaHRtbF9kNGYyMDJlOWJkMjc0OWE1OWY0NGQ3YmQ3MTY5ZDVkNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm91cmZyb250IEVhc3QsIFRvcm9udG8gSXNsYW5kcywgVW5pb24gU3RhdGlvbiwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjYyMTc0MjE3NjhlNDg5NjgxMjJhYTQxZTQyNTNlNDAuc2V0Q29udGVudChodG1sX2Q0ZjIwMmU5YmQyNzQ5YTU5ZjQ0ZDdiZDcxNjlkNWQ3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzk0ZTJhMTI5MzRjNjQ5YTdiNDYyMTA3OWFlNGQwOTRjLmJpbmRQb3B1cChwb3B1cF9iNjIxNzQyMTc2OGU0ODk2ODEyMmFhNDFlNDI1M2U0MCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kNzE1NWQzY2UwNmY0Zjg5YTA2NjhiODkwODcxZjExZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NDE3MzcsLTc5LjM4MDgxMTY0NTEzNDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjZkYmQxOTUxZDRmNDk2Njk2MGRiZWEyNGQ3ZDQ3N2EgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjFmOTYzNTlkYjA4NDE4MzlhZTUyYjBjYzYzZmYyNzUgPSAkKCc8ZGl2IGlkPSJodG1sX2YxZjk2MzU5ZGIwODQxODM5YWU1MmIwY2M2M2ZmMjc1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EZXNpZ24gRXhjaGFuZ2UsIFRvcm9udG8gRG9taW5pb24gQ2VudHJlLCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iNmRiZDE5NTFkNGY0OTY2OTYwZGJlYTI0ZDdkNDc3YS5zZXRDb250ZW50KGh0bWxfZjFmOTYzNTlkYjA4NDE4MzlhZTUyYjBjYzYzZmYyNzUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDcxNTVkM2NlMDZmNGY4OWEwNjY4Yjg5MDg3MWYxMWUuYmluZFBvcHVwKHBvcHVwX2I2ZGJkMTk1MWQ0ZjQ5NjY5NjBkYmVhMjRkN2Q0NzdhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ZmOWRkNjA3Zjk0ZTQyZDdiZTc5NjBlMzU4ZDI5OTkxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0MTczNywtNzkuMzgwODExNjQ1MTM0MV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mMmRkOWRjNmE0ZDE0NGFiOWNiNTVkMzhlYjczYjI0MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zMmE4ZWZhZGRkOTA0YjRhYTA5NTEzMmViODEyN2Q0YyA9ICQoJzxkaXYgaWQ9Imh0bWxfMzJhOGVmYWRkZDkwNGI0YWEwOTUxMzJlYjgxMjdkNGMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNvbW1lcmNlIENvdXJ0LCBWaWN0b3JpYSBIb3RlbCwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjJkZDlkYzZhNGQxNDRhYjljYjU1ZDM4ZWI3M2IyNDIuc2V0Q29udGVudChodG1sXzMyYThlZmFkZGQ5MDRiNGFhMDk1MTMyZWI4MTI3ZDRjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2ZmOWRkNjA3Zjk0ZTQyZDdiZTc5NjBlMzU4ZDI5OTkxLmJpbmRQb3B1cChwb3B1cF9mMmRkOWRjNmE0ZDE0NGFiOWNiNTVkMzhlYjczYjI0Mik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lMDk0ZGMzOWMyOGU0OWI5Yjk4ZWE3Y2YwZjc3ZDYwZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc3MDgxNzUsLTc5LjQxMzI5OThdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzI1NzkyOTM1NWQwNGQyYzkzMTI0Zjg2OWFkNmJlZDUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOWZiNTA2YWFjMzQxNGY0ZWJhOGYwMTBjNjg1NGJmMzggPSAkKCc8ZGl2IGlkPSJodG1sXzlmYjUwNmFhYzM0MTRmNGViYThmMDEwYzY4NTRiZjM4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CZWRmb3JkIFBhcmssIExhd3JlbmNlIE1hbm9yIEVhc3QsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzcyNTc5MjkzNTVkMDRkMmM5MzEyNGY4NjlhZDZiZWQ1LnNldENvbnRlbnQoaHRtbF85ZmI1MDZhYWMzNDE0ZjRlYmE4ZjAxMGM2ODU0YmYzOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lMDk0ZGMzOWMyOGU0OWI5Yjk4ZWE3Y2YwZjc3ZDYwZS5iaW5kUG9wdXAocG9wdXBfNzI1NzkyOTM1NWQwNGQyYzkzMTI0Zjg2OWFkNmJlZDUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfY2Q4MjJmZjE2OGYwNGVhN2FkZmNiZmQ3NDJkMDAzNjggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDY5ODA1LC03OS40MTc5NDE1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBhNzRhODE1ZTc3MjRkY2U4ZGIyOTc5MmZjODRmY2U3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU4MmUxYTI3OWY3ZjRmZTk5NzM1NzNiMjI0MzkzZGM0ID0gJCgnPGRpdiBpZD0iaHRtbF81ODJlMWEyNzlmN2Y0ZmU5OTczNTczYjIyNDM5M2RjNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9zZWxhd24sIENlbnRyYWwgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGE3NGE4MTVlNzcyNGRjZThkYjI5NzkyZmM4NGZjZTcuc2V0Q29udGVudChodG1sXzU4MmUxYTI3OWY3ZjRmZTk5NzM1NzNiMjI0MzkzZGM0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2NkODIyZmYxNjhmMDRlYTdhZGZjYmZkNzQyZDAwMzY4LmJpbmRQb3B1cChwb3B1cF8wYTc0YTgxNWU3NzI0ZGNlOGRiMjk3OTJmYzg0ZmNlNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84ZmZmOWY0OWQzOGY0MmE1YTA0M2M2ZDJlMzM0Y2Y0MSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1Mzk2MywtNzkuMzg3MjA3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzhhOWYzOWQ4OWRjYzQ2OGU5NTI4ZWFlYWFkZGMwN2ZjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q2NzRiYjM5ZmExMDRlN2Q4MTcxMjU0YWMxMzgxYzY1ID0gJCgnPGRpdiBpZD0iaHRtbF9kNjc0YmIzOWZhMTA0ZTdkODE3MTI1NGFjMTM4MWM2NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Rm9yZXN0IEhpbGwgTm9ydGgsIEZvcmVzdCBIaWxsIFdlc3QsIENlbnRyYWwgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGE5ZjM5ZDg5ZGNjNDY4ZTk1MjhlYWVhYWRkYzA3ZmMuc2V0Q29udGVudChodG1sX2Q2NzRiYjM5ZmExMDRlN2Q4MTcxMjU0YWMxMzgxYzY1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzhmZmY5ZjQ5ZDM4ZjQyYTVhMDQzYzZkMmUzMzRjZjQxLmJpbmRQb3B1cChwb3B1cF84YTlmMzlkODlkY2M0NjhlOTUyOGVhZWFhZGRjMDdmYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zODBhMjczOGVmNWY0MWEwOWIxYjAyODc2YzdkMzg4YyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1Mzk2MywtNzkuMzg3MjA3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzY5MWRmZTk1MjlkNDQ2YWVhODNjYmRjN2Y3ZjljYjEzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I5ODZlNDZlNDU1YjQ3Mzc4ZjY1NzIwZTUzM2NiYjBiID0gJCgnPGRpdiBpZD0iaHRtbF9iOTg2ZTQ2ZTQ1NWI0NzM3OGY2NTcyMGU1MzNjYmIwYiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEFubmV4LCBOb3J0aCBNaWR0b3duLCBZb3JrdmlsbGUsIENlbnRyYWwgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjkxZGZlOTUyOWQ0NDZhZWE4M2NiZGM3ZjdmOWNiMTMuc2V0Q29udGVudChodG1sX2I5ODZlNDZlNDU1YjQ3Mzc4ZjY1NzIwZTUzM2NiYjBiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzM4MGEyNzM4ZWY1ZjQxYTA5YjFiMDI4NzZjN2QzODhjLmJpbmRQb3B1cChwb3B1cF82OTFkZmU5NTI5ZDQ0NmFlYTgzY2JkYzdmN2Y5Y2IxMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zZjAyM2JiOTJiOWE0ZWY1OTQ0Mzk4OTQyOTFkZDBmNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NDE3MzcsLTc5LjM4MDgxMTY0NTEzNDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNGEyMDBmOWRiOGQ3NDU2NjhiYjI2N2IzOGE4MTBhYTAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTQ5YjViNGFmZDExNDI5NThhNmM1MDAzNDYzNDhiMzUgPSAkKCc8ZGl2IGlkPSJodG1sXzU0OWI1YjRhZmQxMTQyOTU4YTZjNTAwMzQ2MzQ4YjM1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IYXJib3JkLCBVbml2ZXJzaXR5IG9mIFRvcm9udG8sIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzRhMjAwZjlkYjhkNzQ1NjY4YmIyNjdiMzhhODEwYWEwLnNldENvbnRlbnQoaHRtbF81NDliNWI0YWZkMTE0Mjk1OGE2YzUwMDM0NjM0OGIzNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zZjAyM2JiOTJiOWE0ZWY1OTQ0Mzk4OTQyOTFkZDBmNS5iaW5kUG9wdXAocG9wdXBfNGEyMDBmOWRiOGQ3NDU2NjhiYjI2N2IzOGE4MTBhYTApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNWIyODM0MDQ4OGZhNGI2NzkyYTc4MTlhMzhmNWUyNzIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQxNzM3LC03OS4zODA4MTE2NDUxMzQxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU4ODQ5ZGIyNTM3OTRkMWM4YTJiOTlkZTBhZjc0M2VkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzRjMGY0YWIxMTBhYTQ2ZTU4OTBkNTFmNTgwN2NmODg1ID0gJCgnPGRpdiBpZD0iaHRtbF80YzBmNGFiMTEwYWE0NmU1ODkwZDUxZjU4MDdjZjg4NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2hpbmF0b3duLCBHcmFuZ2UgUGFyaywgS2Vuc2luZ3RvbiBNYXJrZXQsIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzU4ODQ5ZGIyNTM3OTRkMWM4YTJiOTlkZTBhZjc0M2VkLnNldENvbnRlbnQoaHRtbF80YzBmNGFiMTEwYWE0NmU1ODkwZDUxZjU4MDdjZjg4NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81YjI4MzQwNDg4ZmE0YjY3OTJhNzgxOWEzOGY1ZTI3Mi5iaW5kUG9wdXAocG9wdXBfNTg4NDlkYjI1Mzc5NGQxYzhhMmI5OWRlMGFmNzQzZWQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzlkMmE4MWY5N2U1NGI1MzlmNmMxYTM1MDhmZjczYjMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQxNzM3LC03OS4zODA4MTE2NDUxMzQxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzgwYThkNTQwZWUzZTRiMzFiNjc1MzVjNDMzZTk2Nzg1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2VlZmJiMmZlMjg1MTRmN2RhM2RmMmQ3OTI5ODcwODljID0gJCgnPGRpdiBpZD0iaHRtbF9lZWZiYjJmZTI4NTE0ZjdkYTNkZjJkNzkyOTg3MDg5YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q04gVG93ZXIsIEJhdGh1cnN0IFF1YXksIElzbGFuZCBhaXJwb3J0LCBIYXJib3VyZnJvbnQgV2VzdCwgS2luZyBhbmQgU3BhZGluYSwgUmFpbHdheSBMYW5kcywgU291dGggTmlhZ2FyYSwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODBhOGQ1NDBlZTNlNGIzMWI2NzUzNWM0MzNlOTY3ODUuc2V0Q29udGVudChodG1sX2VlZmJiMmZlMjg1MTRmN2RhM2RmMmQ3OTI5ODcwODljKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzc5ZDJhODFmOTdlNTRiNTM5ZjZjMWEzNTA4ZmY3M2IzLmJpbmRQb3B1cChwb3B1cF84MGE4ZDU0MGVlM2U0YjMxYjY3NTM1YzQzM2U5Njc4NSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84NTM5MTQ3NGRmYmM0ZmZjYWFhMWY4OTY0OTQxYWFjNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NDE3MzcsLTc5LjM4MDgxMTY0NTEzNDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjdlODA0N2Q0NTgxNDI5YmJhNWM0M2ZjM2NlODQzZjMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2IzOTQxNmI4NDBiNDAyNWEwY2Y2MTQyYTA2Yzk0NTggPSAkKCc8ZGl2IGlkPSJodG1sXzNiMzk0MTZiODQwYjQwMjVhMGNmNjE0MmEwNmM5NDU4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdG4gQSBQTyBCb3hlcyAyNSBUaGUgRXNwbGFuYWRlLCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mN2U4MDQ3ZDQ1ODE0MjliYmE1YzQzZmMzY2U4NDNmMy5zZXRDb250ZW50KGh0bWxfM2IzOTQxNmI4NDBiNDAyNWEwY2Y2MTQyYTA2Yzk0NTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODUzOTE0NzRkZmJjNGZmY2FhYTFmODk2NDk0MWFhYzUuYmluZFBvcHVwKHBvcHVwX2Y3ZTgwNDdkNDU4MTQyOWJiYTVjNDNmYzNjZTg0M2YzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzg2MzU3Mzc4N2YxNTQzMjY4MmNiNmFkMGEyOTZmZDNjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0MTczNywtNzkuMzgwODExNjQ1MTM0MV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xNGRkMzFkYmUwYjQ0MzZiYjVlNmJhNDE4MGRiNTQ5YSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80Y2EzODJjOWM0YmE0YTk4OWVhOGNjZWE2MDI4Y2MwNSA9ICQoJzxkaXYgaWQ9Imh0bWxfNGNhMzgyYzljNGJhNGE5ODllYThjY2VhNjAyOGNjMDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZpcnN0IENhbmFkaWFuIFBsYWNlLCBVbmRlcmdyb3VuZCBjaXR5LCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xNGRkMzFkYmUwYjQ0MzZiYjVlNmJhNDE4MGRiNTQ5YS5zZXRDb250ZW50KGh0bWxfNGNhMzgyYzljNGJhNGE5ODllYThjY2VhNjAyOGNjMDUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODYzNTczNzg3ZjE1NDMyNjgyY2I2YWQwYTI5NmZkM2MuYmluZFBvcHVwKHBvcHVwXzE0ZGQzMWRiZTBiNDQzNmJiNWU2YmE0MTgwZGI1NDlhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2NjYTY1OGEzM2FmZTQyNDhhNzljOTkwN2RlNWJlNzg0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzcwODE3NSwtNzkuNDEzMjk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jZmY4MjBhYjViNjQ0NzM0YmUxYzkzNjQ3OGNhMTU3NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81YzBhOWZmMmU4YTg0MTRjOGNhMTk5YjkzM2VkYzg0ZiA9ICQoJzxkaXYgaWQ9Imh0bWxfNWMwYTlmZjJlOGE4NDE0YzhjYTE5OWI5MzNlZGM4NGYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxhd3JlbmNlIEhlaWdodHMsIExhd3JlbmNlIE1hbm9yLCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jZmY4MjBhYjViNjQ0NzM0YmUxYzkzNjQ3OGNhMTU3Ni5zZXRDb250ZW50KGh0bWxfNWMwYTlmZjJlOGE4NDE0YzhjYTE5OWI5MzNlZGM4NGYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfY2NhNjU4YTMzYWZlNDI0OGE3OWM5OTA3ZGU1YmU3ODQuYmluZFBvcHVwKHBvcHVwX2NmZjgyMGFiNWI2NDQ3MzRiZTFjOTM2NDc4Y2ExNTc2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzY2ODYyNjc0NDIwNzQzNjhhMmQwYjcwMjI2MzQwM2VlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzA4NzExNywtNzkuNDQwNjg1M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wYzAyZDVhYWY5NDc0YTJjOWE4OTBmZjRhYzMwYmQ0ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MTJiZjQ3NThlNDQ0NGIyOWY5N2UzMDlmYTk1MzViZSA9ICQoJzxkaXYgaWQ9Imh0bWxfNDEyYmY0NzU4ZTQ0NDRiMjlmOTdlMzA5ZmE5NTM1YmUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkdsZW5jYWlybiwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGMwMmQ1YWFmOTQ3NGEyYzlhODkwZmY0YWMzMGJkNGUuc2V0Q29udGVudChodG1sXzQxMmJmNDc1OGU0NDQ0YjI5Zjk3ZTMwOWZhOTUzNWJlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzY2ODYyNjc0NDIwNzQzNjhhMmQwYjcwMjI2MzQwM2VlLmJpbmRQb3B1cChwb3B1cF8wYzAyZDVhYWY5NDc0YTJjOWE4OTBmZjRhYzMwYmQ0ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82YzRmN2Q5MDIzZDU0MWYxYTQzNTM5OTgxNjQyYWQ4MyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzUzLjk1OTA1NTUsLTEuMDgxNTM2MV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mYTA4ZTRiNDQyZjI0YmQyYjAxMTEwMjg1YjcyZTVmYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mN2Y3MDY4ODVhYzM0MjNhOGM5MGJiNDhmZTVlYzlkNSA9ICQoJzxkaXYgaWQ9Imh0bWxfZjdmNzA2ODg1YWMzNDIzYThjOTBiYjQ4ZmU1ZWM5ZDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkh1bWV3b29kLUNlZGFydmFsZSwgWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmEwOGU0YjQ0MmYyNGJkMmIwMTExMDI4NWI3MmU1ZmMuc2V0Q29udGVudChodG1sX2Y3ZjcwNjg4NWFjMzQyM2E4YzkwYmI0OGZlNWVjOWQ1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzZjNGY3ZDkwMjNkNTQxZjFhNDM1Mzk5ODE2NDJhZDgzLmJpbmRQb3B1cChwb3B1cF9mYTA4ZTRiNDQyZjI0YmQyYjAxMTEwMjg1YjcyZTVmYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zYjRjNzNmYTM0MDE0YWY5YTE4ZjFhZWE3NzFhZWUzMyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzUzLjk1OTA1NTUsLTEuMDgxNTM2MV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82NGY1YTdmOGE2N2E0OWYxYjlkNzIxNGQxODAyZjM1ZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jYzBiNGI1NjlhNGE0ZWE5OGM2ODJhYTY2YWM4NGY0ZSA9ICQoJzxkaXYgaWQ9Imh0bWxfY2MwYjRiNTY5YTRhNGVhOThjNjgyYWE2NmFjODRmNGUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNhbGVkb25pYS1GYWlyYmFua3MsIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY0ZjVhN2Y4YTY3YTQ5ZjFiOWQ3MjE0ZDE4MDJmMzVmLnNldENvbnRlbnQoaHRtbF9jYzBiNGI1NjlhNGE0ZWE5OGM2ODJhYTY2YWM4NGY0ZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zYjRjNzNmYTM0MDE0YWY5YTE4ZjFhZWE3NzFhZWUzMy5iaW5kUG9wdXAocG9wdXBfNjRmNWE3ZjhhNjdhNDlmMWI5ZDcyMTRkMTgwMmYzNWYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZThjYjRjMTg3NjhkNDM1YmI2Yjc4YjEyMTNiMTE4NWUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDk5OTE1LC03OS4zODU3MjE3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzVlMTM3NmVjMjc0NzQxNzQ4MDk1OTRhMzAxZWViZWY2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ZjMTU3OWVjZDc5ZDRmOGFiOWFhMTAwZjJiN2YwMmE1ID0gJCgnPGRpdiBpZD0iaHRtbF9mYzE1NzllY2Q3OWQ0ZjhhYjlhYTEwMGYyYjdmMDJhNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2hyaXN0aWUsIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzVlMTM3NmVjMjc0NzQxNzQ4MDk1OTRhMzAxZWViZWY2LnNldENvbnRlbnQoaHRtbF9mYzE1NzllY2Q3OWQ0ZjhhYjlhYTEwMGYyYjdmMDJhNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lOGNiNGMxODc2OGQ0MzViYjZiNzhiMTIxM2IxMTg1ZS5iaW5kUG9wdXAocG9wdXBfNWUxMzc2ZWMyNzQ3NDE3NDgwOTU5NGEzMDFlZWJlZjYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOWMyYzk4ZGRlOGNjNGFkZDliZGM2NWZlOTQ5YzQzMzMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTg4MiwtNzkuNDM1Mzg1OTAwNTczNV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mMDhkZjgwZjQyZTI0MjAxODhmZmVjNGU4MjAyMzk4ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85ZTkzMjU5YzBmMzA0MDUxYWFjZTcxOGJjZmMwYjYyYyA9ICQoJzxkaXYgaWQ9Imh0bWxfOWU5MzI1OWMwZjMwNDA1MWFhY2U3MThiY2ZjMGI2MmMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvdmVyY291cnQgVmlsbGFnZSwgRHVmZmVyaW4sIFdlc3QgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjA4ZGY4MGY0MmUyNDIwMTg4ZmZlYzRlODIwMjM5OGUuc2V0Q29udGVudChodG1sXzllOTMyNTljMGYzMDQwNTFhYWNlNzE4YmNmYzBiNjJjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzljMmM5OGRkZThjYzRhZGQ5YmRjNjVmZTk0OWM0MzMzLmJpbmRQb3B1cChwb3B1cF9mMDhkZjgwZjQyZTI0MjAxODhmZmVjNGU4MjAyMzk4ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82YWY0Mzc5YmMwZWE0MjFmYTA5NDAwYzUzMTE4ZDQ1MSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1Mzk2MywtNzkuMzg3MjA3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzE5MzFmNDE3OGYxNjQ5N2RiMmYzOTQ2YzhjZjc1NGUzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQwMDgwMmNkYjE2ZDRkMzQ4MjM3MWQwNmYxYzg2OWMzID0gJCgnPGRpdiBpZD0iaHRtbF80MDA4MDJjZGIxNmQ0ZDM0ODIzNzFkMDZmMWM4NjljMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIFBvcnR1Z2FsLCBUcmluaXR5LCBXZXN0IFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzE5MzFmNDE3OGYxNjQ5N2RiMmYzOTQ2YzhjZjc1NGUzLnNldENvbnRlbnQoaHRtbF80MDA4MDJjZGIxNmQ0ZDM0ODIzNzFkMDZmMWM4NjljMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82YWY0Mzc5YmMwZWE0MjFmYTA5NDAwYzUzMTE4ZDQ1MS5iaW5kUG9wdXAocG9wdXBfMTkzMWY0MTc4ZjE2NDk3ZGIyZjM5NDZjOGNmNzU0ZTMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNWQxNGYxNTI4YWIwNGZmZWI0NDlmNjU2ZTVkMTVkMDYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTM5NjMsLTc5LjM4NzIwN10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iYzI4MDk1MDUzODQ0MTRlYjgxYTNhNjU4MTY5YWM1OSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wZmZiZThkODliNzQ0Njc5ODYxYzBkOGVhODNlMDNkMiA9ICQoJzxkaXYgaWQ9Imh0bWxfMGZmYmU4ZDg5Yjc0NDY3OTg2MWMwZDhlYTgzZTAzZDIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyb2NrdG9uLCBFeGhpYml0aW9uIFBsYWNlLCBQYXJrZGFsZSBWaWxsYWdlLCBXZXN0IFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2JjMjgwOTUwNTM4NDQxNGViODFhM2E2NTgxNjlhYzU5LnNldENvbnRlbnQoaHRtbF8wZmZiZThkODliNzQ0Njc5ODYxYzBkOGVhODNlMDNkMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81ZDE0ZjE1MjhhYjA0ZmZlYjQ0OWY2NTZlNWQxNWQwNi5iaW5kUG9wdXAocG9wdXBfYmMyODA5NTA1Mzg0NDE0ZWI4MWEzYTY1ODE2OWFjNTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMjFmZjU0MzZhOGU4NDFmZjg0MzVmNGI3ZDRiZDI2MDUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NzA4MTc1LC03OS40MTMyOTk4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI4NmRmZjZmMTQyZTQwMjU5MTFiYTkxZTY4OTIwMzAzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU5MmYxNzhlOTQ4NDQyOTdiYjk0MTVjY2JmOTg1MDc0ID0gJCgnPGRpdiBpZD0iaHRtbF81OTJmMTc4ZTk0ODQ0Mjk3YmI5NDE1Y2NiZjk4NTA3NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RG93bnN2aWV3LCBOb3J0aCBQYXJrLCBVcHdvb2QgUGFyaywgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMjg2ZGZmNmYxNDJlNDAyNTkxMWJhOTFlNjg5MjAzMDMuc2V0Q29udGVudChodG1sXzU5MmYxNzhlOTQ4NDQyOTdiYjk0MTVjY2JmOTg1MDc0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzIxZmY1NDM2YThlODQxZmY4NDM1ZjRiN2Q0YmQyNjA1LmJpbmRQb3B1cChwb3B1cF8yODZkZmY2ZjE0MmU0MDI1OTExYmE5MWU2ODkyMDMwMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lODRjYmNlMWFhZWQ0MzcxOTFjOTJmMzcxNzkwMDQxZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzUzLjk1OTA1NTUsLTEuMDgxNTM2MV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kYzY0MzdiNWVkOTE0ZDhkYTJjZWZiNzQwZDNhYThmYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hMzU5ZjE1NWU2ZGE0NGQ0ODJhNDljODc5OGUxYWRkMCA9ICQoJzxkaXYgaWQ9Imh0bWxfYTM1OWYxNTVlNmRhNDRkNDgyYTQ5Yzg3OThlMWFkZDAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRlbCBSYXksIEtlZWxlc2RhbGUsIE1vdW50IERlbm5pcywgU2lsdmVydGhvcm4sIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2RjNjQzN2I1ZWQ5MTRkOGRhMmNlZmI3NDBkM2FhOGZhLnNldENvbnRlbnQoaHRtbF9hMzU5ZjE1NWU2ZGE0NGQ0ODJhNDljODc5OGUxYWRkMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lODRjYmNlMWFhZWQ0MzcxOTFjOTJmMzcxNzkwMDQxZS5iaW5kUG9wdXAocG9wdXBfZGM2NDM3YjVlZDkxNGQ4ZGEyY2VmYjc0MGQzYWE4ZmEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTc1ZWU3MDQyYTExNGE1M2FiMmI2YjJhYzk1NDM2MjggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjYxNTY5LC03OS40ODc3Njg1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U0ZDA2ZTdlMGZjNTQzNjY4NzIyOGM1YjljNzQ4ZDM4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2M0ZDg1MDY5NGE1NTRiYzViZTI3ZDNiM2M0NTgyODYzID0gJCgnPGRpdiBpZD0iaHRtbF9jNGQ4NTA2OTRhNTU0YmM1YmUyN2QzYjNjNDU4Mjg2MyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEp1bmN0aW9uIE5vcnRoLCBSdW5ueW1lZGUsIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U0ZDA2ZTdlMGZjNTQzNjY4NzIyOGM1YjljNzQ4ZDM4LnNldENvbnRlbnQoaHRtbF9jNGQ4NTA2OTRhNTU0YmM1YmUyN2QzYjNjNDU4Mjg2Myk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lNzVlZTcwNDJhMTE0YTUzYWIyYjZiMmFjOTU0MzYyOC5iaW5kUG9wdXAocG9wdXBfZTRkMDZlN2UwZmM1NDM2Njg3MjI4YzViOWM3NDhkMzgpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzdlZjFiZjE2NGI5NGEyZDlmZWU4ZjJhODE1NDYxOTEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTM5NjMsLTc5LjM4NzIwN10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yM2VlMGNlZjBiNTQ0NDVhYjBkNWQzYWMzNzYyOWIxYiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84NjM2OWE3ZmZlNGI0NDc2YmI1ZjVlNjk4ZTI2MWY1NyA9ICQoJzxkaXYgaWQ9Imh0bWxfODYzNjlhN2ZmZTRiNDQ3NmJiNWY1ZTY5OGUyNjFmNTciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhpZ2ggUGFyaywgVGhlIEp1bmN0aW9uIFNvdXRoLCBXZXN0IFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzIzZWUwY2VmMGI1NDQ0NWFiMGQ1ZDNhYzM3NjI5YjFiLnNldENvbnRlbnQoaHRtbF84NjM2OWE3ZmZlNGI0NDc2YmI1ZjVlNjk4ZTI2MWY1Nyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83N2VmMWJmMTY0Yjk0YTJkOWZlZThmMmE4MTU0NjE5MS5iaW5kUG9wdXAocG9wdXBfMjNlZTBjZWYwYjU0NDQ1YWIwZDVkM2FjMzc2MjliMWIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZGFiN2IzMWJjMDdmNDlkNGFhZmMwOGU1ZTEwZDc4OTcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Mzk4NDYzLC03OS40Mzk2NDY1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzY4YjhhZjdjODQ1NzQxZDVhM2ZmYmUxN2VhY2VmNWQwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2MxYjBlOTM3MmY1YjRhMjRiMmRjZDQ2YTFiMTJkN2IxID0gJCgnPGRpdiBpZD0iaHRtbF9jMWIwZTkzNzJmNWI0YTI0YjJkY2Q0NmExYjEyZDdiMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGFya2RhbGUsIFJvbmNlc3ZhbGxlcywgV2VzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82OGI4YWY3Yzg0NTc0MWQ1YTNmZmJlMTdlYWNlZjVkMC5zZXRDb250ZW50KGh0bWxfYzFiMGU5MzcyZjViNGEyNGIyZGNkNDZhMWIxMmQ3YjEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZGFiN2IzMWJjMDdmNDlkNGFhZmMwOGU1ZTEwZDc4OTcuYmluZFBvcHVwKHBvcHVwXzY4YjhhZjdjODQ1NzQxZDVhM2ZmYmUxN2VhY2VmNWQwKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzYyMWUxNjY3YTU2MDRlYjA4YjczOTQxMmUxOGU5YTc2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUxNzc3NiwtNzkuNDc1OTIyN10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMmUxMmVlNjExOTQ0NjA3YmZhMjcyNDFhNjQyOWY2NyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85ZjZkODRjMzY5ZjI0YWVmYTVlMTMxMjg0MTkxZjNlNCA9ICQoJzxkaXYgaWQ9Imh0bWxfOWY2ZDg0YzM2OWYyNGFlZmE1ZTEzMTI4NDE5MWYzZTQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJ1bm55bWVkZSwgU3dhbnNlYSwgV2VzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kMmUxMmVlNjExOTQ0NjA3YmZhMjcyNDFhNjQyOWY2Ny5zZXRDb250ZW50KGh0bWxfOWY2ZDg0YzM2OWYyNGFlZmE1ZTEzMTI4NDE5MWYzZTQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjIxZTE2NjdhNTYwNGViMDhiNzM5NDEyZTE4ZTlhNzYuYmluZFBvcHVwKHBvcHVwX2QyZTEyZWU2MTE5NDQ2MDdiZmEyNzI0MWE2NDI5ZjY3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzM3YTQ1ZDI3ZWE1NTQ5MTFiNDgwZTBkZjAzNmI1NTk3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbLTMyLjAwNzQzMzYsMTE1LjkzODczNjNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTMyNjBhOTMzMzEyNDg3MTg3Y2UzNjVhYjg0NGEzYmMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2Y3Y2FjMTI3NDg0NDkzOTkzOWY1N2Q2NDBhMzIyNGYgPSAkKCc8ZGl2IGlkPSJodG1sXzNmN2NhYzEyNzQ4NDQ5Mzk5MzlmNTdkNjQwYTMyMjRmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5RdWVlbiYjMzk7cyBQYXJrLCBRdWVlbiYjMzk7cyBQYXJrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hMzI2MGE5MzMzMTI0ODcxODdjZTM2NWFiODQ0YTNiYy5zZXRDb250ZW50KGh0bWxfM2Y3Y2FjMTI3NDg0NDkzOTkzOWY1N2Q2NDBhMzIyNGYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMzdhNDVkMjdlYTU1NDkxMWI0ODBlMGRmMDM2YjU1OTcuYmluZFBvcHVwKHBvcHVwX2EzMjYwYTkzMzMxMjQ4NzE4N2NlMzY1YWI4NDRhM2JjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ExZDFhZmYzNTM4MjQxYjE4NTY2NGY1NjUxNzYyN2RkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNTkwMzM4LC03OS42NDU3MjldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjgzZjliZjUyYWMzNGQ5YTgzYmFhOGU0OGI4MmE2NTEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNDJhNGRhN2Q1NTk2NGJmNWFkZDdjZWM3NGIzZDAyOTAgPSAkKCc8ZGl2IGlkPSJodG1sXzQyYTRkYTdkNTU5NjRiZjVhZGQ3Y2VjNzRiM2QwMjkwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DYW5hZGEgUG9zdCBHYXRld2F5IFByb2Nlc3NpbmcgQ2VudHJlLCBNaXNzaXNzYXVnYTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjgzZjliZjUyYWMzNGQ5YTgzYmFhOGU0OGI4MmE2NTEuc2V0Q29udGVudChodG1sXzQyYTRkYTdkNTU5NjRiZjVhZGQ3Y2VjNzRiM2QwMjkwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2ExZDFhZmYzNTM4MjQxYjE4NTY2NGY1NjUxNzYyN2RkLmJpbmRQb3B1cChwb3B1cF82ODNmOWJmNTJhYzM0ZDlhODNiYWE4ZTQ4YjgyYTY1MSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hYzBmY2EyYzk5Yjk0MDBhODBhZTcwNzlmOWViNDY0MSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1Mzk2MywtNzkuMzg3MjA3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2YyMjBjMTI5NTI1MjQ2MGVhMjUzMGQ2MmQ3NDU1ZGFjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2MwMDY3YTE1NjdmZjRlZjg4YjlhZDQzMDQ3Mzg3OTJiID0gJCgnPGRpdiBpZD0iaHRtbF9jMDA2N2ExNTY3ZmY0ZWY4OGI5YWQ0MzA0NzM4NzkyYiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnVzaW5lc3MgUmVwbHkgTWFpbCBQcm9jZXNzaW5nIENlbnRyZSA5NjkgRWFzdGVybiwgRWFzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mMjIwYzEyOTUyNTI0NjBlYTI1MzBkNjJkNzQ1NWRhYy5zZXRDb250ZW50KGh0bWxfYzAwNjdhMTU2N2ZmNGVmODhiOWFkNDMwNDczODc5MmIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYWMwZmNhMmM5OWI5NDAwYTgwYWU3MDc5ZjllYjQ2NDEuYmluZFBvcHVwKHBvcHVwX2YyMjBjMTI5NTI1MjQ2MGVhMjUzMGQ2MmQ3NDU1ZGFjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2NmNmJmNzFlMzUyNDRhN2E4MmZhZjg5ZGJhYWI4M2RhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjcxNDU5MTUsLTc5LjU1MjQ5MjA2NjExNjddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTVmNWJhZjA0NjA3NDk2ZTlhNDIzZDM1ZDU3MWIyYWMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODAxMWVkMmI0OTc4NDQwMjg0ZDQ0YTExMmY4MjM5ODQgPSAkKCc8ZGl2IGlkPSJodG1sXzgwMTFlZDJiNDk3ODQ0MDI4NGQ0NGExMTJmODIzOTg0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IdW1iZXIgQmF5IFNob3JlcywgTWltaWNvIFNvdXRoLCBOZXcgVG9yb250bywgRXRvYmljb2tlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lNWY1YmFmMDQ2MDc0OTZlOWE0MjNkMzVkNTcxYjJhYy5zZXRDb250ZW50KGh0bWxfODAxMWVkMmI0OTc4NDQwMjg0ZDQ0YTExMmY4MjM5ODQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfY2Y2YmY3MWUzNTI0NGE3YTgyZmFmODlkYmFhYjgzZGEuYmluZFBvcHVwKHBvcHVwX2U1ZjViYWYwNDYwNzQ5NmU5YTQyM2QzNWQ1NzFiMmFjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzE5NTI5NjU2MDBkMjQ3YTE4OTFjZDY5MDY0MTcyMTMxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjAxNzE3MywtNzkuNTQ1MjMyNV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iYmY0MDRjYWQ3NGQ0YTUxYmQ3YjFiMWJlY2E2M2ZlZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83NzljYTRlYzI0Zjg0MGIxOGRjYzdjMWM5MjJjZWFhMCA9ICQoJzxkaXYgaWQ9Imh0bWxfNzc5Y2E0ZWMyNGY4NDBiMThkY2M3YzFjOTIyY2VhYTAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFsZGVyd29vZCwgTG9uZyBCcmFuY2gsIEV0b2JpY29rZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYmJmNDA0Y2FkNzRkNGE1MWJkN2IxYjFiZWNhNjNmZWUuc2V0Q29udGVudChodG1sXzc3OWNhNGVjMjRmODQwYjE4ZGNjN2MxYzkyMmNlYWEwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzE5NTI5NjU2MDBkMjQ3YTE4OTFjZDY5MDY0MTcyMTMxLmJpbmRQb3B1cChwb3B1cF9iYmY0MDRjYWQ3NGQ0YTUxYmQ3YjFiMWJlY2E2M2ZlZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82YzYwMzc3OTk3NjE0ZTFlOWYzN2MzOGE4N2U4NTZiMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3MTQ1OTE1LC03OS41NTI0OTIwNjYxMTY3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M0YTdjZGNiNTdiMzRiOTI4ZWRlZWQzYjk4MDA2NGMyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzVmMTBlYTIwYjJmYzRmYjU5MWY4MTJhZTIwNzg3MzNiID0gJCgnPGRpdiBpZD0iaHRtbF81ZjEwZWEyMGIyZmM0ZmI1OTFmODEyYWUyMDc4NzMzYiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEtpbmdzd2F5LCBNb250Z29tZXJ5IFJvYWQsIE9sZCBNaWxsIE5vcnRoLCBFdG9iaWNva2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2M0YTdjZGNiNTdiMzRiOTI4ZWRlZWQzYjk4MDA2NGMyLnNldENvbnRlbnQoaHRtbF81ZjEwZWEyMGIyZmM0ZmI1OTFmODEyYWUyMDc4NzMzYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82YzYwMzc3OTk3NjE0ZTFlOWYzN2MzOGE4N2U4NTZiMS5iaW5kUG9wdXAocG9wdXBfYzRhN2NkY2I1N2IzNGI5MjhlZGVlZDNiOTgwMDY0YzIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDQ1YmQ1NGVjYTQ3NDNhMWFiMDgyZjM4MDllY2E2OGUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NzE0NTkxNSwtNzkuNTUyNDkyMDY2MTE2N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80NzExODA2ZWQ5ZGI0OWE2YThlYTQ1ZTc5NDVhZWFiNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83NGFhOThhNzczOTQ0Yzg4YTcyNjg5NzUwMTI3NjY3OCA9ICQoJzxkaXYgaWQ9Imh0bWxfNzRhYTk4YTc3Mzk0NGM4OGE3MjY4OTc1MDEyNzY2NzgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkh1bWJlciBCYXksIEtpbmcmIzM5O3MgTWlsbCBQYXJrLCBLaW5nc3dheSBQYXJrIFNvdXRoIEVhc3QsIE1pbWljbyBORSwgT2xkIE1pbGwgU291dGgsIFRoZSBRdWVlbnN3YXkgRWFzdCwgUm95YWwgWW9yayBTb3V0aCBFYXN0LCBTdW5ueWxlYSwgRXRvYmljb2tlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80NzExODA2ZWQ5ZGI0OWE2YThlYTQ1ZTc5NDVhZWFiNS5zZXRDb250ZW50KGh0bWxfNzRhYTk4YTc3Mzk0NGM4OGE3MjY4OTc1MDEyNzY2NzgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDQ1YmQ1NGVjYTQ3NDNhMWFiMDgyZjM4MDllY2E2OGUuYmluZFBvcHVwKHBvcHVwXzQ3MTE4MDZlZDlkYjQ5YTZhOGVhNDVlNzk0NWFlYWI1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzkyNDY3YWRiMmNkZjQwYTVhMDMyYWZhYTczMjlkZjg2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjcxNDU5MTUsLTc5LjU1MjQ5MjA2NjExNjddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMDE0NDhhYjA5ZmJiNDVkODhiMzc5ZDVlZmI2NTdjYTMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMWY0MGI1M2IxY2NjNDIyOWE2ZGZkMDU1ZjBjYzg2NGEgPSAkKCc8ZGl2IGlkPSJodG1sXzFmNDBiNTNiMWNjYzQyMjlhNmRmZDA1NWYwY2M4NjRhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5LaW5nc3dheSBQYXJrIFNvdXRoIFdlc3QsIE1pbWljbyBOVywgVGhlIFF1ZWVuc3dheSBXZXN0LCBSb3lhbCBZb3JrIFNvdXRoIFdlc3QsIFNvdXRoIG9mIEJsb29yLCBFdG9iaWNva2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzAxNDQ4YWIwOWZiYjQ1ZDg4YjM3OWQ1ZWZiNjU3Y2EzLnNldENvbnRlbnQoaHRtbF8xZjQwYjUzYjFjY2M0MjI5YTZkZmQwNTVmMGNjODY0YSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85MjQ2N2FkYjJjZGY0MGE1YTAzMmFmYWE3MzI5ZGY4Ni5iaW5kUG9wdXAocG9wdXBfMDE0NDhhYjA5ZmJiNDVkODhiMzc5ZDVlZmI2NTdjYTMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNGY0N2I1YjkwM2IyNGQxMjlkYTM1NjgyNmFjNWFkZTggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDM5MDkyLC03OS41NDk4OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85OTc0NzdlMmZjNmQ0ZDI3OWNhZDc4YmM5NmYyM2JlNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xYWZiMzE4YmFiNWQ0YTgxODhiMjVkYWUwMTI1MWU5NSA9ICQoJzxkaXYgaWQ9Imh0bWxfMWFmYjMxOGJhYjVkNGE4MTg4YjI1ZGFlMDEyNTFlOTUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPklzbGluZ3RvbiBBdmVudWUsIEV0b2JpY29rZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTk3NDc3ZTJmYzZkNGQyNzljYWQ3OGJjOTZmMjNiZTUuc2V0Q29udGVudChodG1sXzFhZmIzMThiYWI1ZDRhODE4OGIyNWRhZTAxMjUxZTk1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzRmNDdiNWI5MDNiMjRkMTI5ZGEzNTY4MjZhYzVhZGU4LmJpbmRQb3B1cChwb3B1cF85OTc0NzdlMmZjNmQ0ZDI3OWNhZDc4YmM5NmYyM2JlNSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mNWU2M2JiNWViMmM0MDQzOGZhYjI2YzE0YzkzZWEwYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3MTQ1OTE1LC03OS41NTI0OTIwNjYxMTY3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NhZThhODRjOTA3ZDRiNjk4MWEzOWZiYWQ4YmNhYTBlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAxMTlmMzcxY2JiMjRhNmI4NzYwNmNhODcwMjEyYTc2ID0gJCgnPGRpdiBpZD0iaHRtbF8wMTE5ZjM3MWNiYjI0YTZiODc2MDZjYTg3MDIxMmE3NiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2xvdmVyZGFsZSwgSXNsaW5ndG9uLCBNYXJ0aW4gR3JvdmUsIFByaW5jZXNzIEdhcmRlbnMsIFdlc3QgRGVhbmUgUGFyaywgRXRvYmljb2tlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jYWU4YTg0YzkwN2Q0YjY5ODFhMzlmYmFkOGJjYWEwZS5zZXRDb250ZW50KGh0bWxfMDExOWYzNzFjYmIyNGE2Yjg3NjA2Y2E4NzAyMTJhNzYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjVlNjNiYjVlYjJjNDA0MzhmYWIyNmMxNGM5M2VhMGIuYmluZFBvcHVwKHBvcHVwX2NhZThhODRjOTA3ZDRiNjk4MWEzOWZiYWQ4YmNhYTBlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2NlOWJjMzM4MGY5MDQxMmNiMDA4ZTg5YjNhNTQxY2RmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjcxNDU5MTUsLTc5LjU1MjQ5MjA2NjExNjddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTE1NWRkMzc0Yjk2NGYwMGFkMjFkYzhhODIwZjg0ZmEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzkyOTIwMzU1MDEyNGI5Y2E3NzgzMmRmMjI5MzRkM2MgPSAkKCc8ZGl2IGlkPSJodG1sX2M5MjkyMDM1NTAxMjRiOWNhNzc4MzJkZjIyOTM0ZDNjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CbG9vcmRhbGUgR2FyZGVucywgRXJpbmdhdGUsIE1hcmtsYW5kIFdvb2QsIE9sZCBCdXJuaGFtdGhvcnBlLCBFdG9iaWNva2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzkxNTVkZDM3NGI5NjRmMDBhZDIxZGM4YTgyMGY4NGZhLnNldENvbnRlbnQoaHRtbF9jOTI5MjAzNTUwMTI0YjljYTc3ODMyZGYyMjkzNGQzYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jZTliYzMzODBmOTA0MTJjYjAwOGU4OWIzYTU0MWNkZi5iaW5kUG9wdXAocG9wdXBfOTE1NWRkMzc0Yjk2NGYwMGFkMjFkYzhhODIwZjg0ZmEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNjkwMzJjNzAyNDdkNDQ4NmEwNTEwZjE1MDkwNzdlMDEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NjAwNzc4LC03OS41NzE3NTk4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzA2YzM2YmEwYjk3ODRkZDE5YzJiZjljZmFlNzNiNWVmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2IwNWU5NmJmMzIzNjQ0NTU5NzZmMGQ2YjY3Y2YwY2I5ID0gJCgnPGRpdiBpZD0iaHRtbF9iMDVlOTZiZjMyMzY0NDU1OTc2ZjBkNmI2N2NmMGNiOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SHVtYmVyIFN1bW1pdCwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMDZjMzZiYTBiOTc4NGRkMTljMmJmOWNmYWU3M2I1ZWYuc2V0Q29udGVudChodG1sX2IwNWU5NmJmMzIzNjQ0NTU5NzZmMGQ2YjY3Y2YwY2I5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzY5MDMyYzcwMjQ3ZDQ0ODZhMDUxMGYxNTA5MDc3ZTAxLmJpbmRQb3B1cChwb3B1cF8wNmMzNmJhMGI5Nzg0ZGQxOWMyYmY5Y2ZhZTczYjVlZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80N2E5ZGQ5NmZiODI0ZGU2YmRlYTk2MTQzMDZmM2RlMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxOTI2OCwtNzkuNTM3MTQxNzExMTkyNF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kOTYxODFkYmY4ZjE0ZWQ1ODcyYmEyMjU1NDIwNjBhNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jNmFmZmRlZTE2ZDU0OTM5OTRlOWEwMjJiNDJhN2ZjYSA9ICQoJzxkaXYgaWQ9Imh0bWxfYzZhZmZkZWUxNmQ1NDkzOTk0ZTlhMDIyYjQyYTdmY2EiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkVtZXJ5LCBIdW1iZXJsZWEsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q5NjE4MWRiZjhmMTRlZDU4NzJiYTIyNTU0MjA2MGE0LnNldENvbnRlbnQoaHRtbF9jNmFmZmRlZTE2ZDU0OTM5OTRlOWEwMjJiNDJhN2ZjYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80N2E5ZGQ5NmZiODI0ZGU2YmRlYTk2MTQzMDZmM2RlMS5iaW5kUG9wdXAocG9wdXBfZDk2MTgxZGJmOGYxNGVkNTg3MmJhMjI1NTQyMDYwYTQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfY2UzN2I2YTE5YTEwNDA2ZTg4MDhiMzNkZmMzZTc5MDUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42ODk2MTkxLC03OS40NzkxODhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZGYyNzhhMTIyMTIxNGIwN2I4NTA2MjBiMzkwN2I3MjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjBmMDgzNjVjZDRhNGVlNTg4YWVmNWYyZDBiOTQxZjYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjFhMjQ4M2U3NTQ1NDI2MTliMjliZTFlMzRhNTlkODIgPSAkKCc8ZGl2IGlkPSJodG1sXzIxYTI0ODNlNzU0NTQyNjE5YjI5YmUxZTM0YTU5ZDgyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XZXN0b24sIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzIwZjA4MzY1Y2Q0YTRlZTU4OGFlZjVmMmQwYjk0MWY2LnNldENvbnRlbnQoaHRtbF8yMWEyNDgzZTc1NDU0MjYxOWIyOWJlMWUzNGE1OWQ4Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jZTM3YjZhMTlhMTA0MDZlODgwOGIzM2RmYzNlNzkwNS5iaW5kUG9wdXAocG9wdXBfMjBmMDgzNjVjZDRhNGVlNTg4YWVmNWYyZDBiOTQxZjYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYWYxNDE5YmE0OWI5NDcyMWEzYTNlYzA4NmVkNmFiZGIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42OTM2Mzk5LC03OS41MjEwNDI2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzYxYWU5YTYxYTEyMjQ4MTk5YWI3OGI5MzcwOWRkYTQxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzIyMWE3MDAxYWRkNTQxOGU4NzY1OGUxYTJkZjY1MmRkID0gJCgnPGRpdiBpZD0iaHRtbF8yMjFhNzAwMWFkZDU0MThlODc2NThlMWEyZGY2NTJkZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V2VzdG1vdW50LCBFdG9iaWNva2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzYxYWU5YTYxYTEyMjQ4MTk5YWI3OGI5MzcwOWRkYTQxLnNldENvbnRlbnQoaHRtbF8yMjFhNzAwMWFkZDU0MThlODc2NThlMWEyZGY2NTJkZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hZjE0MTliYTQ5Yjk0NzIxYTNhM2VjMDg2ZWQ2YWJkYi5iaW5kUG9wdXAocG9wdXBfNjFhZTlhNjFhMTIyNDgxOTlhYjc4YjkzNzA5ZGRhNDEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNmI1YTZhY2U4YTZiNDAyNTliZjkwZTRkZjQyZjkxMTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NzE0NTkxNSwtNzkuNTUyNDkyMDY2MTE2N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wMDc4MGQyZTc5NGU0MzY1YTM2NzkyNDEwN2RlNTM1ZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mZWU5NGIyNjJhYjI0MTYxOTdlNmFlODNmYjMxNDllMCA9ICQoJzxkaXYgaWQ9Imh0bWxfZmVlOTRiMjYyYWIyNDE2MTk3ZTZhZTgzZmIzMTQ5ZTAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPktpbmdzdmlldyBWaWxsYWdlLCBNYXJ0aW4gR3JvdmUgR2FyZGVucywgUmljaHZpZXcgR2FyZGVucywgU3QuIFBoaWxsaXBzLCBFdG9iaWNva2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzAwNzgwZDJlNzk0ZTQzNjVhMzY3OTI0MTA3ZGU1MzVkLnNldENvbnRlbnQoaHRtbF9mZWU5NGIyNjJhYjI0MTYxOTdlNmFlODNmYjMxNDllMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82YjVhNmFjZThhNmI0MDI1OWJmOTBlNGRmNDJmOTExOS5iaW5kUG9wdXAocG9wdXBfMDA3ODBkMmU3OTRlNDM2NWEzNjc5MjQxMDdkZTUzNWQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDlmYmFjOWRmMWU5NDkwYmFiODlmY2E2ZmIwOWI1MWYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NzE0NTkxNSwtNzkuNTUyNDkyMDY2MTE2N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kZjI3OGExMjIxMjE0YjA3Yjg1MDYyMGIzOTA3YjcyNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84YjExOGI5NjJlZTk0MjA2YTQ2NmEzYzZiZDIxMDJmYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85YWNjZmFmODBkNDc0MDVhOTIwZmZmMzlkZThjNjhiMyA9ICQoJzxkaXYgaWQ9Imh0bWxfOWFjY2ZhZjgwZDQ3NDA1YTkyMGZmZjM5ZGU4YzY4YjMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFsYmlvbiBHYXJkZW5zLCBCZWF1bW9uZCBIZWlnaHRzLCBIdW1iZXJnYXRlLCBKYW1lc3Rvd24sIE1vdW50IE9saXZlLCBTaWx2ZXJzdG9uZSwgU291dGggU3RlZWxlcywgVGhpc3RsZXRvd24sIEV0b2JpY29rZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGIxMThiOTYyZWU5NDIwNmE0NjZhM2M2YmQyMTAyZmEuc2V0Q29udGVudChodG1sXzlhY2NmYWY4MGQ0NzQwNWE5MjBmZmYzOWRlOGM2OGIzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Q5ZmJhYzlkZjFlOTQ5MGJhYjg5ZmNhNmZiMDliNTFmLmJpbmRQb3B1cChwb3B1cF84YjExOGI5NjJlZTk0MjA2YTQ2NmEzYzZiZDIxMDJmYSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mOGRhM2UyNTE5Yzc0ZTBkOTkyYjRjYjUzOGQ2ZWRmZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3MTQ1OTE1LC03OS41NTI0OTIwNjYxMTY3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2RmMjc4YTEyMjEyMTRiMDdiODUwNjIwYjM5MDdiNzI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NlNGRmNjNhM2IzNTQ3Zjk4ODg0Y2FjYWI2ODVhNTI2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzBhOTI4MWJmMWRjZDRhMzM5MzBkMTk5ZWVkODIwOTk1ID0gJCgnPGRpdiBpZD0iaHRtbF8wYTkyODFiZjFkY2Q0YTMzOTMwZDE5OWVlZDgyMDk5NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Tm9ydGh3ZXN0LCBFdG9iaWNva2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2NlNGRmNjNhM2IzNTQ3Zjk4ODg0Y2FjYWI2ODVhNTI2LnNldENvbnRlbnQoaHRtbF8wYTkyODFiZjFkY2Q0YTMzOTMwZDE5OWVlZDgyMDk5NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9mOGRhM2UyNTE5Yzc0ZTBkOTkyYjRjYjUzOGQ2ZWRmZS5iaW5kUG9wdXAocG9wdXBfY2U0ZGY2M2EzYjM1NDdmOTg4ODRjYWNhYjY4NWE1MjYpOwoKICAgICAgICAgICAgCiAgICAgICAgCjwvc2NyaXB0Pg==\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x7f956540acc0>"
      ]
     },
     "execution_count": 30,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# create map of Toronto using latitude and longitude values\n",
    "map_toro = folium.Map(location=[latitude, longitude], zoom_start=10)\n",
    "\n",
    "# add markers to map\n",
    "for lat, lng, borough, neighborhood in zip(neighborhoods['Latitude'], neighborhoods['Longitude'], neighborhoods['Borough'], neighborhoods['Neighborhood']):\n",
    "    label = '{}, {}'.format(neighborhood, borough)\n",
    "    label = folium.Popup(label, parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lng],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color='blue',\n",
    "        fill=True,\n",
    "        fill_color='#3186cc',\n",
    "        fill_opacity=0.7,\n",
    "        parse_html=False).add_to(map_toro)  \n",
    "    \n",
    "map_toro"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Your credentails:\n",
      "CLIENT_ID: PWE1OYYQJVRPR30NEY4DAP00OTIMREKUGQVZ5IMEFYJLE5Q4\n",
      "CLIENT_SECRET:0BFI4OURUS4QRA0IMLBH31CINF0HGHJOMTMROEJW0DCIUQ3K\n"
     ]
    }
   ],
   "source": [
    "# @hidden-cell\n",
    "CLIENT_ID = 'PWE1OYYQJVRPR30NEY4DAP00OTIMREKUGQVZ5IMEFYJLE5Q4' # your Foursquare ID\n",
    "CLIENT_SECRET = '0BFI4OURUS4QRA0IMLBH31CINF0HGHJOMTMROEJW0DCIUQ3K' # your Foursquare Secret\n",
    "VERSION = '20180605' # Foursquare API version\n",
    "\n",
    "print('Your credentails:')\n",
    "print('CLIENT_ID: ' + CLIENT_ID)\n",
    "print('CLIENT_SECRET:' + CLIENT_SECRET)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Let us now segment and cluster neighbourhoods in Scarborough</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Borough</th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>43.813464</td>\n",
       "      <td>-79.205981</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Guildwood, Morningside, West Hill</td>\n",
       "      <td>43.753480</td>\n",
       "      <td>-79.179995</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cedarbrae</td>\n",
       "      <td>43.756467</td>\n",
       "      <td>-79.226692</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       Borough                            Neighborhood   Latitude  Longitude\n",
       "0  Scarborough                          Rouge, Malvern  43.813464 -79.205981\n",
       "1  Scarborough  Highland Creek, Rouge Hill, Port Union  54.284760  -0.409034\n",
       "2  Scarborough       Guildwood, Morningside, West Hill  43.753480 -79.179995\n",
       "3  Scarborough                                  Woburn  43.759824 -79.225291\n",
       "4  Scarborough                               Cedarbrae  43.756467 -79.226692"
      ]
     },
     "execution_count": 31,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_data = neighborhoods[neighborhoods['Borough'] == 'Scarborough'].reset_index(drop=True)\n",
    "scarborough_data.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The geograpical coordinate of Scarborough are 43.773077, -79.257774.\n"
     ]
    }
   ],
   "source": [
    "address = 'Scarborough, Toronto'\n",
    "\n",
    "geolocator = Nominatim(user_agent=\"toro_explorer\")\n",
    "s_location = geolocator.geocode(address)\n",
    "s_latitude = s_location.latitude\n",
    "s_longitude = s_location.longitude\n",
    "print('The geograpical coordinate of Scarborough are {}, {}.'.format(s_latitude, s_longitude))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 33,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfYmNjNTZlYTEzNzExNDc5ZGEwNDkxZmEyMjljZWY2ZjggewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwX2JjYzU2ZWExMzcxMTQ3OWRhMDQ5MWZhMjI5Y2VmNmY4IiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF9iY2M1NmVhMTM3MTE0NzlkYTA0OTFmYTIyOWNlZjZmOCA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF9iY2M1NmVhMTM3MTE0NzlkYTA0OTFmYTIyOWNlZjZmOCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbNDMuNzczMDc3LC03OS4yNTc3NzRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JsZENvcHlKdW1wOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzc4YTExMDBiOTI4NzQ5MjJiOTI4ODRkOGI3ZjZhZTBkID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICAgICAgICAgICAgewogICJhdHRyaWJ1dGlvbiI6IG51bGwsCiAgImRldGVjdFJldGluYSI6IGZhbHNlLAogICJtYXhab29tIjogMTgsCiAgIm1pblpvb20iOiAxLAogICJub1dyYXAiOiBmYWxzZSwKICAic3ViZG9tYWlucyI6ICJhYmMiCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2JjYzU2ZWExMzcxMTQ3OWRhMDQ5MWZhMjI5Y2VmNmY4KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xMTViMmU2NWE1NjM0ZjBlYTYwYzI3YjM2N2M0ZTQ2NSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjgxMzQ2NCwtNzkuMjA1OTgwOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9iY2M1NmVhMTM3MTE0NzlkYTA0OTFmYTIyOWNlZjZmOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yM2FhODM1MWRhOWY0NzMyOWM3NWRkM2IzZGIxYmQ1YiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hODMyMDI2OGJjMDE0ZGYyYWIwNTZkNzg2ZDFkMDQ4ZiA9ICQoJzxkaXYgaWQ9Imh0bWxfYTgzMjAyNjhiYzAxNGRmMmFiMDU2ZDc4NmQxZDA0OGYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvdWdlLCBNYWx2ZXJuPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yM2FhODM1MWRhOWY0NzMyOWM3NWRkM2IzZGIxYmQ1Yi5zZXRDb250ZW50KGh0bWxfYTgzMjAyNjhiYzAxNGRmMmFiMDU2ZDc4NmQxZDA0OGYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMTE1YjJlNjVhNTYzNGYwZWE2MGMyN2IzNjdjNGU0NjUuYmluZFBvcHVwKHBvcHVwXzIzYWE4MzUxZGE5ZjQ3MzI5Yzc1ZGQzYjNkYjFiZDViKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzJhMzhlZjRkNGQ2NzQwMmRhMTA3YzE2YTc3Zjc0NDY3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNTQuMjg0NzYwMSwtMC40MDkwMzM5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2JjYzU2ZWExMzcxMTQ3OWRhMDQ5MWZhMjI5Y2VmNmY4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzUwNjljNTkxOTI5YjRlNWI5NTg4MWRlZTFhNjdmYzY5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzIwYmMxNzEyNWU2NzQ0OTBhM2NiNmMwNWI5MGRmMThmID0gJCgnPGRpdiBpZD0iaHRtbF8yMGJjMTcxMjVlNjc0NDkwYTNjYjZjMDViOTBkZjE4ZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGlnaGxhbmQgQ3JlZWssIFJvdWdlIEhpbGwsIFBvcnQgVW5pb248L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzUwNjljNTkxOTI5YjRlNWI5NTg4MWRlZTFhNjdmYzY5LnNldENvbnRlbnQoaHRtbF8yMGJjMTcxMjVlNjc0NDkwYTNjYjZjMDViOTBkZjE4Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yYTM4ZWY0ZDRkNjc0MDJkYTEwN2MxNmE3N2Y3NDQ2Ny5iaW5kUG9wdXAocG9wdXBfNTA2OWM1OTE5MjliNGU1Yjk1ODgxZGVlMWE2N2ZjNjkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNGEzYWE3MWY2NmI3NDExYmI0MzkyODg4N2MxZDU5NmQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NTM0ODA0LC03OS4xNzk5OTQ5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2JjYzU2ZWExMzcxMTQ3OWRhMDQ5MWZhMjI5Y2VmNmY4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQ5OTdhNzNjZmJhZDRmMjg4NTk2YjU1MWNmZWU4ZWRiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I4MzU5YmZhZmI5MzRlMWU5ZjQzZGJlZTEzNGVmNTRiID0gJCgnPGRpdiBpZD0iaHRtbF9iODM1OWJmYWZiOTM0ZTFlOWY0M2RiZWUxMzRlZjU0YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3VpbGR3b29kLCBNb3JuaW5nc2lkZSwgV2VzdCBIaWxsPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80OTk3YTczY2ZiYWQ0ZjI4ODU5NmI1NTFjZmVlOGVkYi5zZXRDb250ZW50KGh0bWxfYjgzNTliZmFmYjkzNGUxZTlmNDNkYmVlMTM0ZWY1NGIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNGEzYWE3MWY2NmI3NDExYmI0MzkyODg4N2MxZDU5NmQuYmluZFBvcHVwKHBvcHVwXzQ5OTdhNzNjZmJhZDRmMjg4NTk2YjU1MWNmZWU4ZWRiKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Y2YTIzNjY1ZWJhMjRjYzk5ZTIyZmU0NTFkNDU0MzYyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU5ODI0MywtNzkuMjI1MjkwOF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9iY2M1NmVhMTM3MTE0NzlkYTA0OTFmYTIyOWNlZjZmOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMTQ0NThiYjgyZDE0OTYxODcwNGNkNGYyMmZkZTI4MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83ZmUzYWFkZjUwZmU0ODFmOGJkNzMyYzE4YWUyY2I3ZCA9ICQoJzxkaXYgaWQ9Imh0bWxfN2ZlM2FhZGY1MGZlNDgxZjhiZDczMmMxOGFlMmNiN2QiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldvYnVybjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDE0NDU4YmI4MmQxNDk2MTg3MDRjZDRmMjJmZGUyODIuc2V0Q29udGVudChodG1sXzdmZTNhYWRmNTBmZTQ4MWY4YmQ3MzJjMThhZTJjYjdkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Y2YTIzNjY1ZWJhMjRjYzk5ZTIyZmU0NTFkNDU0MzYyLmJpbmRQb3B1cChwb3B1cF9kMTQ0NThiYjgyZDE0OTYxODcwNGNkNGYyMmZkZTI4Mik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kODNmMmU4MWNiMDc0NjkzODdlNzQ2N2QzZDNkMzAxNCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc1NjQ2NjU1LC03OS4yMjY2OTI0NDI1ODhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYmNjNTZlYTEzNzExNDc5ZGEwNDkxZmEyMjljZWY2ZjgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDZhZjg4MjFkZTQ4NDA5NmI5YWFiNDY0N2JlZmFhZDYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDg0OWI2NThlOTMyNGRmM2ExMGRhZjI3NThhYzQ2NWYgPSAkKCc8ZGl2IGlkPSJodG1sX2Q4NDliNjU4ZTkzMjRkZjNhMTBkYWYyNzU4YWM0NjVmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DZWRhcmJyYWU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q2YWY4ODIxZGU0ODQwOTZiOWFhYjQ2NDdiZWZhYWQ2LnNldENvbnRlbnQoaHRtbF9kODQ5YjY1OGU5MzI0ZGYzYTEwZGFmMjc1OGFjNDY1Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kODNmMmU4MWNiMDc0NjkzODdlNzQ2N2QzZDNkMzAxNC5iaW5kUG9wdXAocG9wdXBfZDZhZjg4MjFkZTQ4NDA5NmI5YWFiNDY0N2JlZmFhZDYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNTE2MDkxMGRjYjYzNDE5Y2FkNzE2MGY4MjU1ZWMxOWMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NDM3NDIyLC03OS4yMTE2MzI0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2JjYzU2ZWExMzcxMTQ3OWRhMDQ5MWZhMjI5Y2VmNmY4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MwMGI2YWQ1NjVlYTRhNGM4MjU3MjdkYjQ2NTA1MGIxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQ1MDA2OGE5N2E0ZTRkNjY4MjE4MWZlM2M4NjUyYmI5ID0gJCgnPGRpdiBpZD0iaHRtbF80NTAwNjhhOTdhNGU0ZDY2ODIxODFmZTNjODY1MmJiOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U2NhcmJvcm91Z2ggVmlsbGFnZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzAwYjZhZDU2NWVhNGE0YzgyNTcyN2RiNDY1MDUwYjEuc2V0Q29udGVudChodG1sXzQ1MDA2OGE5N2E0ZTRkNjY4MjE4MWZlM2M4NjUyYmI5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzUxNjA5MTBkY2I2MzQxOWNhZDcxNjBmODI1NWVjMTljLmJpbmRQb3B1cChwb3B1cF9jMDBiNmFkNTY1ZWE0YTRjODI1NzI3ZGI0NjUwNTBiMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jNmZmYmMzNTdjZDI0NTYxOTQ5YjAyNzYyOGYzN2NlMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzU0LjI4NDc2MDEsLTAuNDA5MDMzOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9iY2M1NmVhMTM3MTE0NzlkYTA0OTFmYTIyOWNlZjZmOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zYjg3NDBkMmZjZWY0Y2MyYmVkYmIxODRlMjA2OTdhMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zYWVmNDk0OWZjNWI0NmM1YjBiZDI5MGJjZDEwZTczZSA9ICQoJzxkaXYgaWQ9Imh0bWxfM2FlZjQ5NDlmYzViNDZjNWIwYmQyOTBiY2QxMGU3M2UiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkVhc3QgQmlyY2htb3VudCBQYXJrLCBJb252aWV3LCBLZW5uZWR5IFBhcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzNiODc0MGQyZmNlZjRjYzJiZWRiYjE4NGUyMDY5N2EwLnNldENvbnRlbnQoaHRtbF8zYWVmNDk0OWZjNWI0NmM1YjBiZDI5MGJjZDEwZTczZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jNmZmYmMzNTdjZDI0NTYxOTQ5YjAyNzYyOGYzN2NlMC5iaW5kUG9wdXAocG9wdXBfM2I4NzQwZDJmY2VmNGNjMmJlZGJiMTg0ZTIwNjk3YTApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNjg0N2FiZDI0NzllNGVhOWI2OTliYzI0NmRmOGYzNTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYmNjNTZlYTEzNzExNDc5ZGEwNDkxZmEyMjljZWY2ZjgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYmEwZWJlNzQ4ZGRiNDUwNTlkNzU5N2RiYjQ1ZTYwZGEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjhiYzYwYzYyNmQzNDgxOGJkZjNjZThmMzVkMDE0MGQgPSAkKCc8ZGl2IGlkPSJodG1sX2I4YmM2MGM2MjZkMzQ4MThiZGYzY2U4ZjM1ZDAxNDBkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DbGFpcmxlYSwgR29sZGVuIE1pbGUsIE9ha3JpZGdlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iYTBlYmU3NDhkZGI0NTA1OWQ3NTk3ZGJiNDVlNjBkYS5zZXRDb250ZW50KGh0bWxfYjhiYzYwYzYyNmQzNDgxOGJkZjNjZThmMzVkMDE0MGQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjg0N2FiZDI0NzllNGVhOWI2OTliYzI0NmRmOGYzNTkuYmluZFBvcHVwKHBvcHVwX2JhMGViZTc0OGRkYjQ1MDU5ZDc1OTdkYmI0NWU2MGRhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzUwMWQyYzBhMzk1ZTRiYTdhYjU0NmQwYzAwODQ3N2JiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNTQuMjg0NzYwMSwtMC40MDkwMzM5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2JjYzU2ZWExMzcxMTQ3OWRhMDQ5MWZhMjI5Y2VmNmY4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2E2NDE2NjNkNzQwNzRiOWQ5MTIyZDVmMDdkMzk1YzdlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzIyOTE4NzRjYmJjZDRiYmFhNmUzYTZiMjA0MDFjNjljID0gJCgnPGRpdiBpZD0iaHRtbF8yMjkxODc0Y2JiY2Q0YmJhYTZlM2E2YjIwNDAxYzY5YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2xpZmZjcmVzdCwgQ2xpZmZzaWRlLCBTY2FyYm9yb3VnaCBWaWxsYWdlIFdlc3Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2E2NDE2NjNkNzQwNzRiOWQ5MTIyZDVmMDdkMzk1YzdlLnNldENvbnRlbnQoaHRtbF8yMjkxODc0Y2JiY2Q0YmJhYTZlM2E2YjIwNDAxYzY5Yyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81MDFkMmMwYTM5NWU0YmE3YWI1NDZkMGMwMDg0NzdiYi5iaW5kUG9wdXAocG9wdXBfYTY0MTY2M2Q3NDA3NGI5ZDkxMjJkNWYwN2QzOTVjN2UpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYmNhNmFiYzQxZGYwNDlmNmFjOTk3ZGEwNGVlMzIzNDkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYmNjNTZlYTEzNzExNDc5ZGEwNDkxZmEyMjljZWY2ZjgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTUzNzU2MmExN2IzNDExMGE3ZmQyODJmNjQ1NGRlYjQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzk0NzkyNGRmYTY5NDhiY2FiMTJhOTZkNmY4NTIyNTIgPSAkKCc8ZGl2IGlkPSJodG1sX2M5NDc5MjRkZmE2OTQ4YmNhYjEyYTk2ZDZmODUyMjUyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CaXJjaCBDbGlmZiwgQ2xpZmZzaWRlIFdlc3Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U1Mzc1NjJhMTdiMzQxMTBhN2ZkMjgyZjY0NTRkZWI0LnNldENvbnRlbnQoaHRtbF9jOTQ3OTI0ZGZhNjk0OGJjYWIxMmE5NmQ2Zjg1MjI1Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iY2E2YWJjNDFkZjA0OWY2YWM5OTdkYTA0ZWUzMjM0OS5iaW5kUG9wdXAocG9wdXBfZTUzNzU2MmExN2IzNDExMGE3ZmQyODJmNjQ1NGRlYjQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzJhMmQwNjZlNWM0NDU3NzhhNzI5MTRkNmY3NGRmNTQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYmNjNTZlYTEzNzExNDc5ZGEwNDkxZmEyMjljZWY2ZjgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZWQxMDhlNDc5NjY2NGJmMmIyNjIzZmRhYzBmMmRmMTggPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMWEwMDE2MDU5ZTFmNGFiZjhkMzQ3YzE4OTBmOWI5NmYgPSAkKCc8ZGl2IGlkPSJodG1sXzFhMDAxNjA1OWUxZjRhYmY4ZDM0N2MxODkwZjliOTZmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Eb3JzZXQgUGFyaywgU2NhcmJvcm91Z2ggVG93biBDZW50cmUsIFdleGZvcmQgSGVpZ2h0czwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZWQxMDhlNDc5NjY2NGJmMmIyNjIzZmRhYzBmMmRmMTguc2V0Q29udGVudChodG1sXzFhMDAxNjA1OWUxZjRhYmY4ZDM0N2MxODkwZjliOTZmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzMyYTJkMDY2ZTVjNDQ1Nzc4YTcyOTE0ZDZmNzRkZjU0LmJpbmRQb3B1cChwb3B1cF9lZDEwOGU0Nzk2NjY0YmYyYjI2MjNmZGFjMGYyZGYxOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mMDY1OWM3M2IzNmU0MTEzOTc3OGIwOGY4OWEzMmQyNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc1OTgzMDYsLTc5LjI5NjQ3MDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYmNjNTZlYTEzNzExNDc5ZGEwNDkxZmEyMjljZWY2ZjgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDcwZGU3MTU1ZWJhNDIyZDhhODgwYmRmODU2ZGVhNWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTQ0NTRhODZlZGJmNGFmZGIxZjZkMTViNjdlMmQ2N2MgPSAkKCc8ZGl2IGlkPSJodG1sX2E0NDU0YTg2ZWRiZjRhZmRiMWY2ZDE1YjY3ZTJkNjdjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NYXJ5dmFsZSwgV2V4Zm9yZDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDcwZGU3MTU1ZWJhNDIyZDhhODgwYmRmODU2ZGVhNWUuc2V0Q29udGVudChodG1sX2E0NDU0YTg2ZWRiZjRhZmRiMWY2ZDE1YjY3ZTJkNjdjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2YwNjU5YzczYjM2ZTQxMTM5Nzc4YjA4Zjg5YTMyZDI1LmJpbmRQb3B1cChwb3B1cF80NzBkZTcxNTVlYmE0MjJkOGE4ODBiZGY4NTZkZWE1ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82Y2JkNTI1ODQ0NjY0OTFmYmJhNDFkYjdjOGFhMjgxOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc4NTM1MzEsLTc5LjI3ODU0OTRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYmNjNTZlYTEzNzExNDc5ZGEwNDkxZmEyMjljZWY2ZjgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZmU3OGE3Zjk5ZDM0NGZlNGJlM2NhYzczOGE4ZmZhZTEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTg3YzlhNTNhOWUxNDRiNWFlNGIyMzg0ZTY4MDY4NzkgPSAkKCc8ZGl2IGlkPSJodG1sXzU4N2M5YTUzYTllMTQ0YjVhZTRiMjM4NGU2ODA2ODc5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BZ2luY291cnQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2ZlNzhhN2Y5OWQzNDRmZTRiZTNjYWM3MzhhOGZmYWUxLnNldENvbnRlbnQoaHRtbF81ODdjOWE1M2E5ZTE0NGI1YWU0YjIzODRlNjgwNjg3OSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82Y2JkNTI1ODQ0NjY0OTFmYmJhNDFkYjdjOGFhMjgxOC5iaW5kUG9wdXAocG9wdXBfZmU3OGE3Zjk5ZDM0NGZlNGJlM2NhYzczOGE4ZmZhZTEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzliYTBiNGZlYTcxNDE2N2I3MDVlMWVjYzgxMDNiNTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYmNjNTZlYTEzNzExNDc5ZGEwNDkxZmEyMjljZWY2ZjgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYWVlMWVkZTZmNTcxNDkyMTk1OTFhMTBkN2Y4MTBlYTkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTU0ZWY0N2QzZWMxNDRkZmFlOWQ5ZGViYTkyZGY4NGQgPSAkKCc8ZGl2IGlkPSJodG1sXzU1NGVmNDdkM2VjMTQ0ZGZhZTlkOWRlYmE5MmRmODRkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DbGFya3MgQ29ybmVycywgU3VsbGl2YW4sIFRhbSBPJiMzOTtTaGFudGVyPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hZWUxZWRlNmY1NzE0OTIxOTU5MWExMGQ3ZjgxMGVhOS5zZXRDb250ZW50KGh0bWxfNTU0ZWY0N2QzZWMxNDRkZmFlOWQ5ZGViYTkyZGY4NGQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzliYTBiNGZlYTcxNDE2N2I3MDVlMWVjYzgxMDNiNTkuYmluZFBvcHVwKHBvcHVwX2FlZTFlZGU2ZjU3MTQ5MjE5NTkxYTEwZDdmODEwZWE5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2YwMWExZWFmMmZlOTQwNmY4NmEzNmY4MTE5ZjdkMmQxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNTQuMjg0NzYwMSwtMC40MDkwMzM5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2JjYzU2ZWExMzcxMTQ3OWRhMDQ5MWZhMjI5Y2VmNmY4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ZlOTU1OTZkYmY3MTRiNGViNzk1ZjFiOTg2ZmMwYmFmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2U1NDliZDdhNDRmMjRjYzFhZjkzZDQ1ZThhYzZhMDYwID0gJCgnPGRpdiBpZD0iaHRtbF9lNTQ5YmQ3YTQ0ZjI0Y2MxYWY5M2Q0NWU4YWM2YTA2MCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QWdpbmNvdXJ0IE5vcnRoLCBMJiMzOTtBbW9yZWF1eCBFYXN0LCBNaWxsaWtlbiwgU3RlZWxlcyBFYXN0PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mZTk1NTk2ZGJmNzE0YjRlYjc5NWYxYjk4NmZjMGJhZi5zZXRDb250ZW50KGh0bWxfZTU0OWJkN2E0NGYyNGNjMWFmOTNkNDVlOGFjNmEwNjApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjAxYTFlYWYyZmU5NDA2Zjg2YTM2ZjgxMTlmN2QyZDEuYmluZFBvcHVwKHBvcHVwX2ZlOTU1OTZkYmY3MTRiNGViNzk1ZjFiOTg2ZmMwYmFmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2FjMjhiNThkMTQ3NjRhNzliOTNjMTQyZmRhMGQ4YzY4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzk5MDAzLC03OS4zMDU5NjY5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2JjYzU2ZWExMzcxMTQ3OWRhMDQ5MWZhMjI5Y2VmNmY4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzMwOGE5YWMyMTA1YjQ5Y2I4OTljMTcxMjg5YTA2YTE0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzI4ZjUzMzFmZTVkMDQ4MGNhMWFmYTM1ZDM1ZjdmOGI5ID0gJCgnPGRpdiBpZD0iaHRtbF8yOGY1MzMxZmU1ZDA0ODBjYTFhZmEzNWQzNWY3ZjhiOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TCYjMzk7QW1vcmVhdXggV2VzdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzA4YTlhYzIxMDViNDljYjg5OWMxNzEyODlhMDZhMTQuc2V0Q29udGVudChodG1sXzI4ZjUzMzFmZTVkMDQ4MGNhMWFmYTM1ZDM1ZjdmOGI5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2FjMjhiNThkMTQ3NjRhNzliOTNjMTQyZmRhMGQ4YzY4LmJpbmRQb3B1cChwb3B1cF8zMDhhOWFjMjEwNWI0OWNiODk5YzE3MTI4OWEwNmExNCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85NzEzNjA1ZDg5ODM0N2ExODA2N2Q4M2I0MTg4ZGVhNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjgwNDkzMDQsLTc5LjE2NTgzNzRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYmNjNTZlYTEzNzExNDc5ZGEwNDkxZmEyMjljZWY2ZjgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfODNmMWNlZTE4YTU1NDc0Y2EzY2EzN2Q3ZDFkOTk2ZmIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2UyNzNmODViOWExNGMyMTgyMjg4MWNlZmJlZDliZDcgPSAkKCc8ZGl2IGlkPSJodG1sXzNlMjczZjg1YjlhMTRjMjE4MjI4ODFjZWZiZWQ5YmQ3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5VcHBlciBSb3VnZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODNmMWNlZTE4YTU1NDc0Y2EzY2EzN2Q3ZDFkOTk2ZmIuc2V0Q29udGVudChodG1sXzNlMjczZjg1YjlhMTRjMjE4MjI4ODFjZWZiZWQ5YmQ3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzk3MTM2MDVkODk4MzQ3YTE4MDY3ZDgzYjQxODhkZWE1LmJpbmRQb3B1cChwb3B1cF84M2YxY2VlMThhNTU0NzRjYTNjYTM3ZDdkMWQ5OTZmYik7CgogICAgICAgICAgICAKICAgICAgICAKPC9zY3JpcHQ+\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x7f956528f358>"
      ]
     },
     "execution_count": 33,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# create map of Manhattan using latitude and longitude values\n",
    "map_scarborough = folium.Map(location=[s_latitude, s_longitude], zoom_start=11)\n",
    "\n",
    "# add markers to map\n",
    "for lat, lng, label in zip(scarborough_data['Latitude'], scarborough_data['Longitude'], scarborough_data['Neighborhood']):\n",
    "    label = folium.Popup(label, parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lng],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color='blue',\n",
    "        fill=True,\n",
    "        fill_color='#3186cc',\n",
    "        fill_opacity=0.7,\n",
    "        parse_html=False).add_to(map_scarborough)  \n",
    "    \n",
    "map_scarborough"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Let us explore first of the neighbourhood in Scarborough</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 38,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'Rouge, Malvern'"
      ]
     },
     "execution_count": 38,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_data.loc[0, 'Neighborhood']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 39,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Latitude and longitude values of Rouge, Malvern are 43.813464, -79.2059809.\n"
     ]
    }
   ],
   "source": [
    "neighborhood_latitude = scarborough_data.loc[0, 'Latitude'] # neighborhood latitude value\n",
    "neighborhood_longitude = scarborough_data.loc[0, 'Longitude'] # neighborhood longitude value\n",
    "\n",
    "neighborhood_name = scarborough_data.loc[0, 'Neighborhood'] # neighborhood name\n",
    "\n",
    "print('Latitude and longitude values of {} are {}, {}.'.format(neighborhood_name, \n",
    "                                                               neighborhood_latitude, \n",
    "                                                               neighborhood_longitude))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Now let us get the top 100 venues near Rouge and Malvern neighbourhoods within a radius of 500m</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 40,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'https://api.foursquare.com/v2/venues/explore?&client_id=PWE1OYYQJVRPR30NEY4DAP00OTIMREKUGQVZ5IMEFYJLE5Q4&client_secret=0BFI4OURUS4QRA0IMLBH31CINF0HGHJOMTMROEJW0DCIUQ3K&v=20180605&ll=43.813464,-79.2059809&radius=500&limit=100'"
      ]
     },
     "execution_count": 40,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "limit=100\n",
    "radius=500\n",
    "url='https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(CLIENT_ID, CLIENT_SECRET, VERSION, neighborhood_latitude, neighborhood_longitude, radius, limit)\n",
    "url"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 41,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{'meta': {'code': 200, 'requestId': '5cc130634c1f6743ae4c77e0'},\n",
       " 'response': {'groups': [{'items': [{'reasons': {'count': 0,\n",
       "       'items': [{'reasonName': 'globalInteractionReason',\n",
       "         'summary': 'This spot is popular',\n",
       "         'type': 'general'}]},\n",
       "      'referralId': 'e-0-5812603838fa4be91620e62d-0',\n",
       "      'venue': {'categories': [{'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/shops/realestate_',\n",
       "          'suffix': '.png'},\n",
       "         'id': '5454144b498ec1f095bff2f2',\n",
       "         'name': 'Construction & Landscaping',\n",
       "         'pluralName': 'Construction & Landscaping',\n",
       "         'primary': True,\n",
       "         'shortName': 'Construction'}],\n",
       "       'id': '5812603838fa4be91620e62d',\n",
       "       'location': {'address': '66 McKnight Dr',\n",
       "        'cc': 'CA',\n",
       "        'city': 'Scarborough',\n",
       "        'country': 'Canada',\n",
       "        'distance': 131,\n",
       "        'formattedAddress': ['66 McKnight Dr',\n",
       "         'Scarborough ON M1B 2Z3',\n",
       "         'Canada'],\n",
       "        'labeledLatLngs': [{'label': 'display',\n",
       "          'lat': 43.812284,\n",
       "          'lng': -79.206052}],\n",
       "        'lat': 43.812284,\n",
       "        'lng': -79.206052,\n",
       "        'postalCode': 'M1B 2Z3',\n",
       "        'state': 'ON'},\n",
       "       'name': 'Butler Drain & Waterproofing',\n",
       "       'photos': {'count': 0, 'groups': []}}},\n",
       "     {'reasons': {'count': 0,\n",
       "       'items': [{'reasonName': 'globalInteractionReason',\n",
       "         'summary': 'This spot is popular',\n",
       "         'type': 'general'}]},\n",
       "      'referralId': 'e-0-4c843fe12f1c236a23bf4a43-1',\n",
       "      'venue': {'categories': [{'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/food/indian_',\n",
       "          'suffix': '.png'},\n",
       "         'id': '4bf58dd8d48988d10f941735',\n",
       "         'name': 'Indian Restaurant',\n",
       "         'pluralName': 'Indian Restaurants',\n",
       "         'primary': True,\n",
       "         'shortName': 'Indian'}],\n",
       "       'id': '4c843fe12f1c236a23bf4a43',\n",
       "       'location': {'cc': 'CA',\n",
       "        'city': 'Toronto',\n",
       "        'country': 'Canada',\n",
       "        'distance': 497,\n",
       "        'formattedAddress': ['Toronto ON', 'Canada'],\n",
       "        'labeledLatLngs': [{'label': 'display',\n",
       "          'lat': 43.81675636512949,\n",
       "          'lng': -79.2101724737263}],\n",
       "        'lat': 43.81675636512949,\n",
       "        'lng': -79.2101724737263,\n",
       "        'state': 'ON'},\n",
       "       'name': 'Mezbaan',\n",
       "       'photos': {'count': 0, 'groups': []}}}],\n",
       "    'name': 'recommended',\n",
       "    'type': 'Recommended Places'}],\n",
       "  'headerFullLocation': 'Malvern, Toronto',\n",
       "  'headerLocation': 'Malvern',\n",
       "  'headerLocationGranularity': 'neighborhood',\n",
       "  'suggestedBounds': {'ne': {'lat': 43.817964004500006,\n",
       "    'lng': -79.19975637441742},\n",
       "   'sw': {'lat': 43.8089639955, 'lng': -79.21220542558258}},\n",
       "  'totalResults': 2,\n",
       "  'warning': {'text': \"There aren't a lot of results near you. Try something more general, reset your filters, or expand the search area.\"}}}"
      ]
     },
     "execution_count": 41,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "results = requests.get(url).json()\n",
    "results"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 42,
   "metadata": {},
   "outputs": [],
   "source": [
    "# function that extracts the category of the venue\n",
    "def get_category_type(row):\n",
    "    try:\n",
    "        categories_list = row['categories']\n",
    "    except:\n",
    "        categories_list = row['venue.categories']\n",
    "        \n",
    "    if len(categories_list) == 0:\n",
    "        return None\n",
    "    else:\n",
    "        return categories_list[0]['name']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 43,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Butler Drain &amp; Waterproofing</td>\n",
       "      <td>Construction &amp; Landscaping</td>\n",
       "      <td>43.812284</td>\n",
       "      <td>-79.206052</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Mezbaan</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "      <td>43.816756</td>\n",
       "      <td>-79.210172</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                           name                  categories        lat  \\\n",
       "0  Butler Drain & Waterproofing  Construction & Landscaping  43.812284   \n",
       "1                       Mezbaan           Indian Restaurant  43.816756   \n",
       "\n",
       "         lng  \n",
       "0 -79.206052  \n",
       "1 -79.210172  "
      ]
     },
     "execution_count": 43,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "venues = results['response']['groups'][0]['items']\n",
    "    \n",
    "nearby_venues = json_normalize(venues) # flatten JSON\n",
    "\n",
    "# filter columns\n",
    "filtered_columns = ['venue.name', 'venue.categories', 'venue.location.lat', 'venue.location.lng']\n",
    "nearby_venues =nearby_venues.loc[:, filtered_columns]\n",
    "\n",
    "# filter the category for each row\n",
    "nearby_venues['venue.categories'] = nearby_venues.apply(get_category_type, axis=1)\n",
    "\n",
    "# clean columns\n",
    "nearby_venues.columns = [col.split(\".\")[-1] for col in nearby_venues.columns]\n",
    "\n",
    "nearby_venues.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 44,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "2 venues were returned by Foursquare.\n"
     ]
    }
   ],
   "source": [
    "print('{} venues were returned by Foursquare.'.format(nearby_venues.shape[0]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 45,
   "metadata": {},
   "outputs": [],
   "source": [
    "def getNearbyVenues(names, latitudes, longitudes, radius=500):\n",
    "    \n",
    "    venues_list=[]\n",
    "    for name, lat, lng in zip(names, latitudes, longitudes):\n",
    "        print(name)\n",
    "            \n",
    "        # create the API request URL\n",
    "        url = 'https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(\n",
    "            CLIENT_ID, \n",
    "            CLIENT_SECRET, \n",
    "            VERSION, \n",
    "            lat, \n",
    "            lng, \n",
    "            radius, \n",
    "            limit)\n",
    "            \n",
    "        # make the GET request\n",
    "        results = requests.get(url).json()['response']['groups'][0]['items']\n",
    "        \n",
    "        # return only relevant information for each nearby venue\n",
    "        venues_list.append([(\n",
    "            name, \n",
    "            lat, \n",
    "            lng, \n",
    "            v['venue']['name'], \n",
    "            v['venue']['location']['lat'], \n",
    "            v['venue']['location']['lng'],  \n",
    "            v['venue']['categories'][0]['name']) for v in results])\n",
    "\n",
    "    nearby_venues = pd.DataFrame([item for venue_list in venues_list for item in venue_list])\n",
    "    nearby_venues.columns = ['Neighborhood', \n",
    "                  'Neighborhood Latitude', \n",
    "                  'Neighborhood Longitude', \n",
    "                  'Venue', \n",
    "                  'Venue Latitude', \n",
    "                  'Venue Longitude', \n",
    "                  'Venue Category']\n",
    "    \n",
    "    return(nearby_venues)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 46,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Rouge, Malvern\n",
      "Highland Creek, Rouge Hill, Port Union\n",
      "Guildwood, Morningside, West Hill\n",
      "Woburn\n",
      "Cedarbrae\n",
      "Scarborough Village\n",
      "East Birchmount Park, Ionview, Kennedy Park\n",
      "Clairlea, Golden Mile, Oakridge\n",
      "Cliffcrest, Cliffside, Scarborough Village West\n",
      "Birch Cliff, Cliffside West\n",
      "Dorset Park, Scarborough Town Centre, Wexford Heights\n",
      "Maryvale, Wexford\n",
      "Agincourt\n",
      "Clarks Corners, Sullivan, Tam O'Shanter\n",
      "Agincourt North, L'Amoreaux East, Milliken, Steeles East\n",
      "L'Amoreaux West\n",
      "Upper Rouge\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Neighborhood Latitude</th>\n",
       "      <th>Neighborhood Longitude</th>\n",
       "      <th>Venue</th>\n",
       "      <th>Venue Latitude</th>\n",
       "      <th>Venue Longitude</th>\n",
       "      <th>Venue Category</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>43.813464</td>\n",
       "      <td>-79.205981</td>\n",
       "      <td>Butler Drain &amp; Waterproofing</td>\n",
       "      <td>43.812284</td>\n",
       "      <td>-79.206052</td>\n",
       "      <td>Construction &amp; Landscaping</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>43.813464</td>\n",
       "      <td>-79.205981</td>\n",
       "      <td>Mezbaan</td>\n",
       "      <td>43.816756</td>\n",
       "      <td>-79.210172</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Gianni's</td>\n",
       "      <td>54.283031</td>\n",
       "      <td>-0.405256</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Eat Me Cafe</td>\n",
       "      <td>54.280697</td>\n",
       "      <td>-0.406778</td>\n",
       "      <td>Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Aldi</td>\n",
       "      <td>54.281965</td>\n",
       "      <td>-0.407199</td>\n",
       "      <td>Supermarket</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Pizza Hut</td>\n",
       "      <td>54.280872</td>\n",
       "      <td>-0.407803</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Domino's Pizza</td>\n",
       "      <td>54.283844</td>\n",
       "      <td>-0.403644</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Tesco Express</td>\n",
       "      <td>54.283772</td>\n",
       "      <td>-0.403359</td>\n",
       "      <td>Grocery Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Guildwood, Morningside, West Hill</td>\n",
       "      <td>43.753480</td>\n",
       "      <td>-79.179995</td>\n",
       "      <td>Grey Abbey Park</td>\n",
       "      <td>43.755101</td>\n",
       "      <td>-79.174862</td>\n",
       "      <td>Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>GoodLife Fitness Scarborough Cedarbrae Mall</td>\n",
       "      <td>43.758303</td>\n",
       "      <td>-79.228533</td>\n",
       "      <td>Gym</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Shoppers Drug Mart</td>\n",
       "      <td>43.760718</td>\n",
       "      <td>-79.224505</td>\n",
       "      <td>Pharmacy</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Pho Dau Bo</td>\n",
       "      <td>43.761286</td>\n",
       "      <td>-79.225170</td>\n",
       "      <td>Vietnamese Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Staples Cedarbrae</td>\n",
       "      <td>43.759851</td>\n",
       "      <td>-79.228335</td>\n",
       "      <td>Paper / Office Supplies Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>TD Canada Trust</td>\n",
       "      <td>43.761520</td>\n",
       "      <td>-79.226557</td>\n",
       "      <td>Bank</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Pizza Pizza</td>\n",
       "      <td>43.759321</td>\n",
       "      <td>-79.224929</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>The Beer Store</td>\n",
       "      <td>43.759714</td>\n",
       "      <td>-79.225487</td>\n",
       "      <td>Beer Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Dollarama</td>\n",
       "      <td>43.758511</td>\n",
       "      <td>-79.227047</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Tim Hortons</td>\n",
       "      <td>43.757813</td>\n",
       "      <td>-79.228442</td>\n",
       "      <td>Coffee Shop</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Toys\"R\"Us</td>\n",
       "      <td>43.758088</td>\n",
       "      <td>-79.227287</td>\n",
       "      <td>Toy / Game Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Burger King</td>\n",
       "      <td>43.759382</td>\n",
       "      <td>-79.225607</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Walmart</td>\n",
       "      <td>43.758245</td>\n",
       "      <td>-79.229066</td>\n",
       "      <td>Big Box Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Canadian Tire</td>\n",
       "      <td>43.758451</td>\n",
       "      <td>-79.226523</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Tim Hortons</td>\n",
       "      <td>43.760028</td>\n",
       "      <td>-79.226545</td>\n",
       "      <td>Coffee Shop</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>KFC</td>\n",
       "      <td>43.757943</td>\n",
       "      <td>-79.229483</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>India Town</td>\n",
       "      <td>43.760999</td>\n",
       "      <td>-79.225055</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Bus Stop: 54 &amp; 102</td>\n",
       "      <td>43.759720</td>\n",
       "      <td>-79.225416</td>\n",
       "      <td>Bus Station</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Gamestop</td>\n",
       "      <td>43.758684</td>\n",
       "      <td>-79.227793</td>\n",
       "      <td>Electronics Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>McDonald's</td>\n",
       "      <td>43.757675</td>\n",
       "      <td>-79.229170</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Hakim Optical</td>\n",
       "      <td>43.759540</td>\n",
       "      <td>-79.228964</td>\n",
       "      <td>Optical Shop</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>Dave's No Frills</td>\n",
       "      <td>43.757663</td>\n",
       "      <td>-79.230689</td>\n",
       "      <td>Grocery Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>105</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>Tim Hortons</td>\n",
       "      <td>43.785637</td>\n",
       "      <td>-79.279215</td>\n",
       "      <td>Coffee Shop</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>106</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>In Cheon House Korean &amp; Japanese Restaurant 인천관</td>\n",
       "      <td>43.786468</td>\n",
       "      <td>-79.275693</td>\n",
       "      <td>Korean Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>107</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>Maple Yip Seafood 陸羽海鮮酒家</td>\n",
       "      <td>43.784752</td>\n",
       "      <td>-79.277787</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>108</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>Beef Noodle Restaurant 老李牛肉麵</td>\n",
       "      <td>43.785937</td>\n",
       "      <td>-79.276031</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>109</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>Congee King</td>\n",
       "      <td>43.785908</td>\n",
       "      <td>-79.276042</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>110</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>Fisherman Villa 褔臨門</td>\n",
       "      <td>43.787108</td>\n",
       "      <td>-79.275931</td>\n",
       "      <td>Hong Kong Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>111</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>Green Bamboo 青竹</td>\n",
       "      <td>43.785346</td>\n",
       "      <td>-79.277640</td>\n",
       "      <td>Vietnamese Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>112</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>Lung Tung BBQ Food</td>\n",
       "      <td>43.784836</td>\n",
       "      <td>-79.277837</td>\n",
       "      <td>Asian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>113</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>Global Imperial Cuisine 國寶軒</td>\n",
       "      <td>43.786719</td>\n",
       "      <td>-79.274382</td>\n",
       "      <td>Cantonese Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>114</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.785353</td>\n",
       "      <td>-79.278549</td>\n",
       "      <td>Agincourt GO Station</td>\n",
       "      <td>43.785802</td>\n",
       "      <td>-79.284324</td>\n",
       "      <td>Train Station</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>115</th>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Gianni's</td>\n",
       "      <td>54.283031</td>\n",
       "      <td>-0.405256</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>116</th>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Eat Me Cafe</td>\n",
       "      <td>54.280697</td>\n",
       "      <td>-0.406778</td>\n",
       "      <td>Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>117</th>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Aldi</td>\n",
       "      <td>54.281965</td>\n",
       "      <td>-0.407199</td>\n",
       "      <td>Supermarket</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>118</th>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Pizza Hut</td>\n",
       "      <td>54.280872</td>\n",
       "      <td>-0.407803</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>119</th>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Domino's Pizza</td>\n",
       "      <td>54.283844</td>\n",
       "      <td>-0.403644</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>120</th>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Tesco Express</td>\n",
       "      <td>54.283772</td>\n",
       "      <td>-0.403359</td>\n",
       "      <td>Grocery Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>121</th>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Gianni's</td>\n",
       "      <td>54.283031</td>\n",
       "      <td>-0.405256</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>122</th>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Eat Me Cafe</td>\n",
       "      <td>54.280697</td>\n",
       "      <td>-0.406778</td>\n",
       "      <td>Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>123</th>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Aldi</td>\n",
       "      <td>54.281965</td>\n",
       "      <td>-0.407199</td>\n",
       "      <td>Supermarket</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>124</th>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Pizza Hut</td>\n",
       "      <td>54.280872</td>\n",
       "      <td>-0.407803</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>125</th>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Domino's Pizza</td>\n",
       "      <td>54.283844</td>\n",
       "      <td>-0.403644</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>126</th>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Tesco Express</td>\n",
       "      <td>54.283772</td>\n",
       "      <td>-0.403359</td>\n",
       "      <td>Grocery Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>127</th>\n",
       "      <td>L'Amoreaux West</td>\n",
       "      <td>43.799003</td>\n",
       "      <td>-79.305967</td>\n",
       "      <td>Buddy Cafe</td>\n",
       "      <td>43.799156</td>\n",
       "      <td>-79.306280</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>128</th>\n",
       "      <td>L'Amoreaux West</td>\n",
       "      <td>43.799003</td>\n",
       "      <td>-79.305967</td>\n",
       "      <td>Divine Wok Restaurant</td>\n",
       "      <td>43.799102</td>\n",
       "      <td>-79.306483</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>129</th>\n",
       "      <td>L'Amoreaux West</td>\n",
       "      <td>43.799003</td>\n",
       "      <td>-79.305967</td>\n",
       "      <td>Birchwood Plaza</td>\n",
       "      <td>43.799600</td>\n",
       "      <td>-79.306225</td>\n",
       "      <td>Shopping Mall</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>130</th>\n",
       "      <td>L'Amoreaux West</td>\n",
       "      <td>43.799003</td>\n",
       "      <td>-79.305967</td>\n",
       "      <td>Tim Hortons</td>\n",
       "      <td>43.802199</td>\n",
       "      <td>-79.308731</td>\n",
       "      <td>Coffee Shop</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>131</th>\n",
       "      <td>L'Amoreaux West</td>\n",
       "      <td>43.799003</td>\n",
       "      <td>-79.305967</td>\n",
       "      <td>L'Amoreaux Sports Centre</td>\n",
       "      <td>43.803002</td>\n",
       "      <td>-79.304475</td>\n",
       "      <td>Athletics &amp; Sports</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>132</th>\n",
       "      <td>Upper Rouge</td>\n",
       "      <td>43.804930</td>\n",
       "      <td>-79.165837</td>\n",
       "      <td>Dean Park</td>\n",
       "      <td>43.804364</td>\n",
       "      <td>-79.169159</td>\n",
       "      <td>Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>133</th>\n",
       "      <td>Upper Rouge</td>\n",
       "      <td>43.804930</td>\n",
       "      <td>-79.165837</td>\n",
       "      <td>Rexall I.D.A. Pan Pharmacy</td>\n",
       "      <td>43.804081</td>\n",
       "      <td>-79.169654</td>\n",
       "      <td>Pharmacy</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>134</th>\n",
       "      <td>Upper Rouge</td>\n",
       "      <td>43.804930</td>\n",
       "      <td>-79.165837</td>\n",
       "      <td>Paul's Breakfast &amp; Burgers</td>\n",
       "      <td>43.803835</td>\n",
       "      <td>-79.169825</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>135 rows × 7 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                          Neighborhood  Neighborhood Latitude  \\\n",
       "0                                       Rouge, Malvern              43.813464   \n",
       "1                                       Rouge, Malvern              43.813464   \n",
       "2               Highland Creek, Rouge Hill, Port Union              54.284760   \n",
       "3               Highland Creek, Rouge Hill, Port Union              54.284760   \n",
       "4               Highland Creek, Rouge Hill, Port Union              54.284760   \n",
       "5               Highland Creek, Rouge Hill, Port Union              54.284760   \n",
       "6               Highland Creek, Rouge Hill, Port Union              54.284760   \n",
       "7               Highland Creek, Rouge Hill, Port Union              54.284760   \n",
       "8                    Guildwood, Morningside, West Hill              43.753480   \n",
       "9                                               Woburn              43.759824   \n",
       "10                                              Woburn              43.759824   \n",
       "11                                              Woburn              43.759824   \n",
       "12                                              Woburn              43.759824   \n",
       "13                                              Woburn              43.759824   \n",
       "14                                              Woburn              43.759824   \n",
       "15                                              Woburn              43.759824   \n",
       "16                                              Woburn              43.759824   \n",
       "17                                              Woburn              43.759824   \n",
       "18                                              Woburn              43.759824   \n",
       "19                                              Woburn              43.759824   \n",
       "20                                              Woburn              43.759824   \n",
       "21                                              Woburn              43.759824   \n",
       "22                                              Woburn              43.759824   \n",
       "23                                              Woburn              43.759824   \n",
       "24                                              Woburn              43.759824   \n",
       "25                                              Woburn              43.759824   \n",
       "26                                              Woburn              43.759824   \n",
       "27                                              Woburn              43.759824   \n",
       "28                                              Woburn              43.759824   \n",
       "29                                              Woburn              43.759824   \n",
       "..                                                 ...                    ...   \n",
       "105                                          Agincourt              43.785353   \n",
       "106                                          Agincourt              43.785353   \n",
       "107                                          Agincourt              43.785353   \n",
       "108                                          Agincourt              43.785353   \n",
       "109                                          Agincourt              43.785353   \n",
       "110                                          Agincourt              43.785353   \n",
       "111                                          Agincourt              43.785353   \n",
       "112                                          Agincourt              43.785353   \n",
       "113                                          Agincourt              43.785353   \n",
       "114                                          Agincourt              43.785353   \n",
       "115            Clarks Corners, Sullivan, Tam O'Shanter              54.284760   \n",
       "116            Clarks Corners, Sullivan, Tam O'Shanter              54.284760   \n",
       "117            Clarks Corners, Sullivan, Tam O'Shanter              54.284760   \n",
       "118            Clarks Corners, Sullivan, Tam O'Shanter              54.284760   \n",
       "119            Clarks Corners, Sullivan, Tam O'Shanter              54.284760   \n",
       "120            Clarks Corners, Sullivan, Tam O'Shanter              54.284760   \n",
       "121  Agincourt North, L'Amoreaux East, Milliken, St...              54.284760   \n",
       "122  Agincourt North, L'Amoreaux East, Milliken, St...              54.284760   \n",
       "123  Agincourt North, L'Amoreaux East, Milliken, St...              54.284760   \n",
       "124  Agincourt North, L'Amoreaux East, Milliken, St...              54.284760   \n",
       "125  Agincourt North, L'Amoreaux East, Milliken, St...              54.284760   \n",
       "126  Agincourt North, L'Amoreaux East, Milliken, St...              54.284760   \n",
       "127                                    L'Amoreaux West              43.799003   \n",
       "128                                    L'Amoreaux West              43.799003   \n",
       "129                                    L'Amoreaux West              43.799003   \n",
       "130                                    L'Amoreaux West              43.799003   \n",
       "131                                    L'Amoreaux West              43.799003   \n",
       "132                                        Upper Rouge              43.804930   \n",
       "133                                        Upper Rouge              43.804930   \n",
       "134                                        Upper Rouge              43.804930   \n",
       "\n",
       "     Neighborhood Longitude                                            Venue  \\\n",
       "0                -79.205981                     Butler Drain & Waterproofing   \n",
       "1                -79.205981                                          Mezbaan   \n",
       "2                 -0.409034                                         Gianni's   \n",
       "3                 -0.409034                                      Eat Me Cafe   \n",
       "4                 -0.409034                                             Aldi   \n",
       "5                 -0.409034                                        Pizza Hut   \n",
       "6                 -0.409034                                   Domino's Pizza   \n",
       "7                 -0.409034                                    Tesco Express   \n",
       "8                -79.179995                                  Grey Abbey Park   \n",
       "9                -79.225291      GoodLife Fitness Scarborough Cedarbrae Mall   \n",
       "10               -79.225291                               Shoppers Drug Mart   \n",
       "11               -79.225291                                       Pho Dau Bo   \n",
       "12               -79.225291                                Staples Cedarbrae   \n",
       "13               -79.225291                                  TD Canada Trust   \n",
       "14               -79.225291                                      Pizza Pizza   \n",
       "15               -79.225291                                   The Beer Store   \n",
       "16               -79.225291                                        Dollarama   \n",
       "17               -79.225291                                      Tim Hortons   \n",
       "18               -79.225291                                        Toys\"R\"Us   \n",
       "19               -79.225291                                      Burger King   \n",
       "20               -79.225291                                          Walmart   \n",
       "21               -79.225291                                    Canadian Tire   \n",
       "22               -79.225291                                      Tim Hortons   \n",
       "23               -79.225291                                              KFC   \n",
       "24               -79.225291                                       India Town   \n",
       "25               -79.225291                               Bus Stop: 54 & 102   \n",
       "26               -79.225291                                         Gamestop   \n",
       "27               -79.225291                                       McDonald's   \n",
       "28               -79.225291                                    Hakim Optical   \n",
       "29               -79.225291                                 Dave's No Frills   \n",
       "..                      ...                                              ...   \n",
       "105              -79.278549                                      Tim Hortons   \n",
       "106              -79.278549  In Cheon House Korean & Japanese Restaurant 인천관   \n",
       "107              -79.278549                         Maple Yip Seafood 陸羽海鮮酒家   \n",
       "108              -79.278549                     Beef Noodle Restaurant 老李牛肉麵   \n",
       "109              -79.278549                                      Congee King   \n",
       "110              -79.278549                              Fisherman Villa 褔臨門   \n",
       "111              -79.278549                                  Green Bamboo 青竹   \n",
       "112              -79.278549                               Lung Tung BBQ Food   \n",
       "113              -79.278549                      Global Imperial Cuisine 國寶軒   \n",
       "114              -79.278549                             Agincourt GO Station   \n",
       "115               -0.409034                                         Gianni's   \n",
       "116               -0.409034                                      Eat Me Cafe   \n",
       "117               -0.409034                                             Aldi   \n",
       "118               -0.409034                                        Pizza Hut   \n",
       "119               -0.409034                                   Domino's Pizza   \n",
       "120               -0.409034                                    Tesco Express   \n",
       "121               -0.409034                                         Gianni's   \n",
       "122               -0.409034                                      Eat Me Cafe   \n",
       "123               -0.409034                                             Aldi   \n",
       "124               -0.409034                                        Pizza Hut   \n",
       "125               -0.409034                                   Domino's Pizza   \n",
       "126               -0.409034                                    Tesco Express   \n",
       "127              -79.305967                                       Buddy Cafe   \n",
       "128              -79.305967                            Divine Wok Restaurant   \n",
       "129              -79.305967                                  Birchwood Plaza   \n",
       "130              -79.305967                                      Tim Hortons   \n",
       "131              -79.305967                         L'Amoreaux Sports Centre   \n",
       "132              -79.165837                                        Dean Park   \n",
       "133              -79.165837                       Rexall I.D.A. Pan Pharmacy   \n",
       "134              -79.165837                       Paul's Breakfast & Burgers   \n",
       "\n",
       "     Venue Latitude  Venue Longitude                 Venue Category  \n",
       "0         43.812284       -79.206052     Construction & Landscaping  \n",
       "1         43.816756       -79.210172              Indian Restaurant  \n",
       "2         54.283031        -0.405256             Italian Restaurant  \n",
       "3         54.280697        -0.406778                     Restaurant  \n",
       "4         54.281965        -0.407199                    Supermarket  \n",
       "5         54.280872        -0.407803                    Pizza Place  \n",
       "6         54.283844        -0.403644                    Pizza Place  \n",
       "7         54.283772        -0.403359                  Grocery Store  \n",
       "8         43.755101       -79.174862                           Park  \n",
       "9         43.758303       -79.228533                            Gym  \n",
       "10        43.760718       -79.224505                       Pharmacy  \n",
       "11        43.761286       -79.225170          Vietnamese Restaurant  \n",
       "12        43.759851       -79.228335  Paper / Office Supplies Store  \n",
       "13        43.761520       -79.226557                           Bank  \n",
       "14        43.759321       -79.224929                    Pizza Place  \n",
       "15        43.759714       -79.225487                     Beer Store  \n",
       "16        43.758511       -79.227047                 Discount Store  \n",
       "17        43.757813       -79.228442                    Coffee Shop  \n",
       "18        43.758088       -79.227287               Toy / Game Store  \n",
       "19        43.759382       -79.225607           Fast Food Restaurant  \n",
       "20        43.758245       -79.229066                  Big Box Store  \n",
       "21        43.758451       -79.226523         Furniture / Home Store  \n",
       "22        43.760028       -79.226545                    Coffee Shop  \n",
       "23        43.757943       -79.229483           Fast Food Restaurant  \n",
       "24        43.760999       -79.225055              Indian Restaurant  \n",
       "25        43.759720       -79.225416                    Bus Station  \n",
       "26        43.758684       -79.227793              Electronics Store  \n",
       "27        43.757675       -79.229170           Fast Food Restaurant  \n",
       "28        43.759540       -79.228964                   Optical Shop  \n",
       "29        43.757663       -79.230689                  Grocery Store  \n",
       "..              ...              ...                            ...  \n",
       "105       43.785637       -79.279215                    Coffee Shop  \n",
       "106       43.786468       -79.275693              Korean Restaurant  \n",
       "107       43.784752       -79.277787             Chinese Restaurant  \n",
       "108       43.785937       -79.276031             Chinese Restaurant  \n",
       "109       43.785908       -79.276042             Chinese Restaurant  \n",
       "110       43.787108       -79.275931           Hong Kong Restaurant  \n",
       "111       43.785346       -79.277640          Vietnamese Restaurant  \n",
       "112       43.784836       -79.277837               Asian Restaurant  \n",
       "113       43.786719       -79.274382           Cantonese Restaurant  \n",
       "114       43.785802       -79.284324                  Train Station  \n",
       "115       54.283031        -0.405256             Italian Restaurant  \n",
       "116       54.280697        -0.406778                     Restaurant  \n",
       "117       54.281965        -0.407199                    Supermarket  \n",
       "118       54.280872        -0.407803                    Pizza Place  \n",
       "119       54.283844        -0.403644                    Pizza Place  \n",
       "120       54.283772        -0.403359                  Grocery Store  \n",
       "121       54.283031        -0.405256             Italian Restaurant  \n",
       "122       54.280697        -0.406778                     Restaurant  \n",
       "123       54.281965        -0.407199                    Supermarket  \n",
       "124       54.280872        -0.407803                    Pizza Place  \n",
       "125       54.283844        -0.403644                    Pizza Place  \n",
       "126       54.283772        -0.403359                  Grocery Store  \n",
       "127       43.799156       -79.306280             Chinese Restaurant  \n",
       "128       43.799102       -79.306483             Chinese Restaurant  \n",
       "129       43.799600       -79.306225                  Shopping Mall  \n",
       "130       43.802199       -79.308731                    Coffee Shop  \n",
       "131       43.803002       -79.304475             Athletics & Sports  \n",
       "132       43.804364       -79.169159                           Park  \n",
       "133       43.804081       -79.169654                       Pharmacy  \n",
       "134       43.803835       -79.169825           Fast Food Restaurant  \n",
       "\n",
       "[135 rows x 7 columns]"
      ]
     },
     "execution_count": 46,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_venues = getNearbyVenues(names=scarborough_data['Neighborhood'],\n",
    "                                   latitudes=scarborough_data['Latitude'],\n",
    "                                   longitudes=scarborough_data['Longitude']\n",
    "                                  )\n",
    "\n",
    "scarborough_venues"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 47,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "(135, 7)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Neighborhood Latitude</th>\n",
       "      <th>Neighborhood Longitude</th>\n",
       "      <th>Venue</th>\n",
       "      <th>Venue Latitude</th>\n",
       "      <th>Venue Longitude</th>\n",
       "      <th>Venue Category</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>43.813464</td>\n",
       "      <td>-79.205981</td>\n",
       "      <td>Butler Drain &amp; Waterproofing</td>\n",
       "      <td>43.812284</td>\n",
       "      <td>-79.206052</td>\n",
       "      <td>Construction &amp; Landscaping</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>43.813464</td>\n",
       "      <td>-79.205981</td>\n",
       "      <td>Mezbaan</td>\n",
       "      <td>43.816756</td>\n",
       "      <td>-79.210172</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Gianni's</td>\n",
       "      <td>54.283031</td>\n",
       "      <td>-0.405256</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Eat Me Cafe</td>\n",
       "      <td>54.280697</td>\n",
       "      <td>-0.406778</td>\n",
       "      <td>Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>Aldi</td>\n",
       "      <td>54.281965</td>\n",
       "      <td>-0.407199</td>\n",
       "      <td>Supermarket</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                             Neighborhood  Neighborhood Latitude  \\\n",
       "0                          Rouge, Malvern              43.813464   \n",
       "1                          Rouge, Malvern              43.813464   \n",
       "2  Highland Creek, Rouge Hill, Port Union              54.284760   \n",
       "3  Highland Creek, Rouge Hill, Port Union              54.284760   \n",
       "4  Highland Creek, Rouge Hill, Port Union              54.284760   \n",
       "\n",
       "   Neighborhood Longitude                         Venue  Venue Latitude  \\\n",
       "0              -79.205981  Butler Drain & Waterproofing       43.812284   \n",
       "1              -79.205981                       Mezbaan       43.816756   \n",
       "2               -0.409034                      Gianni's       54.283031   \n",
       "3               -0.409034                   Eat Me Cafe       54.280697   \n",
       "4               -0.409034                          Aldi       54.281965   \n",
       "\n",
       "   Venue Longitude              Venue Category  \n",
       "0       -79.206052  Construction & Landscaping  \n",
       "1       -79.210172           Indian Restaurant  \n",
       "2        -0.405256          Italian Restaurant  \n",
       "3        -0.406778                  Restaurant  \n",
       "4        -0.407199                 Supermarket  "
      ]
     },
     "execution_count": 47,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "print(scarborough_venues.shape)\n",
    "scarborough_venues.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Checking the venues returned for each neighborhood"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 48,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood Latitude</th>\n",
       "      <th>Neighborhood Longitude</th>\n",
       "      <th>Venue</th>\n",
       "      <th>Venue Latitude</th>\n",
       "      <th>Venue Longitude</th>\n",
       "      <th>Venue Category</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Neighborhood</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Agincourt</th>\n",
       "      <td>11</td>\n",
       "      <td>11</td>\n",
       "      <td>11</td>\n",
       "      <td>11</td>\n",
       "      <td>11</td>\n",
       "      <td>11</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Agincourt North, L'Amoreaux East, Milliken, Steeles East</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Birch Cliff, Cliffside West</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Cedarbrae</th>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Clairlea, Golden Mile, Oakridge</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Clarks Corners, Sullivan, Tam O'Shanter</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Cliffcrest, Cliffside, Scarborough Village West</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Dorset Park, Scarborough Town Centre, Wexford Heights</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>East Birchmount Park, Ionview, Kennedy Park</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Guildwood, Morningside, West Hill</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Highland Creek, Rouge Hill, Port Union</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>L'Amoreaux West</th>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Maryvale, Wexford</th>\n",
       "      <td>12</td>\n",
       "      <td>12</td>\n",
       "      <td>12</td>\n",
       "      <td>12</td>\n",
       "      <td>12</td>\n",
       "      <td>12</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Rouge, Malvern</th>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Scarborough Village</th>\n",
       "      <td>9</td>\n",
       "      <td>9</td>\n",
       "      <td>9</td>\n",
       "      <td>9</td>\n",
       "      <td>9</td>\n",
       "      <td>9</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Upper Rouge</th>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Woburn</th>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                    Neighborhood Latitude  \\\n",
       "Neighborhood                                                                \n",
       "Agincourt                                                              11   \n",
       "Agincourt North, L'Amoreaux East, Milliken, Ste...                      6   \n",
       "Birch Cliff, Cliffside West                                             6   \n",
       "Cedarbrae                                                              23   \n",
       "Clairlea, Golden Mile, Oakridge                                         6   \n",
       "Clarks Corners, Sullivan, Tam O'Shanter                                 6   \n",
       "Cliffcrest, Cliffside, Scarborough Village West                         6   \n",
       "Dorset Park, Scarborough Town Centre, Wexford H...                      6   \n",
       "East Birchmount Park, Ionview, Kennedy Park                             6   \n",
       "Guildwood, Morningside, West Hill                                       1   \n",
       "Highland Creek, Rouge Hill, Port Union                                  6   \n",
       "L'Amoreaux West                                                         5   \n",
       "Maryvale, Wexford                                                      12   \n",
       "Rouge, Malvern                                                          2   \n",
       "Scarborough Village                                                     9   \n",
       "Upper Rouge                                                             3   \n",
       "Woburn                                                                 21   \n",
       "\n",
       "                                                    Neighborhood Longitude  \\\n",
       "Neighborhood                                                                 \n",
       "Agincourt                                                               11   \n",
       "Agincourt North, L'Amoreaux East, Milliken, Ste...                       6   \n",
       "Birch Cliff, Cliffside West                                              6   \n",
       "Cedarbrae                                                               23   \n",
       "Clairlea, Golden Mile, Oakridge                                          6   \n",
       "Clarks Corners, Sullivan, Tam O'Shanter                                  6   \n",
       "Cliffcrest, Cliffside, Scarborough Village West                          6   \n",
       "Dorset Park, Scarborough Town Centre, Wexford H...                       6   \n",
       "East Birchmount Park, Ionview, Kennedy Park                              6   \n",
       "Guildwood, Morningside, West Hill                                        1   \n",
       "Highland Creek, Rouge Hill, Port Union                                   6   \n",
       "L'Amoreaux West                                                          5   \n",
       "Maryvale, Wexford                                                       12   \n",
       "Rouge, Malvern                                                           2   \n",
       "Scarborough Village                                                      9   \n",
       "Upper Rouge                                                              3   \n",
       "Woburn                                                                  21   \n",
       "\n",
       "                                                    Venue  Venue Latitude  \\\n",
       "Neighborhood                                                                \n",
       "Agincourt                                              11              11   \n",
       "Agincourt North, L'Amoreaux East, Milliken, Ste...      6               6   \n",
       "Birch Cliff, Cliffside West                             6               6   \n",
       "Cedarbrae                                              23              23   \n",
       "Clairlea, Golden Mile, Oakridge                         6               6   \n",
       "Clarks Corners, Sullivan, Tam O'Shanter                 6               6   \n",
       "Cliffcrest, Cliffside, Scarborough Village West         6               6   \n",
       "Dorset Park, Scarborough Town Centre, Wexford H...      6               6   \n",
       "East Birchmount Park, Ionview, Kennedy Park             6               6   \n",
       "Guildwood, Morningside, West Hill                       1               1   \n",
       "Highland Creek, Rouge Hill, Port Union                  6               6   \n",
       "L'Amoreaux West                                         5               5   \n",
       "Maryvale, Wexford                                      12              12   \n",
       "Rouge, Malvern                                          2               2   \n",
       "Scarborough Village                                     9               9   \n",
       "Upper Rouge                                             3               3   \n",
       "Woburn                                                 21              21   \n",
       "\n",
       "                                                    Venue Longitude  \\\n",
       "Neighborhood                                                          \n",
       "Agincourt                                                        11   \n",
       "Agincourt North, L'Amoreaux East, Milliken, Ste...                6   \n",
       "Birch Cliff, Cliffside West                                       6   \n",
       "Cedarbrae                                                        23   \n",
       "Clairlea, Golden Mile, Oakridge                                   6   \n",
       "Clarks Corners, Sullivan, Tam O'Shanter                           6   \n",
       "Cliffcrest, Cliffside, Scarborough Village West                   6   \n",
       "Dorset Park, Scarborough Town Centre, Wexford H...                6   \n",
       "East Birchmount Park, Ionview, Kennedy Park                       6   \n",
       "Guildwood, Morningside, West Hill                                 1   \n",
       "Highland Creek, Rouge Hill, Port Union                            6   \n",
       "L'Amoreaux West                                                   5   \n",
       "Maryvale, Wexford                                                12   \n",
       "Rouge, Malvern                                                    2   \n",
       "Scarborough Village                                               9   \n",
       "Upper Rouge                                                       3   \n",
       "Woburn                                                           21   \n",
       "\n",
       "                                                    Venue Category  \n",
       "Neighborhood                                                        \n",
       "Agincourt                                                       11  \n",
       "Agincourt North, L'Amoreaux East, Milliken, Ste...               6  \n",
       "Birch Cliff, Cliffside West                                      6  \n",
       "Cedarbrae                                                       23  \n",
       "Clairlea, Golden Mile, Oakridge                                  6  \n",
       "Clarks Corners, Sullivan, Tam O'Shanter                          6  \n",
       "Cliffcrest, Cliffside, Scarborough Village West                  6  \n",
       "Dorset Park, Scarborough Town Centre, Wexford H...               6  \n",
       "East Birchmount Park, Ionview, Kennedy Park                      6  \n",
       "Guildwood, Morningside, West Hill                                1  \n",
       "Highland Creek, Rouge Hill, Port Union                           6  \n",
       "L'Amoreaux West                                                  5  \n",
       "Maryvale, Wexford                                               12  \n",
       "Rouge, Malvern                                                   2  \n",
       "Scarborough Village                                              9  \n",
       "Upper Rouge                                                      3  \n",
       "Woburn                                                          21  "
      ]
     },
     "execution_count": 48,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_venues.groupby('Neighborhood').count()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Finding the unique catgories returned"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 49,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "There are 44 uniques categories.\n"
     ]
    }
   ],
   "source": [
    "print('There are {} uniques categories.'.format(len(scarborough_venues['Venue Category'].unique())))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Let us now analyze each neighbourhood</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 50,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Arts &amp; Crafts Store</th>\n",
       "      <th>Asian Restaurant</th>\n",
       "      <th>Athletics &amp; Sports</th>\n",
       "      <th>Badminton Court</th>\n",
       "      <th>Bank</th>\n",
       "      <th>Beer Store</th>\n",
       "      <th>Big Box Store</th>\n",
       "      <th>Breakfast Spot</th>\n",
       "      <th>Bus Station</th>\n",
       "      <th>...</th>\n",
       "      <th>Restaurant</th>\n",
       "      <th>Shopping Mall</th>\n",
       "      <th>Soccer Field</th>\n",
       "      <th>Steakhouse</th>\n",
       "      <th>Supermarket</th>\n",
       "      <th>Toy / Game Store</th>\n",
       "      <th>Train Station</th>\n",
       "      <th>Video Game Store</th>\n",
       "      <th>Vietnamese Restaurant</th>\n",
       "      <th>Warehouse Store</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 45 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                             Neighborhood  Arts & Crafts Store  \\\n",
       "0                          Rouge, Malvern                    0   \n",
       "1                          Rouge, Malvern                    0   \n",
       "2  Highland Creek, Rouge Hill, Port Union                    0   \n",
       "3  Highland Creek, Rouge Hill, Port Union                    0   \n",
       "4  Highland Creek, Rouge Hill, Port Union                    0   \n",
       "\n",
       "   Asian Restaurant  Athletics & Sports  Badminton Court  Bank  Beer Store  \\\n",
       "0                 0                   0                0     0           0   \n",
       "1                 0                   0                0     0           0   \n",
       "2                 0                   0                0     0           0   \n",
       "3                 0                   0                0     0           0   \n",
       "4                 0                   0                0     0           0   \n",
       "\n",
       "   Big Box Store  Breakfast Spot  Bus Station       ...         Restaurant  \\\n",
       "0              0               0            0       ...                  0   \n",
       "1              0               0            0       ...                  0   \n",
       "2              0               0            0       ...                  0   \n",
       "3              0               0            0       ...                  1   \n",
       "4              0               0            0       ...                  0   \n",
       "\n",
       "   Shopping Mall  Soccer Field  Steakhouse  Supermarket  Toy / Game Store  \\\n",
       "0              0             0           0            0                 0   \n",
       "1              0             0           0            0                 0   \n",
       "2              0             0           0            0                 0   \n",
       "3              0             0           0            0                 0   \n",
       "4              0             0           0            1                 0   \n",
       "\n",
       "   Train Station  Video Game Store  Vietnamese Restaurant  Warehouse Store  \n",
       "0              0                 0                      0                0  \n",
       "1              0                 0                      0                0  \n",
       "2              0                 0                      0                0  \n",
       "3              0                 0                      0                0  \n",
       "4              0                 0                      0                0  \n",
       "\n",
       "[5 rows x 45 columns]"
      ]
     },
     "execution_count": 50,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# one hot encoding\n",
    "scarborough_onehot = pd.get_dummies(scarborough_venues[['Venue Category']], prefix=\"\", prefix_sep=\"\")\n",
    "\n",
    "# add neighborhood column back to dataframe\n",
    "scarborough_onehot['Neighborhood'] = scarborough_venues['Neighborhood'] \n",
    "\n",
    "# move neighborhood column to the first column\n",
    "fixed_columns = [scarborough_onehot.columns[-1]] + list(scarborough_onehot.columns[:-1])\n",
    "scarborough_onehot = scarborough_onehot[fixed_columns]\n",
    "\n",
    "scarborough_onehot.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 51,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(135, 45)"
      ]
     },
     "execution_count": 51,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_onehot.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 52,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Arts &amp; Crafts Store</th>\n",
       "      <th>Asian Restaurant</th>\n",
       "      <th>Athletics &amp; Sports</th>\n",
       "      <th>Badminton Court</th>\n",
       "      <th>Bank</th>\n",
       "      <th>Beer Store</th>\n",
       "      <th>Big Box Store</th>\n",
       "      <th>Breakfast Spot</th>\n",
       "      <th>Bus Station</th>\n",
       "      <th>...</th>\n",
       "      <th>Restaurant</th>\n",
       "      <th>Shopping Mall</th>\n",
       "      <th>Soccer Field</th>\n",
       "      <th>Steakhouse</th>\n",
       "      <th>Supermarket</th>\n",
       "      <th>Toy / Game Store</th>\n",
       "      <th>Train Station</th>\n",
       "      <th>Video Game Store</th>\n",
       "      <th>Vietnamese Restaurant</th>\n",
       "      <th>Warehouse Store</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.181818</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.090909</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.090909</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Birch Cliff, Cliffside West</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Cedarbrae</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.043478</td>\n",
       "      <td>0.043478</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.043478</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.043478</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.043478</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Clairlea, Golden Mile, Oakridge</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Cliffcrest, Cliffside, Scarborough Village West</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Dorset Park, Scarborough Town Centre, Wexford ...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>East Birchmount Park, Ionview, Kennedy Park</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Guildwood, Morningside, West Hill</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.166667</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>L'Amoreaux West</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.2</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.200000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Maryvale, Wexford</td>\n",
       "      <td>0.083333</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.083333</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.083333</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.083333</td>\n",
       "      <td>0.083333</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.083333</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>Scarborough Village</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>Upper Rouge</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.047619</td>\n",
       "      <td>0.047619</td>\n",
       "      <td>0.047619</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.047619</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.047619</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.047619</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>17 rows × 45 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                         Neighborhood  Arts & Crafts Store  \\\n",
       "0                                           Agincourt             0.000000   \n",
       "1   Agincourt North, L'Amoreaux East, Milliken, St...             0.000000   \n",
       "2                         Birch Cliff, Cliffside West             0.000000   \n",
       "3                                           Cedarbrae             0.000000   \n",
       "4                     Clairlea, Golden Mile, Oakridge             0.000000   \n",
       "5             Clarks Corners, Sullivan, Tam O'Shanter             0.000000   \n",
       "6     Cliffcrest, Cliffside, Scarborough Village West             0.000000   \n",
       "7   Dorset Park, Scarborough Town Centre, Wexford ...             0.000000   \n",
       "8         East Birchmount Park, Ionview, Kennedy Park             0.000000   \n",
       "9                   Guildwood, Morningside, West Hill             0.000000   \n",
       "10             Highland Creek, Rouge Hill, Port Union             0.000000   \n",
       "11                                    L'Amoreaux West             0.000000   \n",
       "12                                  Maryvale, Wexford             0.083333   \n",
       "13                                     Rouge, Malvern             0.000000   \n",
       "14                                Scarborough Village             0.000000   \n",
       "15                                        Upper Rouge             0.000000   \n",
       "16                                             Woburn             0.000000   \n",
       "\n",
       "    Asian Restaurant  Athletics & Sports  Badminton Court      Bank  \\\n",
       "0           0.181818                 0.0         0.000000  0.000000   \n",
       "1           0.000000                 0.0         0.000000  0.000000   \n",
       "2           0.000000                 0.0         0.000000  0.000000   \n",
       "3           0.000000                 0.0         0.000000  0.000000   \n",
       "4           0.000000                 0.0         0.000000  0.000000   \n",
       "5           0.000000                 0.0         0.000000  0.000000   \n",
       "6           0.000000                 0.0         0.000000  0.000000   \n",
       "7           0.000000                 0.0         0.000000  0.000000   \n",
       "8           0.000000                 0.0         0.000000  0.000000   \n",
       "9           0.000000                 0.0         0.000000  0.000000   \n",
       "10          0.000000                 0.0         0.000000  0.000000   \n",
       "11          0.000000                 0.2         0.000000  0.000000   \n",
       "12          0.000000                 0.0         0.083333  0.000000   \n",
       "13          0.000000                 0.0         0.000000  0.000000   \n",
       "14          0.000000                 0.0         0.000000  0.000000   \n",
       "15          0.000000                 0.0         0.000000  0.000000   \n",
       "16          0.000000                 0.0         0.000000  0.047619   \n",
       "\n",
       "    Beer Store  Big Box Store  Breakfast Spot  Bus Station       ...         \\\n",
       "0     0.000000       0.000000        0.000000     0.000000       ...          \n",
       "1     0.000000       0.000000        0.000000     0.000000       ...          \n",
       "2     0.000000       0.000000        0.000000     0.000000       ...          \n",
       "3     0.043478       0.043478        0.000000     0.000000       ...          \n",
       "4     0.000000       0.000000        0.000000     0.000000       ...          \n",
       "5     0.000000       0.000000        0.000000     0.000000       ...          \n",
       "6     0.000000       0.000000        0.000000     0.000000       ...          \n",
       "7     0.000000       0.000000        0.000000     0.000000       ...          \n",
       "8     0.000000       0.000000        0.000000     0.000000       ...          \n",
       "9     0.000000       0.000000        0.000000     0.000000       ...          \n",
       "10    0.000000       0.000000        0.000000     0.000000       ...          \n",
       "11    0.000000       0.000000        0.000000     0.000000       ...          \n",
       "12    0.000000       0.000000        0.083333     0.000000       ...          \n",
       "13    0.000000       0.000000        0.000000     0.000000       ...          \n",
       "14    0.000000       0.000000        0.000000     0.000000       ...          \n",
       "15    0.000000       0.000000        0.000000     0.000000       ...          \n",
       "16    0.047619       0.047619        0.000000     0.047619       ...          \n",
       "\n",
       "    Restaurant  Shopping Mall  Soccer Field  Steakhouse  Supermarket  \\\n",
       "0     0.000000       0.000000      0.000000    0.000000     0.000000   \n",
       "1     0.166667       0.000000      0.000000    0.000000     0.166667   \n",
       "2     0.166667       0.000000      0.000000    0.000000     0.166667   \n",
       "3     0.000000       0.043478      0.000000    0.000000     0.000000   \n",
       "4     0.166667       0.000000      0.000000    0.000000     0.166667   \n",
       "5     0.166667       0.000000      0.000000    0.000000     0.166667   \n",
       "6     0.166667       0.000000      0.000000    0.000000     0.166667   \n",
       "7     0.166667       0.000000      0.000000    0.000000     0.166667   \n",
       "8     0.166667       0.000000      0.000000    0.000000     0.166667   \n",
       "9     0.000000       0.000000      0.000000    0.000000     0.000000   \n",
       "10    0.166667       0.000000      0.000000    0.000000     0.166667   \n",
       "11    0.000000       0.200000      0.000000    0.000000     0.000000   \n",
       "12    0.000000       0.000000      0.083333    0.083333     0.000000   \n",
       "13    0.000000       0.000000      0.000000    0.000000     0.000000   \n",
       "14    0.000000       0.000000      0.000000    0.000000     0.000000   \n",
       "15    0.000000       0.000000      0.000000    0.000000     0.000000   \n",
       "16    0.000000       0.000000      0.000000    0.000000     0.000000   \n",
       "\n",
       "    Toy / Game Store  Train Station  Video Game Store  Vietnamese Restaurant  \\\n",
       "0           0.000000       0.090909          0.000000               0.090909   \n",
       "1           0.000000       0.000000          0.000000               0.000000   \n",
       "2           0.000000       0.000000          0.000000               0.000000   \n",
       "3           0.043478       0.000000          0.043478               0.000000   \n",
       "4           0.000000       0.000000          0.000000               0.000000   \n",
       "5           0.000000       0.000000          0.000000               0.000000   \n",
       "6           0.000000       0.000000          0.000000               0.000000   \n",
       "7           0.000000       0.000000          0.000000               0.000000   \n",
       "8           0.000000       0.000000          0.000000               0.000000   \n",
       "9           0.000000       0.000000          0.000000               0.000000   \n",
       "10          0.000000       0.000000          0.000000               0.000000   \n",
       "11          0.000000       0.000000          0.000000               0.000000   \n",
       "12          0.000000       0.000000          0.000000               0.000000   \n",
       "13          0.000000       0.000000          0.000000               0.000000   \n",
       "14          0.000000       0.000000          0.000000               0.000000   \n",
       "15          0.000000       0.000000          0.000000               0.000000   \n",
       "16          0.047619       0.000000          0.000000               0.047619   \n",
       "\n",
       "    Warehouse Store  \n",
       "0          0.000000  \n",
       "1          0.000000  \n",
       "2          0.000000  \n",
       "3          0.000000  \n",
       "4          0.000000  \n",
       "5          0.000000  \n",
       "6          0.000000  \n",
       "7          0.000000  \n",
       "8          0.000000  \n",
       "9          0.000000  \n",
       "10         0.000000  \n",
       "11         0.000000  \n",
       "12         0.083333  \n",
       "13         0.000000  \n",
       "14         0.000000  \n",
       "15         0.000000  \n",
       "16         0.000000  \n",
       "\n",
       "[17 rows x 45 columns]"
      ]
     },
     "execution_count": 52,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_grouped = scarborough_onehot.groupby('Neighborhood').mean().reset_index()\n",
    "scarborough_grouped"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 53,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(17, 45)"
      ]
     },
     "execution_count": 53,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_grouped.shape"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Finding the top 5 venues in each neighbourhood</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 54,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "----Agincourt----\n",
      "                  venue  freq\n",
      "0    Chinese Restaurant  0.27\n",
      "1      Asian Restaurant  0.18\n",
      "2  Hong Kong Restaurant  0.09\n",
      "3  Cantonese Restaurant  0.09\n",
      "4           Coffee Shop  0.09\n",
      "\n",
      "\n",
      "----Agincourt North, L'Amoreaux East, Milliken, Steeles East----\n",
      "                venue  freq\n",
      "0         Pizza Place  0.33\n",
      "1  Italian Restaurant  0.17\n",
      "2       Grocery Store  0.17\n",
      "3         Supermarket  0.17\n",
      "4          Restaurant  0.17\n",
      "\n",
      "\n",
      "----Birch Cliff, Cliffside West----\n",
      "                venue  freq\n",
      "0         Pizza Place  0.33\n",
      "1  Italian Restaurant  0.17\n",
      "2       Grocery Store  0.17\n",
      "3         Supermarket  0.17\n",
      "4          Restaurant  0.17\n",
      "\n",
      "\n",
      "----Cedarbrae----\n",
      "                    venue  freq\n",
      "0    Fast Food Restaurant  0.13\n",
      "1  Furniture / Home Store  0.09\n",
      "2             Coffee Shop  0.09\n",
      "3             Pizza Place  0.09\n",
      "4            Optical Shop  0.04\n",
      "\n",
      "\n",
      "----Clairlea, Golden Mile, Oakridge----\n",
      "                venue  freq\n",
      "0         Pizza Place  0.33\n",
      "1  Italian Restaurant  0.17\n",
      "2       Grocery Store  0.17\n",
      "3         Supermarket  0.17\n",
      "4          Restaurant  0.17\n",
      "\n",
      "\n",
      "----Clarks Corners, Sullivan, Tam O'Shanter----\n",
      "                venue  freq\n",
      "0         Pizza Place  0.33\n",
      "1  Italian Restaurant  0.17\n",
      "2       Grocery Store  0.17\n",
      "3         Supermarket  0.17\n",
      "4          Restaurant  0.17\n",
      "\n",
      "\n",
      "----Cliffcrest, Cliffside, Scarborough Village West----\n",
      "                venue  freq\n",
      "0         Pizza Place  0.33\n",
      "1  Italian Restaurant  0.17\n",
      "2       Grocery Store  0.17\n",
      "3         Supermarket  0.17\n",
      "4          Restaurant  0.17\n",
      "\n",
      "\n",
      "----Dorset Park, Scarborough Town Centre, Wexford Heights----\n",
      "                venue  freq\n",
      "0         Pizza Place  0.33\n",
      "1  Italian Restaurant  0.17\n",
      "2       Grocery Store  0.17\n",
      "3         Supermarket  0.17\n",
      "4          Restaurant  0.17\n",
      "\n",
      "\n",
      "----East Birchmount Park, Ionview, Kennedy Park----\n",
      "                venue  freq\n",
      "0         Pizza Place  0.33\n",
      "1  Italian Restaurant  0.17\n",
      "2       Grocery Store  0.17\n",
      "3         Supermarket  0.17\n",
      "4          Restaurant  0.17\n",
      "\n",
      "\n",
      "----Guildwood, Morningside, West Hill----\n",
      "                 venue  freq\n",
      "0                 Park   1.0\n",
      "1  Arts & Crafts Store   0.0\n",
      "2     Asian Restaurant   0.0\n",
      "3   Italian Restaurant   0.0\n",
      "4    Korean Restaurant   0.0\n",
      "\n",
      "\n",
      "----Highland Creek, Rouge Hill, Port Union----\n",
      "                venue  freq\n",
      "0         Pizza Place  0.33\n",
      "1  Italian Restaurant  0.17\n",
      "2       Grocery Store  0.17\n",
      "3         Supermarket  0.17\n",
      "4          Restaurant  0.17\n",
      "\n",
      "\n",
      "----L'Amoreaux West----\n",
      "                venue  freq\n",
      "0  Chinese Restaurant   0.4\n",
      "1         Coffee Shop   0.2\n",
      "2  Athletics & Sports   0.2\n",
      "3       Shopping Mall   0.2\n",
      "4        Liquor Store   0.0\n",
      "\n",
      "\n",
      "----Maryvale, Wexford----\n",
      "                 venue  freq\n",
      "0  Arts & Crafts Store  0.08\n",
      "1             Bus Stop  0.08\n",
      "2           Steakhouse  0.08\n",
      "3         Soccer Field  0.08\n",
      "4            Pool Hall  0.08\n",
      "\n",
      "\n",
      "----Rouge, Malvern----\n",
      "                        venue  freq\n",
      "0           Indian Restaurant   0.5\n",
      "1  Construction & Landscaping   0.5\n",
      "2         Arts & Crafts Store   0.0\n",
      "3           Korean Restaurant   0.0\n",
      "4                Liquor Store   0.0\n",
      "\n",
      "\n",
      "----Scarborough Village----\n",
      "                  venue  freq\n",
      "0           Coffee Shop  0.33\n",
      "1                   Pub  0.11\n",
      "2                   Gym  0.11\n",
      "3              Pharmacy  0.11\n",
      "4  Fast Food Restaurant  0.11\n",
      "\n",
      "\n",
      "----Upper Rouge----\n",
      "                  venue  freq\n",
      "0  Fast Food Restaurant  0.33\n",
      "1                  Park  0.33\n",
      "2              Pharmacy  0.33\n",
      "3   Arts & Crafts Store  0.00\n",
      "4     Indian Restaurant  0.00\n",
      "\n",
      "\n",
      "----Woburn----\n",
      "                           venue  freq\n",
      "0           Fast Food Restaurant  0.14\n",
      "1                    Coffee Shop  0.10\n",
      "2  Paper / Office Supplies Store  0.05\n",
      "3               Toy / Game Store  0.05\n",
      "4         Furniture / Home Store  0.05\n",
      "\n",
      "\n"
     ]
    }
   ],
   "source": [
    "num_top_venues = 5\n",
    "\n",
    "for hood in scarborough_grouped['Neighborhood']:\n",
    "    print(\"----\"+hood+\"----\")\n",
    "    temp = scarborough_grouped[scarborough_grouped['Neighborhood'] == hood].T.reset_index()\n",
    "    temp.columns = ['venue','freq']\n",
    "    temp = temp.iloc[1:]\n",
    "    temp['freq'] = temp['freq'].astype(float)\n",
    "    temp = temp.round({'freq': 2})\n",
    "    print(temp.sort_values('freq', ascending=False).reset_index(drop=True).head(num_top_venues))\n",
    "    print('\\n')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 55,
   "metadata": {},
   "outputs": [],
   "source": [
    "def return_most_common_venues(row, num_top_venues):\n",
    "    row_categories = row.iloc[1:]\n",
    "    row_categories_sorted = row_categories.sort_values(ascending=False)\n",
    "    \n",
    "    return row_categories_sorted.index.values[0:num_top_venues]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 64,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Asian Restaurant</td>\n",
       "      <td>Cantonese Restaurant</td>\n",
       "      <td>Train Station</td>\n",
       "      <td>Vietnamese Restaurant</td>\n",
       "      <td>Hong Kong Restaurant</td>\n",
       "      <td>Korean Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Birch Cliff, Cliffside West</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Cedarbrae</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Clothing Store</td>\n",
       "      <td>Liquor Store</td>\n",
       "      <td>Optical Shop</td>\n",
       "      <td>Paper / Office Supplies Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Clairlea, Golden Mile, Oakridge</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                        Neighborhood 1st Most Common Venue  \\\n",
       "0                                          Agincourt    Chinese Restaurant   \n",
       "1  Agincourt North, L'Amoreaux East, Milliken, St...           Pizza Place   \n",
       "2                        Birch Cliff, Cliffside West           Pizza Place   \n",
       "3                                          Cedarbrae  Fast Food Restaurant   \n",
       "4                    Clairlea, Golden Mile, Oakridge           Pizza Place   \n",
       "\n",
       "  2nd Most Common Venue   3rd Most Common Venue 4th Most Common Venue  \\\n",
       "0      Asian Restaurant    Cantonese Restaurant         Train Station   \n",
       "1           Supermarket      Italian Restaurant            Restaurant   \n",
       "2           Supermarket      Italian Restaurant            Restaurant   \n",
       "3           Pizza Place  Furniture / Home Store           Coffee Shop   \n",
       "4           Supermarket      Italian Restaurant            Restaurant   \n",
       "\n",
       "   5th Most Common Venue 6th Most Common Venue 7th Most Common Venue  \\\n",
       "0  Vietnamese Restaurant  Hong Kong Restaurant     Korean Restaurant   \n",
       "1          Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "2          Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "3                    Gym         Grocery Store        Clothing Store   \n",
       "4          Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "\n",
       "  8th Most Common Venue 9th Most Common Venue         10th Most Common Venue  \n",
       "0           Coffee Shop  Fast Food Restaurant              Electronics Store  \n",
       "1  Fast Food Restaurant     Electronics Store                 Discount Store  \n",
       "2  Fast Food Restaurant     Electronics Store                 Discount Store  \n",
       "3          Liquor Store          Optical Shop  Paper / Office Supplies Store  \n",
       "4  Fast Food Restaurant     Electronics Store                 Discount Store  "
      ]
     },
     "execution_count": 64,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "num_top_venues = 10\n",
    "\n",
    "indicators = ['st', 'nd', 'rd']\n",
    "\n",
    "# create columns according to number of top venues\n",
    "columns = ['Neighborhood']\n",
    "for ind in np.arange(num_top_venues):\n",
    "    try:\n",
    "        columns.append('{}{} Most Common Venue'.format(ind+1, indicators[ind]))\n",
    "    except:\n",
    "        columns.append('{}th Most Common Venue'.format(ind+1))\n",
    "\n",
    "# create a new dataframe\n",
    "neighborhoods_venues_sorted = pd.DataFrame(columns=columns)\n",
    "neighborhoods_venues_sorted['Neighborhood'] = scarborough_grouped['Neighborhood']\n",
    "\n",
    "for ind in np.arange(scarborough_grouped.shape[0]):\n",
    "    neighborhoods_venues_sorted.iloc[ind, 1:] = return_most_common_venues(scarborough_grouped.iloc[ind, :], num_top_venues)\n",
    "\n",
    "neighborhoods_venues_sorted.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Let us now cluster neighbourhoods</h4>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 62,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "array([1, 0, 0, 1, 0, 0, 0, 0, 0, 2], dtype=int32)"
      ]
     },
     "execution_count": 62,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# set number of clusters\n",
    "kclusters = 5\n",
    "\n",
    "scarborough_grouped_clustering = scarborough_grouped.drop('Neighborhood', 1)\n",
    "\n",
    "# run k-means clustering\n",
    "kmeans = KMeans(n_clusters=kclusters, random_state=0).fit(scarborough_grouped_clustering)\n",
    "\n",
    "# check cluster labels generated for each row in the dataframe\n",
    "kmeans.labels_[0:10] "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 65,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Borough</th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "      <th>Cluster Labels</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>43.813464</td>\n",
       "      <td>-79.205981</td>\n",
       "      <td>3</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "      <td>Construction &amp; Landscaping</td>\n",
       "      <td>Warehouse Store</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Clothing Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>54.284760</td>\n",
       "      <td>-0.409034</td>\n",
       "      <td>0</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Guildwood, Morningside, West Hill</td>\n",
       "      <td>43.753480</td>\n",
       "      <td>-79.179995</td>\n",
       "      <td>2</td>\n",
       "      <td>Park</td>\n",
       "      <td>Warehouse Store</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "      <td>Construction &amp; Landscaping</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Clothing Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.759824</td>\n",
       "      <td>-79.225291</td>\n",
       "      <td>1</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Discount Store</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Vietnamese Restaurant</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "      <td>Optical Shop</td>\n",
       "      <td>Paper / Office Supplies Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cedarbrae</td>\n",
       "      <td>43.756467</td>\n",
       "      <td>-79.226692</td>\n",
       "      <td>1</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Clothing Store</td>\n",
       "      <td>Liquor Store</td>\n",
       "      <td>Optical Shop</td>\n",
       "      <td>Paper / Office Supplies Store</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       Borough                            Neighborhood   Latitude  Longitude  \\\n",
       "0  Scarborough                          Rouge, Malvern  43.813464 -79.205981   \n",
       "1  Scarborough  Highland Creek, Rouge Hill, Port Union  54.284760  -0.409034   \n",
       "2  Scarborough       Guildwood, Morningside, West Hill  43.753480 -79.179995   \n",
       "3  Scarborough                                  Woburn  43.759824 -79.225291   \n",
       "4  Scarborough                               Cedarbrae  43.756467 -79.226692   \n",
       "\n",
       "   Cluster Labels 1st Most Common Venue       2nd Most Common Venue  \\\n",
       "0               3     Indian Restaurant  Construction & Landscaping   \n",
       "1               0           Pizza Place                 Supermarket   \n",
       "2               2                  Park             Warehouse Store   \n",
       "3               1  Fast Food Restaurant                 Coffee Shop   \n",
       "4               1  Fast Food Restaurant                 Pizza Place   \n",
       "\n",
       "    3rd Most Common Venue   4th Most Common Venue   5th Most Common Venue  \\\n",
       "0         Warehouse Store           Grocery Store  Furniture / Home Store   \n",
       "1      Italian Restaurant              Restaurant           Grocery Store   \n",
       "2           Grocery Store  Furniture / Home Store    Fast Food Restaurant   \n",
       "3             Pizza Place  Furniture / Home Store          Discount Store   \n",
       "4  Furniture / Home Store             Coffee Shop                     Gym   \n",
       "\n",
       "  6th Most Common Venue  7th Most Common Venue       8th Most Common Venue  \\\n",
       "0  Fast Food Restaurant      Electronics Store              Discount Store   \n",
       "1       Badminton Court     Chinese Restaurant        Fast Food Restaurant   \n",
       "2     Electronics Store         Discount Store  Construction & Landscaping   \n",
       "3         Grocery Store  Vietnamese Restaurant           Indian Restaurant   \n",
       "4         Grocery Store         Clothing Store                Liquor Store   \n",
       "\n",
       "  9th Most Common Venue         10th Most Common Venue  \n",
       "0           Coffee Shop                 Clothing Store  \n",
       "1     Electronics Store                 Discount Store  \n",
       "2           Coffee Shop                 Clothing Store  \n",
       "3          Optical Shop  Paper / Office Supplies Store  \n",
       "4          Optical Shop  Paper / Office Supplies Store  "
      ]
     },
     "execution_count": 65,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# add clustering labels\n",
    "neighborhoods_venues_sorted.insert(0, 'Cluster Labels', kmeans.labels_)\n",
    "\n",
    "scarborough_merged = scarborough_data\n",
    "\n",
    "# merge toronto_grouped with toronto_data to add latitude/longitude for each neighborhood\n",
    "scarborough_merged = scarborough_merged.join(neighborhoods_venues_sorted.set_index('Neighborhood'), on='Neighborhood')\n",
    "\n",
    "scarborough_merged.head() # check the last columns!"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 75,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfNmExODEwMWYxYWY3NDI2YjhjNzE4ODQyMTA1ZGMyOWUgewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwXzZhMTgxMDFmMWFmNzQyNmI4YzcxODg0MjEwNWRjMjllIiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF82YTE4MTAxZjFhZjc0MjZiOGM3MTg4NDIxMDVkYzI5ZSA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF82YTE4MTAxZjFhZjc0MjZiOGM3MTg4NDIxMDVkYzI5ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbNDMuNzczMDc3LC03OS4yNTc3NzRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JsZENvcHlKdW1wOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzFkOTUzMGU0NmM3MjQ5ZjI4ODExZWY1ZDA0ZGY1N2RjID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICAgICAgICAgICAgewogICJhdHRyaWJ1dGlvbiI6IG51bGwsCiAgImRldGVjdFJldGluYSI6IGZhbHNlLAogICJtYXhab29tIjogMTgsCiAgIm1pblpvb20iOiAxLAogICJub1dyYXAiOiBmYWxzZSwKICAic3ViZG9tYWlucyI6ICJhYmMiCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzZhMTgxMDFmMWFmNzQyNmI4YzcxODg0MjEwNWRjMjllKTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85MjI2Mjc3ZTY0Mzc0OGZhOWMyOGFjYjNkODAwZTY3NiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjgxMzQ2NCwtNzkuMjA1OTgwOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjODBmZmI0IiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzgwZmZiNCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF82YTE4MTAxZjFhZjc0MjZiOGM3MTg4NDIxMDVkYzI5ZSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lM2Q3NjQ4OTc4ZGM0M2Q2ODc3N2IwNmU5MGNkZTllMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81MmRlYjI0YzY5MzM0ODYwYjVmZmMyNTZhNjU3M2RhNSA9ICQoJzxkaXYgaWQ9Imh0bWxfNTJkZWIyNGM2OTMzNDg2MGI1ZmZjMjU2YTY1NzNkYTUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvdWdlLCBNYWx2ZXJuIENsdXN0ZXIgMzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTNkNzY0ODk3OGRjNDNkNjg3NzdiMDZlOTBjZGU5ZTIuc2V0Q29udGVudChodG1sXzUyZGViMjRjNjkzMzQ4NjBiNWZmYzI1NmE2NTczZGE1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzkyMjYyNzdlNjQzNzQ4ZmE5YzI4YWNiM2Q4MDBlNjc2LmJpbmRQb3B1cChwb3B1cF9lM2Q3NjQ4OTc4ZGM0M2Q2ODc3N2IwNmU5MGNkZTllMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yNjM1NmMwMWQ0NzM0YWJkYWY0OGMwNzgxZWNlZDc1MiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzU0LjI4NDc2MDEsLTAuNDA5MDMzOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF82YTE4MTAxZjFhZjc0MjZiOGM3MTg4NDIxMDVkYzI5ZSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iMmMyODI3YzgxNzM0ZjZkYWRhMmEyNjAxODJlNTRkZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82NTZkNjNiM2QxOTM0ZDEzODc0NGQ0NmU5NDFkMzY0NiA9ICQoJzxkaXYgaWQ9Imh0bWxfNjU2ZDYzYjNkMTkzNGQxMzg3NDRkNDZlOTQxZDM2NDYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhpZ2hsYW5kIENyZWVrLCBSb3VnZSBIaWxsLCBQb3J0IFVuaW9uIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjJjMjgyN2M4MTczNGY2ZGFkYTJhMjYwMTgyZTU0ZGUuc2V0Q29udGVudChodG1sXzY1NmQ2M2IzZDE5MzRkMTM4NzQ0ZDQ2ZTk0MWQzNjQ2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzI2MzU2YzAxZDQ3MzRhYmRhZjQ4YzA3ODFlY2VkNzUyLmJpbmRQb3B1cChwb3B1cF9iMmMyODI3YzgxNzM0ZjZkYWRhMmEyNjAxODJlNTRkZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lMmE5MmEwMjljNjg0MWE2ODE0OGE5ZTA3N2QwNzc2ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc1MzQ4MDQsLTc5LjE3OTk5NDldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzAwYjVlYiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMwMGI1ZWIiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNmExODEwMWYxYWY3NDI2YjhjNzE4ODQyMTA1ZGMyOWUpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTg4NGQ4ODBkNTExNDEzMWJkNjQ5Yzg0MWM3ZDhlZmQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDVmNzA2MGYyNzA3NGM2OGI5NTJhYjEwOTg1ZTQyNWUgPSAkKCc8ZGl2IGlkPSJodG1sXzA1ZjcwNjBmMjcwNzRjNjhiOTUyYWIxMDk4NWU0MjVlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HdWlsZHdvb2QsIE1vcm5pbmdzaWRlLCBXZXN0IEhpbGwgQ2x1c3RlciAyPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lODg0ZDg4MGQ1MTE0MTMxYmQ2NDljODQxYzdkOGVmZC5zZXRDb250ZW50KGh0bWxfMDVmNzA2MGYyNzA3NGM2OGI5NTJhYjEwOTg1ZTQyNWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTJhOTJhMDI5YzY4NDFhNjgxNDhhOWUwNzdkMDc3NmQuYmluZFBvcHVwKHBvcHVwX2U4ODRkODgwZDUxMTQxMzFiZDY0OWM4NDFjN2Q4ZWZkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2VjMzlhZDU1YjFmZDQyYTBiYzZmZjc3MGMyZTZjZmYzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU5ODI0MywtNzkuMjI1MjkwOF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjODAwMGZmIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF82YTE4MTAxZjFhZjc0MjZiOGM3MTg4NDIxMDVkYzI5ZSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83MmY1ZDJhOTBjNTg0NmQ4YWZiYjUwNTM5YjM2YTEwZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yOWFiZDI2ZDliZWE0MDQ4OGUzZTUzMjViZDJhZDhjMiA9ICQoJzxkaXYgaWQ9Imh0bWxfMjlhYmQyNmQ5YmVhNDA0ODhlM2U1MzI1YmQyYWQ4YzIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldvYnVybiBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzcyZjVkMmE5MGM1ODQ2ZDhhZmJiNTA1MzliMzZhMTBlLnNldENvbnRlbnQoaHRtbF8yOWFiZDI2ZDliZWE0MDQ4OGUzZTUzMjViZDJhZDhjMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lYzM5YWQ1NWIxZmQ0MmEwYmM2ZmY3NzBjMmU2Y2ZmMy5iaW5kUG9wdXAocG9wdXBfNzJmNWQyYTkwYzU4NDZkOGFmYmI1MDUzOWIzNmExMGUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMjdlZTZkZGViNjZhNDI0Nzg0YzE0OGQxYzIwODg3N2IgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NTY0NjY1NSwtNzkuMjI2NjkyNDQyNTg4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzZhMTgxMDFmMWFmNzQyNmI4YzcxODg0MjEwNWRjMjllKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzFlZjYyNmEzNDQ4ZjQ1ZTdhNTQyNDAxNmE1M2I3ZjJkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzI3ZTk4N2I0YzMyZjQxM2U4Y2IyMzFhYTgxNmJhYjUxID0gJCgnPGRpdiBpZD0iaHRtbF8yN2U5ODdiNGMzMmY0MTNlOGNiMjMxYWE4MTZiYWI1MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2VkYXJicmFlIENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMWVmNjI2YTM0NDhmNDVlN2E1NDI0MDE2YTUzYjdmMmQuc2V0Q29udGVudChodG1sXzI3ZTk4N2I0YzMyZjQxM2U4Y2IyMzFhYTgxNmJhYjUxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzI3ZWU2ZGRlYjY2YTQyNDc4NGMxNDhkMWMyMDg4NzdiLmJpbmRQb3B1cChwb3B1cF8xZWY2MjZhMzQ0OGY0NWU3YTU0MjQwMTZhNTNiN2YyZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hNTk3YTQ0OWJkODI0Zjg3YjIxYTRhOGViNTU1YTZmNiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc0Mzc0MjIsLTc5LjIxMTYzMjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNmExODEwMWYxYWY3NDI2YjhjNzE4ODQyMTA1ZGMyOWUpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOGQ3MTNmMzU1NTczNGY3MWJkNTllMGQ0YmYzMzZlYTAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzY4NjNiOGE1Yzc5NGVkMGEzY2E4YThkZmI1YTAyNjEgPSAkKCc8ZGl2IGlkPSJodG1sX2M2ODYzYjhhNWM3OTRlZDBhM2NhOGE4ZGZiNWEwMjYxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TY2FyYm9yb3VnaCBWaWxsYWdlIENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGQ3MTNmMzU1NTczNGY3MWJkNTllMGQ0YmYzMzZlYTAuc2V0Q29udGVudChodG1sX2M2ODYzYjhhNWM3OTRlZDBhM2NhOGE4ZGZiNWEwMjYxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2E1OTdhNDQ5YmQ4MjRmODdiMjFhNGE4ZWI1NTVhNmY2LmJpbmRQb3B1cChwb3B1cF84ZDcxM2YzNTU1NzM0ZjcxYmQ1OWUwZDRiZjMzNmVhMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84NzM1ZDkyYjgyZDM0OTk2ODhkZmUxZGE4MWU4YTZlMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzU0LjI4NDc2MDEsLTAuNDA5MDMzOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF82YTE4MTAxZjFhZjc0MjZiOGM3MTg4NDIxMDVkYzI5ZSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kYTBhZmQyMmVkYzA0ZDRiOWJmM2RjZWRjOWYwYTY2NCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lNWQ1YjllNTlmY2Q0NWIyODExNGE1NzA4YmYwOTc4YiA9ICQoJzxkaXYgaWQ9Imh0bWxfZTVkNWI5ZTU5ZmNkNDViMjgxMTRhNTcwOGJmMDk3OGIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkVhc3QgQmlyY2htb3VudCBQYXJrLCBJb252aWV3LCBLZW5uZWR5IFBhcmsgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kYTBhZmQyMmVkYzA0ZDRiOWJmM2RjZWRjOWYwYTY2NC5zZXRDb250ZW50KGh0bWxfZTVkNWI5ZTU5ZmNkNDViMjgxMTRhNTcwOGJmMDk3OGIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODczNWQ5MmI4MmQzNDk5Njg4ZGZlMWRhODFlOGE2ZTAuYmluZFBvcHVwKHBvcHVwX2RhMGFmZDIyZWRjMDRkNGI5YmYzZGNlZGM5ZjBhNjY0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzViNWI4Y2VlZGE1NzQ3OThiMjMxMDIxNGYwM2EzYjFiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNTQuMjg0NzYwMSwtMC40MDkwMzM5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzZhMTgxMDFmMWFmNzQyNmI4YzcxODg0MjEwNWRjMjllKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzljNDBkZTZkNzY2YzRlZGM4YWIwZDBhZjY3MGZlYjNiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzg1YjZhMzYyNGFjZDQ0NmFhZDNmNzMwNjVjMzE3MDY0ID0gJCgnPGRpdiBpZD0iaHRtbF84NWI2YTM2MjRhY2Q0NDZhYWQzZjczMDY1YzMxNzA2NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2xhaXJsZWEsIEdvbGRlbiBNaWxlLCBPYWtyaWRnZSBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzljNDBkZTZkNzY2YzRlZGM4YWIwZDBhZjY3MGZlYjNiLnNldENvbnRlbnQoaHRtbF84NWI2YTM2MjRhY2Q0NDZhYWQzZjczMDY1YzMxNzA2NCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81YjViOGNlZWRhNTc0Nzk4YjIzMTAyMTRmMDNhM2IxYi5iaW5kUG9wdXAocG9wdXBfOWM0MGRlNmQ3NjZjNGVkYzhhYjBkMGFmNjcwZmViM2IpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTYyMWM4ZmY5OGZkNDhjNDlkZjBhZjk0MjUyMzdlMWQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNmExODEwMWYxYWY3NDI2YjhjNzE4ODQyMTA1ZGMyOWUpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfN2YwZDRjY2QyMTg5NGI5MDk5ZGRhMDhmOTZjYTlmZWYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZGVhYjYyMGM1YTM5NGE0NDlkYjNjMzFhYmRmZmQ5ZDkgPSAkKCc8ZGl2IGlkPSJodG1sX2RlYWI2MjBjNWEzOTRhNDQ5ZGIzYzMxYWJkZmZkOWQ5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DbGlmZmNyZXN0LCBDbGlmZnNpZGUsIFNjYXJib3JvdWdoIFZpbGxhZ2UgV2VzdCBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdmMGQ0Y2NkMjE4OTRiOTA5OWRkYTA4Zjk2Y2E5ZmVmLnNldENvbnRlbnQoaHRtbF9kZWFiNjIwYzVhMzk0YTQ0OWRiM2MzMWFiZGZmZDlkOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lNjIxYzhmZjk4ZmQ0OGM0OWRmMGFmOTQyNTIzN2UxZC5iaW5kUG9wdXAocG9wdXBfN2YwZDRjY2QyMTg5NGI5MDk5ZGRhMDhmOTZjYTlmZWYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDJhZmQyZjcyYjk0NDg5NTlhYWNhNDdjZWMyNDA1MjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNmExODEwMWYxYWY3NDI2YjhjNzE4ODQyMTA1ZGMyOWUpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTUwZDJmZDYxNmU0NGYyY2JkNTU5YmU3Mzg1MzBmZmEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjU3OWUxOGM1NzYwNDQ5YWFmZTMwYTZiYWQzZGYzY2YgPSAkKCc8ZGl2IGlkPSJodG1sXzI1NzllMThjNTc2MDQ0OWFhZmUzMGE2YmFkM2RmM2NmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CaXJjaCBDbGlmZiwgQ2xpZmZzaWRlIFdlc3QgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85NTBkMmZkNjE2ZTQ0ZjJjYmQ1NTliZTczODUzMGZmYS5zZXRDb250ZW50KGh0bWxfMjU3OWUxOGM1NzYwNDQ5YWFmZTMwYTZiYWQzZGYzY2YpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDJhZmQyZjcyYjk0NDg5NTlhYWNhNDdjZWMyNDA1MjQuYmluZFBvcHVwKHBvcHVwXzk1MGQyZmQ2MTZlNDRmMmNiZDU1OWJlNzM4NTMwZmZhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzk3OWZmOGU3ZTUxYjQ1OGM5MGM2ZjY4ZjA4NjlmNGUyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNTQuMjg0NzYwMSwtMC40MDkwMzM5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzZhMTgxMDFmMWFmNzQyNmI4YzcxODg0MjEwNWRjMjllKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzRhMjViZTQzN2QyMDQ1ODE4NTAyMDhlMTUzODcyMjg5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzk4ZDYyNWEwNmE2ZTQzMjA5YTJiYzgxMDJiZDcwMjJhID0gJCgnPGRpdiBpZD0iaHRtbF85OGQ2MjVhMDZhNmU0MzIwOWEyYmM4MTAyYmQ3MDIyYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RG9yc2V0IFBhcmssIFNjYXJib3JvdWdoIFRvd24gQ2VudHJlLCBXZXhmb3JkIEhlaWdodHMgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80YTI1YmU0MzdkMjA0NTgxODUwMjA4ZTE1Mzg3MjI4OS5zZXRDb250ZW50KGh0bWxfOThkNjI1YTA2YTZlNDMyMDlhMmJjODEwMmJkNzAyMmEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTc5ZmY4ZTdlNTFiNDU4YzkwYzZmNjhmMDg2OWY0ZTIuYmluZFBvcHVwKHBvcHVwXzRhMjViZTQzN2QyMDQ1ODE4NTAyMDhlMTUzODcyMjg5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzU3Y2NiMThiOGFiOTRiZTc5NjE1ODNiZmY4ODAxY2Y3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU5ODMwNiwtNzkuMjk2NDcwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjODAwMGZmIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF82YTE4MTAxZjFhZjc0MjZiOGM3MTg4NDIxMDVkYzI5ZSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mNDYwNWI1OTljY2Q0ZjhhYjI2ZDFiOGZhYTI2YmE1YiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hYzdmMGFjZGExNWY0ZmQ2ODc2ZTRjODk4MTgzYmU4OSA9ICQoJzxkaXYgaWQ9Imh0bWxfYWM3ZjBhY2RhMTVmNGZkNjg3NmU0Yzg5ODE4M2JlODkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1hcnl2YWxlLCBXZXhmb3JkIENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjQ2MDViNTk5Y2NkNGY4YWIyNmQxYjhmYWEyNmJhNWIuc2V0Q29udGVudChodG1sX2FjN2YwYWNkYTE1ZjRmZDY4NzZlNGM4OTgxODNiZTg5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzU3Y2NiMThiOGFiOTRiZTc5NjE1ODNiZmY4ODAxY2Y3LmJpbmRQb3B1cChwb3B1cF9mNDYwNWI1OTljY2Q0ZjhhYjI2ZDFiOGZhYTI2YmE1Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83ZmZlYjhjMGQ3YWU0ZDhmODZiOTdlNWYzZTEzYjdmYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc4NTM1MzEsLTc5LjI3ODU0OTRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNmExODEwMWYxYWY3NDI2YjhjNzE4ODQyMTA1ZGMyOWUpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjNlNTc3ZmYxZTFhNDA0ZjhhMGUwNGE0OWViNTc1NmMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYmMyNjFmYWEyNTk0NGRmNWJmZGI2MGE3MzBmOWQ0ZDIgPSAkKCc8ZGl2IGlkPSJodG1sX2JjMjYxZmFhMjU5NDRkZjViZmRiNjBhNzMwZjlkNGQyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BZ2luY291cnQgQ2x1c3RlciAxPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82M2U1NzdmZjFlMWE0MDRmOGEwZTA0YTQ5ZWI1NzU2Yy5zZXRDb250ZW50KGh0bWxfYmMyNjFmYWEyNTk0NGRmNWJmZGI2MGE3MzBmOWQ0ZDIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfN2ZmZWI4YzBkN2FlNGQ4Zjg2Yjk3ZTVmM2UxM2I3ZmMuYmluZFBvcHVwKHBvcHVwXzYzZTU3N2ZmMWUxYTQwNGY4YTBlMDRhNDllYjU3NTZjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzlkODU1NTFhZTQxYzQ3OGRhYTZkZTljZmE3NDA1MWU0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNTQuMjg0NzYwMSwtMC40MDkwMzM5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzZhMTgxMDFmMWFmNzQyNmI4YzcxODg0MjEwNWRjMjllKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdlYjI1MDk0MjI2ZDQyNTQ5ZDAzNmEyODcyZmVhZjFjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzMyNmY3OGUwZmI2ZTQ5OWM5OWJlZmM4MmM0MmRiNWE2ID0gJCgnPGRpdiBpZD0iaHRtbF8zMjZmNzhlMGZiNmU0OTljOTliZWZjODJjNDJkYjVhNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2xhcmtzIENvcm5lcnMsIFN1bGxpdmFuLCBUYW0gTyYjMzk7U2hhbnRlciBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdlYjI1MDk0MjI2ZDQyNTQ5ZDAzNmEyODcyZmVhZjFjLnNldENvbnRlbnQoaHRtbF8zMjZmNzhlMGZiNmU0OTljOTliZWZjODJjNDJkYjVhNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85ZDg1NTUxYWU0MWM0NzhkYWE2ZGU5Y2ZhNzQwNTFlNC5iaW5kUG9wdXAocG9wdXBfN2ViMjUwOTQyMjZkNDI1NDlkMDM2YTI4NzJmZWFmMWMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzhmZDA1ZGIyMjk4NGRhYTk4NDk4M2NhNGQxMjI0ZTMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs1NC4yODQ3NjAxLC0wLjQwOTAzMzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNmExODEwMWYxYWY3NDI2YjhjNzE4ODQyMTA1ZGMyOWUpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTlkNzY0NjkyNTBkNDlkY2JlMzQ0OGI4NjBmNTM1OTkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjEwYjE2ODcwNzVkNDdjM2E1NmMxY2E2ZjE5ODQ2NDIgPSAkKCc8ZGl2IGlkPSJodG1sX2IxMGIxNjg3MDc1ZDQ3YzNhNTZjMWNhNmYxOTg0NjQyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BZ2luY291cnQgTm9ydGgsIEwmIzM5O0Ftb3JlYXV4IEVhc3QsIE1pbGxpa2VuLCBTdGVlbGVzIEVhc3QgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lOWQ3NjQ2OTI1MGQ0OWRjYmUzNDQ4Yjg2MGY1MzU5OS5zZXRDb250ZW50KGh0bWxfYjEwYjE2ODcwNzVkNDdjM2E1NmMxY2E2ZjE5ODQ2NDIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzhmZDA1ZGIyMjk4NGRhYTk4NDk4M2NhNGQxMjI0ZTMuYmluZFBvcHVwKHBvcHVwX2U5ZDc2NDY5MjUwZDQ5ZGNiZTM0NDhiODYwZjUzNTk5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzZiZWM3MTQxYWU5NDQ2YmM5NWM0Y2I1M2RkM2JmNTM4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzk5MDAzLC03OS4zMDU5NjY5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzZhMTgxMDFmMWFmNzQyNmI4YzcxODg0MjEwNWRjMjllKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzRjZGIxNjQyZGYyMzQ4YWI5MmFhNTFiNzZlZjMyYjYxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2UzZTYxN2Q5MWI3ZDQ5ZGRhYjdmYjA3ZWE1NWMzMzlmID0gJCgnPGRpdiBpZD0iaHRtbF9lM2U2MTdkOTFiN2Q0OWRkYWI3ZmIwN2VhNTVjMzM5ZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TCYjMzk7QW1vcmVhdXggV2VzdCBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzRjZGIxNjQyZGYyMzQ4YWI5MmFhNTFiNzZlZjMyYjYxLnNldENvbnRlbnQoaHRtbF9lM2U2MTdkOTFiN2Q0OWRkYWI3ZmIwN2VhNTVjMzM5Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82YmVjNzE0MWFlOTQ0NmJjOTVjNGNiNTNkZDNiZjUzOC5iaW5kUG9wdXAocG9wdXBfNGNkYjE2NDJkZjIzNDhhYjkyYWE1MWI3NmVmMzJiNjEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTc0NTg4NjE3OTQyNGU0Zjk0NGJiN2ZmN2RkOGIzZGUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My44MDQ5MzA0LC03OS4xNjU4Mzc0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZmIzNjAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmZiMzYwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzZhMTgxMDFmMWFmNzQyNmI4YzcxODg0MjEwNWRjMjllKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Y4ZTJmZTJmNDBkMjQ1Zjg5MjdhZTA1OWI2MjJiZmU1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q3Y2EyODRkOTYzZjQ0ZTdhZDcwMGI1Mjk1NzAwZDgyID0gJCgnPGRpdiBpZD0iaHRtbF9kN2NhMjg0ZDk2M2Y0NGU3YWQ3MDBiNTI5NTcwMGQ4MiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VXBwZXIgUm91Z2UgQ2x1c3RlciA0PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mOGUyZmUyZjQwZDI0NWY4OTI3YWUwNTliNjIyYmZlNS5zZXRDb250ZW50KGh0bWxfZDdjYTI4NGQ5NjNmNDRlN2FkNzAwYjUyOTU3MDBkODIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTc0NTg4NjE3OTQyNGU0Zjk0NGJiN2ZmN2RkOGIzZGUuYmluZFBvcHVwKHBvcHVwX2Y4ZTJmZTJmNDBkMjQ1Zjg5MjdhZTA1OWI2MjJiZmU1KTsKCiAgICAgICAgICAgIAogICAgICAgIAo8L3NjcmlwdD4=\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x7f954430da20>"
      ]
     },
     "execution_count": 75,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# create map\n",
    "map_clusters = folium.Map(location=[s_latitude, s_longitude], zoom_start=11)\n",
    "\n",
    "# set color scheme for the clusters\n",
    "x = np.arange(kclusters)\n",
    "ys = [i + x + (i*x)**2 for i in range(kclusters)]\n",
    "colors_array = cm.rainbow(np.linspace(0, 1, len(ys)))\n",
    "rainbow = [colors.rgb2hex(i) for i in colors_array]\n",
    "\n",
    "# add markers to the map\n",
    "markers_colors = []\n",
    "for lat, lon, poi, cluster in zip(scarborough_merged['Latitude'], scarborough_merged['Longitude'], scarborough_merged['Neighborhood'], scarborough_merged['Cluster Labels']):\n",
    "    label = folium.Popup(str(poi) + ' Cluster ' + str(cluster), parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lon],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color=rainbow[cluster-1],\n",
    "        fill=True,\n",
    "        fill_color=rainbow[cluster-1],\n",
    "        fill_opacity=0.7).add_to(map_clusters)\n",
    "       \n",
    "map_clusters"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h4>Examining our clusters</h4>\n",
    "Let us examine first cluster"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 69,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Highland Creek, Rouge Hill, Port Union</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>East Birchmount Park, Ionview, Kennedy Park</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Clairlea, Golden Mile, Oakridge</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Cliffcrest, Cliffside, Scarborough Village West</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Birch Cliff, Cliffside West</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Dorset Park, Scarborough Town Centre, Wexford ...</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                         Neighborhood 1st Most Common Venue  \\\n",
       "1              Highland Creek, Rouge Hill, Port Union           Pizza Place   \n",
       "6         East Birchmount Park, Ionview, Kennedy Park           Pizza Place   \n",
       "7                     Clairlea, Golden Mile, Oakridge           Pizza Place   \n",
       "8     Cliffcrest, Cliffside, Scarborough Village West           Pizza Place   \n",
       "9                         Birch Cliff, Cliffside West           Pizza Place   \n",
       "10  Dorset Park, Scarborough Town Centre, Wexford ...           Pizza Place   \n",
       "13            Clarks Corners, Sullivan, Tam O'Shanter           Pizza Place   \n",
       "14  Agincourt North, L'Amoreaux East, Milliken, St...           Pizza Place   \n",
       "\n",
       "   2nd Most Common Venue 3rd Most Common Venue 4th Most Common Venue  \\\n",
       "1            Supermarket    Italian Restaurant            Restaurant   \n",
       "6            Supermarket    Italian Restaurant            Restaurant   \n",
       "7            Supermarket    Italian Restaurant            Restaurant   \n",
       "8            Supermarket    Italian Restaurant            Restaurant   \n",
       "9            Supermarket    Italian Restaurant            Restaurant   \n",
       "10           Supermarket    Italian Restaurant            Restaurant   \n",
       "13           Supermarket    Italian Restaurant            Restaurant   \n",
       "14           Supermarket    Italian Restaurant            Restaurant   \n",
       "\n",
       "   5th Most Common Venue 6th Most Common Venue 7th Most Common Venue  \\\n",
       "1          Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "6          Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "7          Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "8          Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "9          Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "10         Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "13         Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "14         Grocery Store       Badminton Court    Chinese Restaurant   \n",
       "\n",
       "   8th Most Common Venue 9th Most Common Venue 10th Most Common Venue  \n",
       "1   Fast Food Restaurant     Electronics Store         Discount Store  \n",
       "6   Fast Food Restaurant     Electronics Store         Discount Store  \n",
       "7   Fast Food Restaurant     Electronics Store         Discount Store  \n",
       "8   Fast Food Restaurant     Electronics Store         Discount Store  \n",
       "9   Fast Food Restaurant     Electronics Store         Discount Store  \n",
       "10  Fast Food Restaurant     Electronics Store         Discount Store  \n",
       "13  Fast Food Restaurant     Electronics Store         Discount Store  \n",
       "14  Fast Food Restaurant     Electronics Store         Discount Store  "
      ]
     },
     "execution_count": 69,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_merged.loc[scarborough_merged['Cluster Labels'] == 0, scarborough_merged.columns[[1] + list(range(5, scarborough_merged.shape[1]))]]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Examine second cluster"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 70,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Woburn</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Discount Store</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Vietnamese Restaurant</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "      <td>Optical Shop</td>\n",
       "      <td>Paper / Office Supplies Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Cedarbrae</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Clothing Store</td>\n",
       "      <td>Liquor Store</td>\n",
       "      <td>Optical Shop</td>\n",
       "      <td>Paper / Office Supplies Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Scarborough Village</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Discount Store</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Pharmacy</td>\n",
       "      <td>Cantonese Restaurant</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Electronics Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>Maryvale, Wexford</td>\n",
       "      <td>Warehouse Store</td>\n",
       "      <td>Pool Hall</td>\n",
       "      <td>Badminton Court</td>\n",
       "      <td>Breakfast Spot</td>\n",
       "      <td>Bus Stop</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Greek Restaurant</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Arts &amp; Crafts Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Agincourt</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Asian Restaurant</td>\n",
       "      <td>Cantonese Restaurant</td>\n",
       "      <td>Train Station</td>\n",
       "      <td>Vietnamese Restaurant</td>\n",
       "      <td>Hong Kong Restaurant</td>\n",
       "      <td>Korean Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>L'Amoreaux West</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Athletics &amp; Sports</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Warehouse Store</td>\n",
       "      <td>Cantonese Restaurant</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "           Neighborhood 1st Most Common Venue 2nd Most Common Venue  \\\n",
       "3                Woburn  Fast Food Restaurant           Coffee Shop   \n",
       "4             Cedarbrae  Fast Food Restaurant           Pizza Place   \n",
       "5   Scarborough Village           Coffee Shop                   Gym   \n",
       "11    Maryvale, Wexford       Warehouse Store             Pool Hall   \n",
       "12            Agincourt    Chinese Restaurant      Asian Restaurant   \n",
       "15      L'Amoreaux West    Chinese Restaurant    Athletics & Sports   \n",
       "\n",
       "     3rd Most Common Venue   4th Most Common Venue  5th Most Common Venue  \\\n",
       "3              Pizza Place  Furniture / Home Store         Discount Store   \n",
       "4   Furniture / Home Store             Coffee Shop                    Gym   \n",
       "5     Fast Food Restaurant          Discount Store     Chinese Restaurant   \n",
       "11         Badminton Court          Breakfast Spot               Bus Stop   \n",
       "12    Cantonese Restaurant           Train Station  Vietnamese Restaurant   \n",
       "15           Shopping Mall             Coffee Shop        Warehouse Store   \n",
       "\n",
       "   6th Most Common Venue   7th Most Common Venue 8th Most Common Venue  \\\n",
       "3          Grocery Store   Vietnamese Restaurant     Indian Restaurant   \n",
       "4          Grocery Store          Clothing Store          Liquor Store   \n",
       "5                    Pub                Pharmacy  Cantonese Restaurant   \n",
       "11    Chinese Restaurant             Coffee Shop      Greek Restaurant   \n",
       "12  Hong Kong Restaurant       Korean Restaurant           Coffee Shop   \n",
       "15  Cantonese Restaurant  Furniture / Home Store  Fast Food Restaurant   \n",
       "\n",
       "     9th Most Common Venue         10th Most Common Venue  \n",
       "3             Optical Shop  Paper / Office Supplies Store  \n",
       "4             Optical Shop  Paper / Office Supplies Store  \n",
       "5   Furniture / Home Store              Electronics Store  \n",
       "11             Pizza Place            Arts & Crafts Store  \n",
       "12    Fast Food Restaurant              Electronics Store  \n",
       "15       Electronics Store                 Discount Store  "
      ]
     },
     "execution_count": 70,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_merged.loc[scarborough_merged['Cluster Labels'] == 1, scarborough_merged.columns[[1] + list(range(5, scarborough_merged.shape[1]))]]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Examine third cluster"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 72,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Guildwood, Morningside, West Hill</td>\n",
       "      <td>Park</td>\n",
       "      <td>Warehouse Store</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "      <td>Construction &amp; Landscaping</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Clothing Store</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                        Neighborhood 1st Most Common Venue  \\\n",
       "2  Guildwood, Morningside, West Hill                  Park   \n",
       "\n",
       "  2nd Most Common Venue 3rd Most Common Venue   4th Most Common Venue  \\\n",
       "2       Warehouse Store         Grocery Store  Furniture / Home Store   \n",
       "\n",
       "  5th Most Common Venue 6th Most Common Venue 7th Most Common Venue  \\\n",
       "2  Fast Food Restaurant     Electronics Store        Discount Store   \n",
       "\n",
       "        8th Most Common Venue 9th Most Common Venue 10th Most Common Venue  \n",
       "2  Construction & Landscaping           Coffee Shop         Clothing Store  "
      ]
     },
     "execution_count": 72,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_merged.loc[scarborough_merged['Cluster Labels'] == 2, scarborough_merged.columns[[1] + list(range(5, scarborough_merged.shape[1]))]]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Examine 4th cluster"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 73,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Rouge, Malvern</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "      <td>Construction &amp; Landscaping</td>\n",
       "      <td>Warehouse Store</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Clothing Store</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "     Neighborhood 1st Most Common Venue       2nd Most Common Venue  \\\n",
       "0  Rouge, Malvern     Indian Restaurant  Construction & Landscaping   \n",
       "\n",
       "  3rd Most Common Venue 4th Most Common Venue   5th Most Common Venue  \\\n",
       "0       Warehouse Store         Grocery Store  Furniture / Home Store   \n",
       "\n",
       "  6th Most Common Venue 7th Most Common Venue 8th Most Common Venue  \\\n",
       "0  Fast Food Restaurant     Electronics Store        Discount Store   \n",
       "\n",
       "  9th Most Common Venue 10th Most Common Venue  \n",
       "0           Coffee Shop         Clothing Store  "
      ]
     },
     "execution_count": 73,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_merged.loc[scarborough_merged['Cluster Labels'] == 3, scarborough_merged.columns[[1] + list(range(5, scarborough_merged.shape[1]))]]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Examine 5th cluster"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 74,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>Upper Rouge</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Park</td>\n",
       "      <td>Pharmacy</td>\n",
       "      <td>Warehouse Store</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Discount Store</td>\n",
       "      <td>Construction &amp; Landscaping</td>\n",
       "      <td>Coffee Shop</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Neighborhood 1st Most Common Venue 2nd Most Common Venue  \\\n",
       "16  Upper Rouge  Fast Food Restaurant                  Park   \n",
       "\n",
       "   3rd Most Common Venue 4th Most Common Venue 5th Most Common Venue  \\\n",
       "16              Pharmacy       Warehouse Store    Chinese Restaurant   \n",
       "\n",
       "     6th Most Common Venue 7th Most Common Venue 8th Most Common Venue  \\\n",
       "16  Furniture / Home Store     Electronics Store        Discount Store   \n",
       "\n",
       "         9th Most Common Venue 10th Most Common Venue  \n",
       "16  Construction & Landscaping            Coffee Shop  "
      ]
     },
     "execution_count": 74,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scarborough_merged.loc[scarborough_merged['Cluster Labels'] == 4, scarborough_merged.columns[[1] + list(range(5, scarborough_merged.shape[1]))]]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Based on our clusters we see that first cluster had neighbourhoods which had Pizza place, Supermarket, Italian resturants as common venue, which means that this neighbourhood is more favourable for european or italian residents.\n",
    "Second cluster had meighbourhoods which had Chinese, Fast food and Cantonese place venues, this suggests that this place is more favourable to Asian particularly chinese residents\n",
    "Third, Fourth and Fifth clusters did not have too many neighbourhoods in them, but were distinct from first two clusters as they had Park, Pharmacy, Warehoue and Indian restuarants as their top venues."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3.5",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.5.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 1
}
